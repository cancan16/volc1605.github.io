<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
<link href="//cdn.bootcss.com/pace/1.0.2/themes/pink/pace-theme-flash.css" rel="stylesheet">
<style>
    .pace .pace-progress {
        background: #24292e; /*进度条颜色*/
        height: 3px;
    }
    .pace .pace-progress-inner {
         box-shadow: 0 0 10px #1E92FB, 0 0 5px     #1E92FB; /*阴影颜色*/
    }
    .pace .pace-activity {
        border-top-color: #1E92FB;    /*上边框颜色*/
        border-left-color: #1E92FB;    /*左边框颜色*/
    }
</style>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  

  

  

  

  

  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="interview," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="keywords" content="interview">
<meta property="og:type" content="article">
<meta property="og:title" content="interview question">
<meta property="og:url" content="https://volc1605.github.io/2018/07/22/interview-question/index.html">
<meta property="og:site_name" content="Life is the process of avoiding problems, finding problems, and fixing them quickly in case they reappear, and settling down to experience continuous improvement.">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://volcfamily.cn/images/interview-question/a.jpeg">
<meta property="og:image" content="https://volcfamily.cn/images/interview-question/b.jpeg">
<meta property="og:image" content="https://volcfamily.cn/images/interview-question/c.png">
<meta property="og:image" content="https://volcfamily.cn/images/interview-question/d.jpg">
<meta property="og:image" content="https://volcfamily.cn/images/interview-question/e.png">
<meta property="og:image" content="https://volcfamily.cn/images/interview-question/f.png">
<meta property="og:image" content="https://volcfamily.cn/images/interview-question/g.png">
<meta property="og:image" content="https://volcfamily.cn/images/interview-question/h.png">
<meta property="og:image" content="https://volcfamily.cn/images/interview-question/i.png">
<meta property="og:image" content="https://volcfamily.cn/images/interview-question/j.png">
<meta property="og:image" content="https://volcfamily.cn/images/interview-question/k.png">
<meta property="og:image" content="https://volcfamily.cn/images/interview-question/l.png">
<meta property="og:image" content="https://volcfamily.cn/images/interview-question/m.png">
<meta property="og:image" content="https://volcfamily.cn/images/interview-question/n.png">
<meta property="og:image" content="https://volcfamily.cn/images/interview-question/o.png">
<meta property="og:image" content="https://volcfamily.cn/images/interview-question/p.png">
<meta property="og:image" content="https://volcfamily.cn/images/interview-question/c1.png">
<meta property="og:image" content="https://volcfamily.cn/images/interview-question/c2.png">
<meta property="og:image" content="https://volcfamily.cn/images/interview-question/c4.png">
<meta property="og:image" content="https://volcfamily.cn/images/interview-question/c6.png">
<meta property="og:image" content="https://volcfamily.cn/images/interview-question/c7.png">
<meta property="og:image" content="https://volcfamily.cn/images/interview-question/c8.png">
<meta property="og:image" content="https://volcfamily.cn/images/interview-question/c9.png">
<meta property="og:image" content="https://volcfamily.cn/images/interview-question/c10.png">
<meta property="og:image" content="https://volcfamily.cn/images/interview-question/c11.png">
<meta property="og:image" content="https://volcfamily.cn/images/interview-question/c12.png">
<meta property="og:image" content="https://volcfamily.cn/images/interview-question/c13.png">
<meta property="og:image" content="https://volcfamily.cn/images/interview-question/c14.png">
<meta property="og:image" content="https://volcfamily.cn/images/interview-question/q.jpg">
<meta property="og:image" content="https://volcfamily.cn/images/interview-question/r.png">
<meta property="og:image" content="https://volcfamily.cn/images/interview-question/s.png">
<meta property="og:image" content="https://volcfamily.cn/images/interview-question/t.png">
<meta property="og:image" content="https://volcfamily.cn/images/interview-question/u.png">
<meta property="og:image" content="https://volcfamily.cn/images/interview-question/v.png">
<meta property="og:image" content="https://volcfamily.cn/images/interview-question/w.png">
<meta property="og:image" content="https://volcfamily.cn/images/interview-question/x.png">
<meta property="og:image" content="https://volcfamily.cn/images/interview-question/y.png">
<meta property="og:image" content="https://volcfamily.cn/images/interview-question/z.png">
<meta property="og:image" content="https://volcfamily.cn/images/interview-question/a1.png">
<meta property="og:image" content="https://volcfamily.cn/images/interview-question/a2.png">
<meta property="og:image" content="https://volcfamily.cn/images/interview-question/a3.png">
<meta property="og:image" content="https://volcfamily.cn/images/interview-question/a4.png">
<meta property="og:image" content="https://volcfamily.cn/images/interview-question/a5.png">
<meta property="og:image" content="https://volcfamily.cn/images/interview-question/a6.png">
<meta property="og:image" content="https://volcfamily.cn/images/interview-question/a7.png">
<meta property="og:image" content="https://volcfamily.cn/images/interview-question/a8.png">
<meta property="og:image" content="https://volcfamily.cn/images/interview-question/a9.png">
<meta property="og:image" content="https://volcfamily.cn/images/interview-question/b1.png">
<meta property="og:image" content="https://volcfamily.cn/images/interview-question/b2.png">
<meta property="og:image" content="https://volcfamily.cn/images/interview-question/b3.png">
<meta property="og:updated_time" content="2018-08-02T09:31:25.385Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="interview question">
<meta name="twitter:image" content="https://volcfamily.cn/images/interview-question/a.jpeg">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: undefined,
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="https://volc1605.github.io/2018/07/22/interview-question/"/>

  <title> interview question | Life is the process of avoiding problems, finding problems, and fixing them quickly in case they reappear, and settling down to experience continuous improvement. </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', '85094232-1', 'auto');
  ga('send', 'pageview');
</script>


  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?87980c86b4555bd9921e799ec5e26fb5";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>








  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Life is the process of avoiding problems, finding problems, and fixing them quickly in case they reappear, and settling down to experience continuous improvement.</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">volc</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-message">
          <a href="/message" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-external-link"></i> <br />
            
            留言
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup">
 <span class="search-icon fa fa-search"></span>
 <input type="text" id="local-search-input">
 <div id="local-search-result"></div>
 <span class="popup-btn-close">close</span>
</div>


    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                interview question
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2018-07-22T17:18:21+08:00" content="2018-07-22">
              2018-07-22
            </time>
          </span>
              <span>
                  |
                <span>更新于</span>
                <time>
                  2018-07-22
                  17:18:21
                </time>
          </span>
          
            <span class="post-category" >
              |
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/interview/" itemprop="url" rel="index">
                    <span itemprop="name">interview</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
            
               <span id="/2018/07/22/interview-question/" class="leancloud_visitors" data-flag-title="interview question">
                 |
                 <span class="post-meta-item-icon">
                   <i class="fa fa-eye"></i>
                 </span>
                 <span class="post-meta-item-text">阅读量 </span>
                 <span class="leancloud-visitors-count"></span>
                
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p><div align="center"><br><img style="text-align: center" src="https://volcfamily.cn/images/interview-question/a.jpeg" alt="mianshi"><br><img style="text-align: center" src="https://volcfamily.cn/images/interview-question/b.jpeg" alt="mianshi"><br></div><br><a id="more"></a></p>
<h3 id="接口和抽象类的区别"><a href="#接口和抽象类的区别" class="headerlink" title="接口和抽象类的区别"></a>接口和抽象类的区别</h3><p>接口是特殊的抽象类<br>区别：<br>1 抽象类可以提供成员方法的实现细节，而接口中只能存在public abstract 方法；<br>2 抽象类中的成员变量可以是各种类型的，而接口中的成员变量只能是public static final类型的；<br>3 接口中不能含有静态代码块以及静态方法，而抽象类可以有静态代码块和静态方法；<br>4 一个类只能继承一个抽象类，而一个类只能实现一个或多个接口。</p>
<p>接口的作用：</p>
<ul>
<li>重要性<br>在Java语言中， abstract class 和interface 是支持抽象类定义的两种机制。正是由于这两种机制的存在，才赋予了Java强大的 面向对象能力。</li>
<li>简单、规范性<br>如果一个项目比较庞大，那么就需要一个能理清所有业务的架构师来定义一些主要的接口，这些接口不仅告诉开发人员你需要实现那些业务，而且也将命名规范限制住了（防止一些开发人员随便命名导致别的程序员无法看明白）。</li>
<li>维护、拓展性<br>比如你要做一个画板程序，其中里面有一个面板类，主要负责绘画功能，然后你就这样定义了这个类。可是在不久将来，你突然发现这个类满足不了你了，然后你又要重新设计这个类，更糟糕是你可能要放弃这个类，那么其他地方可能有引用他，这样修改起来很麻烦。<br>如果你一开始定义一个接口，把绘制功能放在接口里，然后定义类时实现这个接口，然后你只要用这个接口去引用实现它的类就行了，以后要换的话只不过是引用另一个类而已，这样就达到维护、拓展的方便性。</li>
<li>安全、严密性<br>接口是实现软件松耦合的重要手段，它描叙了系统对外的所有服务，而不涉及任何具体的实现细节。这样就比较安全、严密一些（一般软件服务商考虑的比较多）。</li>
</ul>
<p>抽象类的作用：</p>
<ul>
<li>为子类提供一个公共的类型；</li>
<li>封装子类中重复内容（成员变量和方法）；</li>
<li>定义有抽象方法，子类虽然有不同的实现，但该方法的定义是一致的。</li>
</ul>
<h3 id="JVM加载class文件的原理机制"><a href="#JVM加载class文件的原理机制" class="headerlink" title="JVM加载class文件的原理机制"></a>JVM加载class文件的原理机制</h3><p>JVM中类的装载是由ClassLoader和它的子类来实现的,它负责在运行时查找和装入类文件的类。<br>类装载器把一个类装入Java虚拟机中，要经过三个步骤来完成：装载、链接和初始化，其中链接又可以分成校验、准备、解析装载：查找和导入类或接口的二进制数据(类的编写格式)； 链接：执行下面的校验、准备和解析步骤，其中解析步骤是可以选择的； 校验：检查导入类或接口的二进制数据的正确性； 准备：给类的静态变量分配并初始化存储空间； 解析：将符号引用转成直接引用；初始化：激活类的静态变量,初始化Java代码和静态Java代码块</p>
<h3 id="jvm内存结构"><a href="#jvm内存结构" class="headerlink" title="jvm内存结构"></a>jvm内存结构</h3><p><img src="https://volcfamily.cn/images/interview-question/c.png" alt="c"></p>
<p>java内存主要分为6部分，分别是程序计数器，虚拟机栈，本地方法栈，堆，方法区和直接内存</p>
<p>1、程序计数器<br>线程私有，即每个线程都会有一个，线程之间互不影响，独立存储。<br>代表着当前线程所执行字节码的行号指示器。</p>
<p>2、虚拟机栈<br>线程私有，它的生命周期和线程相同。<br>描述的是java方法执行的内存模型：每个方法在执行的同时多会创建一个栈帧用于存储局部变量表、操作数栈、动态链表、方法出口等信息。<br>每一个方法从调用直至完成的过程，就对应着一个栈帧在虚拟机中入栈到出栈的过程。<br>局部变量表存放了编译期可知的各种基本数据类型和对象引用，所需内存空间在编译期确定</p>
<p>3、本地方法栈<br>同虚拟机栈，只不过本地方法栈位虚拟机使用到的native方法服务。<br>Sun HotSpot虚拟机把本地方法栈和虚拟机栈合二为一。</p>
<p>4、java堆<br>线程共享<br>主要用于分配对象实例和数组。</p>
<p>5、方法区<br>线程共享<br>用于存储已被虚拟机加载的类8息、常量、静态变量、即使编译后的代码等数据。</p>
<p>6、直接内存<br>直接内存并不是虚拟机运行时数据区的一部分。</p>
<p>总结：<br>大多数 JVM 将内存区域划分为 Method Area（Non-Heap）（方法区） ,Heap（堆） , Program Counter Register（程序计数器） ,   VM Stack（虚拟机栈，也有翻译成JAVA 方法栈的）,Native Method Stack  （ 本地方法栈 ），其中Method Area 和 Heap 是线程共享的  ，VM Stack，Native Method Stack  和Program Counter Register  是非线程共享的。为什么分为 线程共享和非线程共享的呢?请继续往下看。<br>首先我们熟悉一下一个一般性的 Java 程序的工作过程。一个 Java 源程序文件，会被编译为字节码文件（以 class 为扩展名），每个java程序都需要运行在自己的JVM上，然后告知 JVM 程序的运行入口，再被 JVM 通过字节码解释器加载运行。那么程序开始运行后，都是如何涉及到各内存区域的呢？<br>概括地说来，JVM初始运行的时候都会分配好 Method Area（方法区） 和Heap（堆） ，而JVM 每遇到一个线程，就为其分配一个 Program Counter Register（程序计数器） ,   VM Stack（虚拟机栈）和Native Method Stack  （本地方法栈）， 当线程终止时，三者（虚拟机栈，本地方法栈和程序计数器）所占用的内存空间也会被释放掉。这也是为什么我把内存区域分为线程共享和非线程共享的原因，非线程共享的那三个区域的生命周期与所属线程相同，而线程共享的区域与JAVA程序运行的生命周期相同，所以这也是系统垃圾回收的场所只发生在线程共享的区域（实际上对大部分虚拟机来说知发生在Heap上）的原因。</p>
<p>方法区用于存储JVM加载的类信息、常量、静态变量、即使编译器编译后的代码等数据，是线程隔离的(错误)<br>解析：方法区    和堆都是线程共享的。</p>
<h3 id="UseCompressedOops有什么作用为什么要使用"><a href="#UseCompressedOops有什么作用为什么要使用" class="headerlink" title="UseCompressedOops有什么作用为什么要使用"></a>UseCompressedOops有什么作用为什么要使用</h3><p>当你将你的应用从 32 位的 JVM 迁移到 64 位的 JVM 时，由于对象的指针从 32 位增加到了 64 位，因此堆内存会突然增加，差不多要翻倍。这也会对 CPU 缓存（容量比内存小很多）的数据产生不利的影响。因为，迁移到 64 位的 JVM 主要动机在于可以指定最大堆大小，通过压缩 OOP 可以节省一定的内存。通过 -XX:+UseCompressedOops 选项，JVM 会使用 32 位的 OOP，而不是 64 位的 OOP。</p>
<h3 id="怎样通过Java程序来判断JVM是32位还是64位"><a href="#怎样通过Java程序来判断JVM是32位还是64位" class="headerlink" title="怎样通过Java程序来判断JVM是32位还是64位"></a>怎样通过Java程序来判断JVM是32位还是64位</h3><p>你可以检查某些系统属性如 sun.arch.data.model 或 os.arch 来获取该信息。</p>
<h3 id="instanceofjava关键字"><a href="#instanceofjava关键字" class="headerlink" title="instanceofjava关键字"></a>instanceofjava关键字</h3><p>你在面月薪6000-8000的Java研发职位。面试官也知道JVM这么个大体概念，但知道的也不多。JVM这个概念本身就是“底层”。JVM有一条名为 instanceof 的指令，而Java源码编译到Class文件时会把Java语言中的 instanceof 运算符映射到JVM的 instanceof 指令上。</p>
<ol>
<li>instanceof 是javac能识别的一个关键字，对应到Token.INSTANCEOF的token类型。做词法分析的时候扫描到”instanceof”关键字就映射到了一个Token.INSTANCEOF token。jdk7u/jdk7u/langtools: 5c9759e0d341 src/share/classes/com/sun/tools/javac/parser/Token.java</li>
<li>该编译器的抽象语法树节点有一个JCTree.JCInstanceOf类用于表示instanceof运算。做语法分析的时候解析到instanceof运算符就会生成这个JCTree.JCInstanceof类型的节点。jdk7u/jdk7u/langtools: 5c9759e0d341 src/share/classes/com/sun/tools/javac/parser/JavacParser.java term2Rest()</li>
<li>中途还得根据Java语言规范对instanceof运算符的编译时检查的规定把有问题的情况找出来。</li>
<li>到最后生成字节码的时候为JCTree.JCInstanceof节点生成instanceof字节码指令。jdk7u/jdk7u/langtools: 5c9759e0d341 src/share/classes/com/sun/tools/javac/jvm/Gen.java visitTypeTest()</li>
</ol>
<h3 id="堆和栈的区别"><a href="#堆和栈的区别" class="headerlink" title="堆和栈的区别"></a>堆和栈的区别</h3><ol>
<li>栈是存储局部变量，基本数据和方法调用。<br>堆内存是存储Java中的对象。运行时期产生的而对象和数据会在堆中分配空间。是gc管理的最大的区域</li>
<li>如果栈内存没有可用的空间存储方法调用和局部变量，JVM会抛出java.lang.StackOverFlowError。<br>而如果是堆内存没有可用的空间存储生成的对象，JVM会抛出java.lang.OutOfMemoryError。</li>
<li>Java的堆是一个运行时数据区，堆是由垃圾回收来负责的，堆的优势是可以动态地分配内存大小，生存期也不必事先告诉编译器，因为它是在运行时动态分配内存的。Java的垃圾收集器会自动收走这些不再使用的数据。但缺点是，由于要在运行时动态分配内存，存取速度较慢。</li>
<li>栈的优势是，存取速度比堆要快，仅次于寄存器，栈数据可以共享。但缺点是，存在栈中的数据大小与生存期必须是确定的，缺乏灵活性。栈中主要存放一些基本类型的变量（,int, short, long, byte, float, double, boolean, char）和对象句柄。例如编译器先处理int a = 3；首先它会在栈中创建一个变量为a的引用，然后查找栈中是否有3这个值，如果没找到，就将3存放进来，然后将a指向3。</li>
<li>栈中的数据共享的区别，和两个对象引用同时执行同一个堆中对象是不同的。通过一个对象的引用改变对象的数据，那么另一个对象的引用所指向的堆中的对象数据也会改变。而在栈中int a = 1;int b = 1; a改变不会影响吧的值。</li>
</ol>
<h3 id="Class-forName的作用"><a href="#Class-forName的作用" class="headerlink" title="Class.forName的作用"></a>Class.forName的作用</h3><p>调用该访问返回一个类名为指定字符串的类的对象。</p>
<h3 id="JSP4种域对象的查找方式"><a href="#JSP4种域对象的查找方式" class="headerlink" title="JSP4种域对象的查找方式"></a>JSP4种域对象的查找方式</h3><p>${pageScope .username} 作用范围: 当前页面<br>${requestScope.username} 作用范围:当前请求<br>${sessionScope.username} 作用范围:当前会话<br>${applicationScope.username} 作用范围:当前应用</p>
<h3 id="JSP的九大内置对象"><a href="#JSP的九大内置对象" class="headerlink" title="JSP的九大内置对象"></a>JSP的九大内置对象</h3><table>
<thead>
<tr>
<th style="text-align:left">名称</th>
<th style="text-align:left">类</th>
<th style="text-align:left">作用域</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">request请求对象</td>
<td style="text-align:left">java.servlet.ServletRequest(接口)HttpServletRequest(实现类)</td>
<td style="text-align:left">Request</td>
</tr>
<tr>
<td style="text-align:left">response响应对象</td>
<td style="text-align:left">javax.servlet.SrvletResponse(接口)HttpServletResponse(实现类)</td>
<td style="text-align:left">Page</td>
</tr>
<tr>
<td style="text-align:left">pageContext页面上下文对象</td>
<td style="text-align:left">javax.servlet.jsp.PageContext(实现类)</td>
<td style="text-align:left">Page</td>
</tr>
<tr>
<td style="text-align:left">session会话对象</td>
<td style="text-align:left">javax.servlet.http.HttpSession(接口)实现类(tomcat)</td>
<td style="text-align:left">Session</td>
</tr>
<tr>
<td style="text-align:left">application应用程序对象</td>
<td style="text-align:left">javax.servlet.ServletContext(接口)实现类(Tomcat中的实现类是ApplicationContext)</td>
<td style="text-align:left">Application</td>
</tr>
<tr>
<td style="text-align:left">out输出对象</td>
<td style="text-align:left">javax.servlet.jsp.JspWriter</td>
<td style="text-align:left">Page</td>
</tr>
<tr>
<td style="text-align:left">config配置对象</td>
<td style="text-align:left">javax.servlet.ServletConfig(在Tomcat中的实现类是StandardWrapper)</td>
<td style="text-align:left">Page</td>
</tr>
<tr>
<td style="text-align:left">page页面对象</td>
<td style="text-align:left">javax.lang.Object</td>
<td style="text-align:left">Page</td>
</tr>
<tr>
<td style="text-align:left">exception例外对象</td>
<td style="text-align:left">javax.lang.Throwable</td>
<td style="text-align:left">Page</td>
</tr>
</tbody>
</table>
<p>总结<br>ServletConfig在Tomcat中的实现类是StandardWrapper<br>ServletContext在Tomcat中的实现类是ApplicationContext<br>Servlet能获取到的ServletConfig和ServletContext是StandardWrapper和ApplicationContext的Facade类<br>Facade是一种设计模式，作用是只开放部分的内容给使用者，详细请搜索Facade设计模式</p>
<h3 id="什么是js"><a href="#什么是js" class="headerlink" title="什么是js"></a>什么是js</h3><p>JavaScript 是属于网络的脚本语言！<br>JavaScript 被数百万计的网页用来改进设计、验证表单、检测浏览器、创建cookies，以及更多的应用。<br>JavaScript 是因特网上最流行的脚本语言。<br>JavaScript 很容易使用！你一定会喜欢它的！</p>
<h3 id="js的4种对象"><a href="#js的4种对象" class="headerlink" title="js的4种对象"></a>js的4种对象</h3><p>js 中的内部对象包括Array、Boolean、Date、Function、Global、Math、Number、Object、RegExp、 String以及各种错误类对象，包括Error、EvalError、RangeError、ReferenceError、SyntaxError和 TypeError。<br>其中Global和Math这两个对象又被称为“内置对象”，这两个对象在脚本程序初始化时被创建，不必实例化这两个对象。</p>
<h4 id="内置对象"><a href="#内置对象" class="headerlink" title="内置对象"></a>内置对象</h4><p>Number<br>JavaScript Number 对象是 一个数值包装器。您可以将其与 new 关键词结合使用，并将其设置为一个稍后要在 JavaScript 代码中使用的变量：<br>var myNumber = new Number(numeric value);<br>Boolean<br>Boolean 在尝试 用 JavaScript 创建任何逻辑时是必要的。Boolean 是一个 代表 true 或 false 值的对象。 Boolean 对象有多个值，这些值 相当于 false 值（0、 -0、null 或 “” [一个空字串]），未定义的 (NaN)，当然还有 false。所有其他布尔 值相当于 true 值。该对象可以 通过 new 关键词进行实例化，但通常是 一个被设为 true 或 false 值的变量：<br>var myBoolean = true;<br>String<br>JavaScript String 对象是 文本值的包装器。除了存储文本， String 对象包含一个属性和各种 方法来操作或收集有关文本的信息。与 Boolean 对象类似， String 对象不需要进行实例化 便能够使用。例如，您可以将一个变量设置为一个字符串， 然后 String 对象的所有属性或 方法都可用于该变量：<br>var myString = “My string”;<br>Date<br>JavaScript Date 对象提供了一种方式 来处理日期和时间。您可以用许多不同的 方式对其进行实例化，具体取决于想要的结果。例如，您可以在没有参数的情况下对其进行实例化：<br>var myDate = new Date();<br>//或传递 milliseconds 作为一个参数：<br>var myDate = new Date(milliseconds);<br>//您可以将一个日期字符串作为一个参数传递：<br>var myDate = new Date(dateString);<br>//或者您可以传递多个参数来创建一个完整的日期：<br>var myDate = new Date(year, month, day, hours, minutes, seconds, milliseconds);<br>Array<br>JavaScript Array 对象是一个存储变量的变量：您可以用它一次在一个变量中存储多个值， 它有许多方法允许您操作或收集 有关它所存储的值的信息。尽管 Array 对象不差别对待值类型，但是 在一个单一数组中使用同类值是很好的做法。因此， 在同一数组中使用数字和字符串不是好的做法。所有 可用于 Array 对象的属性 都是只读的，这意味着它们的值不能从外部予以更改。<br>可用于 Array 对象的惟一属性 是 length。该属性返回 一个数组中的元素数目，通常在使用 循环迭代数组中的值时用到：<br>var myArray = new Array(1, 2, 3);<br>for(var i=0; i&lt;myArray.length; i++) {<br>   document.write(myArray[i]);<br>}<br>Math<br>JavaScript Math 对象用于执行 数学函数。它不能加以实例化：您只能依据 Math 对象的原样使用它，在没有任何实例的情况下从该对象调用属性和 方法：<br>var pi = Math.PI;</p>
<h4 id="自定义对象"><a href="#自定义对象" class="headerlink" title="自定义对象"></a>自定义对象</h4><p>Person，Card…</p>
<p>function函数的类名对象<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params">id,name,sal</span>)</span>&#123;</span><br><span class="line">	<span class="comment">//this指向s引用</span></span><br><span class="line">	<span class="keyword">this</span>.id = id;</span><br><span class="line">	<span class="keyword">this</span>.name = name;</span><br><span class="line">	<span class="keyword">this</span>.sal = sal;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> s = <span class="keyword">new</span> Student(<span class="number">1</span>,<span class="string">"波波"</span>,<span class="number">7000</span>);</span><br><span class="line"><span class="built_in">document</span>.write(<span class="string">"编号:"</span> + s.id + <span class="string">"&lt;br/&gt;"</span>);</span><br><span class="line"><span class="built_in">document</span>.write(<span class="string">"姓名:"</span> + s.name + <span class="string">"&lt;br/&gt;"</span>);</span><br><span class="line"><span class="built_in">document</span>.write(<span class="string">"薪水:"</span> + s.sal + <span class="string">"&lt;br/&gt;"</span>);</span><br></pre></td></tr></table></figure></p>
<h4 id="浏览器对象"><a href="#浏览器对象" class="headerlink" title="浏览器对象"></a>浏览器对象</h4><p>window，document，status，location，history…</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myrefresh</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">			<span class="built_in">window</span>.history.go(<span class="number">0</span>);</span><br><span class="line">		&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ActiveX对象"><a href="#ActiveX对象" class="headerlink" title="ActiveX对象"></a>ActiveX对象</h4><p>ActiveXObject(“Microsoft.XMLHTTP”)…</p>
<h3 id="初始化js函数方式"><a href="#初始化js函数方式" class="headerlink" title="初始化js函数方式"></a>初始化js函数方式</h3><p>1 浏览器对象调用</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		alert(<span class="number">0</span>);</span><br><span class="line">		<span class="comment">//var inputs = document.getElementsByTagName("input");</span></span><br><span class="line">		<span class="comment">//alert(inputs);</span></span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<p>2 jquery对象调用</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	alert(<span class="number">0</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>3 写到标签中</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;body onload=<span class="string">"myfunction()"</span>&gt;</span><br><span class="line">&lt;html&gt; <span class="xml"><span class="tag">&lt;<span class="name">body</span> <span class="attr">onload</span>=<span class="string">"func1();func2();func3();"</span>&gt;</span> <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span> &lt;<span class="regexp">/html&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;script type="text/</span>javascript<span class="string">"&gt;</span></span><br><span class="line"><span class="string">Var myfunction = function ()&#123;</span></span><br><span class="line"><span class="string">    /*用window.onload调用myfun()*/</span></span><br><span class="line"><span class="string">alert("</span><span class="keyword">this</span> <span class="built_in">window</span>.onload<span class="string">");</span></span><br><span class="line"><span class="string">&#125; 　　</span></span><br><span class="line"><span class="string">&lt;/script&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="javascript中获取标签元素的方式有哪些"><a href="#javascript中获取标签元素的方式有哪些" class="headerlink" title="javascript中获取标签元素的方式有哪些"></a>javascript中获取标签元素的方式有哪些</h3><h4 id="getElementById"><a href="#getElementById" class="headerlink" title="getElementById"></a>getElementById</h4><p>document.getElementById(‘demo’) //demo是元素对应的ID</p>
<h4 id="getElementsByTagName"><a href="#getElementsByTagName" class="headerlink" title="getElementsByTagName"></a>getElementsByTagName</h4><p>document.getElementsByTagname(‘li’)  //li是标签的名字<br>需要注意的是，该方法除了能被document对象调用之外，还可以被普通的元素调用。示例如下：<br>var demo = document.getElementById(‘demo’);<br>var lis = demo.getElementsByTagname(‘li’);</p>
<h4 id="getElementsByClassName"><a href="#getElementsByClassName" class="headerlink" title="getElementsByClassName"></a>getElementsByClassName</h4><p>除了通过指定标签获取元素外，DOM还提供了getElementsByClassName方法来获取指定class名的元素。不过由于该方法比较新，较老的浏览器还不支持，比如IE6。不过我们可以通过hack方式来弥补老浏览器缺陷。该方法调用的方式如下所示：<br>document.getElementsByClassName(‘demo’)    //demo为元素指定的class名<br>和getElementsByTagname一样， 该方法除了能被document对象调用之外，还可以被普通的元素调用。<br>对于比较老的浏览器，比如IE6、7我们可以通过下面的hack方式来实现：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getElementsByClassName</span>(<span class="params">node,classname</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(node.getElementsByClassName) &#123;</span><br><span class="line">            <span class="keyword">return</span> node.getElementsByClassName(classname);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">var</span> results = [];</span><br><span class="line">            <span class="keyword">var</span> elems = node.getElementsByTagName(<span class="string">"*"</span>);</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; elems.length; i++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(elems[i].className.indexOf(classname) != <span class="number">-1</span>)&#123;</span><br><span class="line">                    results[results.length] = elems[i];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> results;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h3 id="js中操作标签的class属性的关键字是什么"><a href="#js中操作标签的class属性的关键字是什么" class="headerlink" title="js中操作标签的class属性的关键字是什么"></a>js中操作标签的class属性的关键字是什么</h3><p>JavaScript中使用e.getAttribute(‘属性名’)来取得属性的值，并且用e.setAttribute(‘属性名’, ‘值’)来设置属性值。<br>由于class属于JavaScript保留值，因此当我们要操作元素的class属性值时，直接使用e.getAttribute(‘class’)和e.setAttribute(‘class’, ‘value’)可能会遭遇浏览器兼容性问题<br>以下列表说明了上文提及的三种做法的浏览器兼容性测试：<br>•    e.className 能在IE、Mozilla(Firefox)、Opera和Safari正确运行<br>•    e.getAttribute(‘class’)和e.setAttribute(‘class’, ‘value’) 能在Mozilla(Firefox)和Opera中正确运行，在IE和Safari中则不能使用。<br>•    e.getAttribute(‘className’) 在IE和Opera中正确运行，在Mozilla(Firefox)和Safari中则不能使用。</p>
<h3 id="写出JavaScript后退到前一个页面的操作，与在浏览器上点击后退按钮相同"><a href="#写出JavaScript后退到前一个页面的操作，与在浏览器上点击后退按钮相同" class="headerlink" title="写出JavaScript后退到前一个页面的操作，与在浏览器上点击后退按钮相同"></a>写出JavaScript后退到前一个页面的操作，与在浏览器上点击后退按钮相同</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>第一个页面<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">		这是第一个页面</span><br><span class="line">	<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"history2.html"</span>&gt;</span>下一个页面<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"return"</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"前进"</span> <span class="attr">onclick</span>=<span class="string">"javascript:history.forward()"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>第二个页面<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">		这是第二个页面</span><br><span class="line">	<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"return"</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"返回"</span> <span class="attr">onclick</span>=<span class="string">"javascript:history.back()"</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"return"</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"返回"</span> <span class="attr">onclick</span>=<span class="string">"javascript:history.go(-1)"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="ajax"><a href="#ajax" class="headerlink" title="ajax"></a>ajax</h3><p>AJAX 是 Asynchronous JavaScript And XML 的首字母缩写。<br>AJAX 并不是一种新的编程语言，而仅仅是一种新的技术，它可以创建更好、更快且交互性更强的 web 应用程序。<br>AJAX 使用 JavaScript 在 web 浏览器与 web 服务器之间来发送和接收数据。<br>通过在幕后与 web 服务器交换数据，而不是每当用户作出改变时重载整个 web 页面，AJAX 技术可以使网页更迅速地响应。</p>
<h3 id="servlet返回字符串到页面获取字符串"><a href="#servlet返回字符串到页面获取字符串" class="headerlink" title="servlet返回字符串到页面获取字符串"></a>servlet返回字符串到页面获取字符串</h3><p>在一个servlet中：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">PrintWriter pw = response.getWriter();</span><br><span class="line">pw.write(tip);<span class="comment">//写出到浏览器</span></span><br><span class="line">pw.flush();</span><br><span class="line">pw.close();</span><br></pre></td></tr></table></figure>
<h3 id="ajax发送post请求"><a href="#ajax发送post请求" class="headerlink" title="ajax发送post请求"></a>ajax发送post请求</h3><p>现有请求地址/getData，请求参数为id，参数值为1，请用jQuery通过Ajax发送POST请求，获取json数据，打印到控制台<br>action类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> org.apache.struts2.ServletActionContext;</span><br><span class="line"><span class="keyword">import</span> com.opensymphony.xwork2.ActionSupport;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GetDataAction</span> <span class="keyword">extends</span> <span class="title">ActionSupport</span></span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> User user;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getData</span><span class="params">()</span></span>&#123;<span class="comment">//不能传参</span></span><br><span class="line">		HttpServletRequest request = ServletActionContext.getRequest();</span><br><span class="line">		System.out.println(<span class="string">"进入action"</span>);</span><br><span class="line">		String id = request.getParameter(<span class="string">"id"</span>);</span><br><span class="line">		user = <span class="keyword">new</span> User();</span><br><span class="line">		user.setId(id);</span><br><span class="line">		user.setUserName(<span class="string">"张三"</span>);</span><br><span class="line">		System.out.println(user);</span><br><span class="line">		<span class="keyword">return</span> SUCCESS;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> User <span class="title">getUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> user;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>jsp页面</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">language</span>=<span class="string">"java"</span> <span class="attr">import</span>=<span class="string">"java.util.*"</span> <span class="attr">pageEncoding</span>=<span class="string">"utf-8"</span>%&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">taglib</span> <span class="attr">uri</span>=<span class="string">"http://java.sun.com/jsp/jstl/core"</span> <span class="attr">prefix</span>=<span class="string">"c"</span> %&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>获取json对象<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"../js/jquery-1.8.2.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"获取数据"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">	$(<span class="string">":button"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="undefined">		alert(0);</span></span><br><span class="line"><span class="javascript">		$.post(</span></span><br><span class="line"><span class="javascript">			<span class="string">"$&#123;pageContext.request.contextPath&#125;/getData_getData.action?id=1"</span>,</span></span><br><span class="line"><span class="javascript">			<span class="function"><span class="keyword">function</span>(<span class="params">data,status,ajax</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">					<span class="comment">//ajax是json文本&#123;"data":"",...&#125;字符串,data是json文本的对象</span></span></span><br><span class="line"><span class="javascript">					<span class="comment">//在action中javabean要提供get方法ajax才能获得json格式的javabean(user)</span></span></span><br><span class="line"><span class="javascript">				alert(ajax.responseText);<span class="comment">//打印出&#123;"data":"success","user":&#123;"id":null,"userName":"张三"&#125;&#125;</span></span></span><br><span class="line"><span class="javascript">				<span class="keyword">var</span> user = data.user;</span></span><br><span class="line"><span class="undefined">				alert(user);</span></span><br><span class="line"><span class="undefined">				alert(user.id);</span></span><br><span class="line"><span class="undefined">			&#125;</span></span><br><span class="line"><span class="undefined">		);</span></span><br><span class="line"><span class="undefined">	&#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="XML与json"><a href="#XML与json" class="headerlink" title="XML与json"></a>XML与json</h3><p>xml扩展标记语言 (Extensible Markup Language, XML) ，用于标记电子文件使其具有结构性的标记语言，可以用来标记数据、定义数据类型，是一种允许用户对自己的标记语言进行定义的源语言。 XML使用DTD(document type definition)文档类型定义来组织数据;格式统一，跨平台和语言，早已成为业界公认的标准。<br>XML是标准通用标记语言 (SGML) 的子集，非常适合 Web 传输。XML 提供统一的方法来描述和交换独立于应用程序或供应商的结构化数据。++++++++++++++++++++++++++++++++++</p>
<p>JSON(JavaScript Object Notation)一种轻量级的数据交换格式，具有良好的可读和便于快速编写的特性。可在不同平台之间进行数据交换。JSON采用兼容性很高的、完全独立于语言文本格式，同时也具备类似于C语言的习惯(包括C, C++, C#, Java, JavaScript, Perl, Python等)体系的行为。这些特性使JSON成为理想的数据交换语言。<br>JSON基于JavaScript Programming Language , Standard ECMA-262 3rd Edition - December 1999 的一个子集。</p>
<p>XML的优点<br>　　A.格式统一，符合标准；<br>B.容易与其他系统进行远程交互，数据共享比较方便。<br>XML的缺点<br>　　A.XML文件庞大，文件格式复杂，传输占带宽；<br>　　B.服务器端和客户端都需要花费大量代码来解析XML，导致服务器端和客户端代码变得异常复杂且不易维护；<br>　　C.客户端不同浏览器之间解析XML的方式不一致，需要重复编写很多代码；<br>　　D.服务器端和客户端解析XML花费较多的资源和时间。</p>
<p>JSON的优点：<br>　　A.数据格式比较简单，易于读写，格式都是压缩的，占用带宽小；<br>　　B.易于解析，客户端JavaScript可以简单的通过eval()进行JSON数据的读取；<br>　　C.支持多种语言，包括ActionScript, C, C#, ColdFusion, Java, JavaScript, Perl, PHP, Python, Ruby等服务器端语言，便于服务器端的解析；<br>　　D.在PHP世界，已经有PHP-JSON和JSON-PHP出现了，偏于PHP序列化后的程序直接调用，PHP服务器端的对象、数组等能直接生成JSON格式，便于客户端的访问提取；<br>　　E.因为JSON格式能直接为服务器端代码使用，大大简化了服务器端和客户端的代码开发量，且完成任务不变，并且易于维护。<br>JSON的缺点<br>　　A.没有XML格式这么推广的深入人心和喜用广泛，没有XML那么通用性；<br>　　B.JSON格式目前在Web Service中推广还属于初级阶段。</p>
<h3 id="引入css方式"><a href="#引入css方式" class="headerlink" title="引入css方式"></a>引入css方式</h3><h4 id="行内式"><a href="#行内式" class="headerlink" title="行内式"></a>行内式</h4><p>即在标记的style属性中设定CSS样式，这种方式本质上没有体现出CSS的优势，因此不推荐使用<br>例：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=utf-8"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>Text Demo<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">style</span>=<span class="string">color:white;background-color</span>=<span class="string">blue;</span>&gt;</span></span><br><span class="line">This is a line of Text.</span><br><span class="line"><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h4 id="嵌入式"><a href="#嵌入式" class="headerlink" title="嵌入式"></a>嵌入式</h4><p>嵌入式则将对页面中各种元素的设置集中写在<head>和</head>之间，对于单一的网页，这种方法很方便。但是对于一个包含很多页面的网站，如果每个页面都以内嵌方式设置各自的样式，就失去了CSS带来的巨大优点，因此一个网站通常都是编写一个独立的CSS样式表文件，使用以下两种方式中的一种，引入HTML文档中。<br>例：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=utf-8"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>Text Demo<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">h1&#123;</span></span><br><span class="line"><span class="undefined">color:white;</span></span><br><span class="line"><span class="undefined">background-color:boue;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>This is a line of Text.<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>This is another line of Text.<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h4 id="导入式与链接式"><a href="#导入式与链接式" class="headerlink" title="导入式与链接式"></a>导入式与链接式</h4><p>导入式和链接式的目的都是将一个独立的CSS文件引入HTML文件，二者有相应的区别。<br>事实上，二者最大的区别在于链接式使用HTML的标记引入外部CSS文件，而使用导入式则是使用CSS的规则引入外部CSS文件。因此它们的语法也不同。<br>如果使用链接式，需要使用如下语句引入外部CSS文件。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"mystyle.css"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> /&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>如果使用导入式，则需要使用如下语句。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">@import"mystyle.css";</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="写出左浮动的css代码"><a href="#写出左浮动的css代码" class="headerlink" title="写出左浮动的css代码"></a>写出左浮动的css代码</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns</span>=<span class="string">"http://www.w3.org/1999/xhtml"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=utf-8"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">#picture &#123;</span></span><br><span class="line"><span class="undefined">	float: left;</span></span><br><span class="line"><span class="undefined">	width: 50px;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">h3</span>&gt;</span>一个浮动的图片<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"pic"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">img</span> <span class="attr">id</span>=<span class="string">"picture"</span> <span class="attr">src</span>=<span class="string">"image/斯诺登.jpg"</span> <span class="attr">alt</span>=<span class="string">"斯诺登"</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">p</span>&gt;</span>Iste quidem veteres inter ponetur honeste, qui vel mense brevi</span><br><span class="line">		vel toto est iunior anno. Utor permisso, caudaeque pilos ut equinae</span><br><span class="line">		paulatim vello unum, demo etiam unum, dum cadat elusus ratione ruentis</span><br><span class="line">		acervi, qui redit in fastos et annis miraturque. Ennius et sapines et</span><br><span class="line">		fortis et alter Homerus, ut critici dicunt, leviter curare videtur,</span><br><span class="line">		quo promissa cadant et somnia Pythagorea.Naevius in manibus non est et</span><br><span class="line">		mentibus haeret paene recens? Adeo sanctum est vetus omne poema.</span><br><span class="line">		Ambigitur quotiens, sit prior, Pacuvius docti. Hos ediscit et hos arto</span><br><span class="line">		stipata theatro spectat Roma potens; habet hos numeratque poetas ad</span><br><span class="line">		nostrum tempus Livi scriptoris ab aevo, si nimis antique, si dure.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="在多线程环境下，SimpleDateFormat-是线程安全的吗"><a href="#在多线程环境下，SimpleDateFormat-是线程安全的吗" class="headerlink" title="在多线程环境下，SimpleDateFormat 是线程安全的吗"></a>在多线程环境下，SimpleDateFormat 是线程安全的吗</h3><p>不是，非常不幸，DateFormat 的所有实现，包括 SimpleDateFormat 都不是线程安全的，因此你不应该在多线程序中使用，除非是在对外线程安全的环境中使用，如 将 SimpleDateFormat 限制在 ThreadLocal 中。如果你不这么做，在解析或者格式化日期的时候，可能会获取到一个不正确的结果。因此，从日期、时间处理的所有实践来说，我强力推荐 joda-time 库。</p>
<h3 id="判断JVM是大端还是小端"><a href="#判断JVM是大端还是小端" class="headerlink" title="判断JVM是大端还是小端"></a>判断JVM是大端还是小端</h3><p>字节数组转为整形</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.ByteArrayInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.DataInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 将字节数组（byte[]）转为整形(int)</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException</span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">byte</span>[] byteAr = <span class="keyword">new</span> <span class="keyword">byte</span>[]&#123;<span class="number">0x78</span>,<span class="number">0x56</span>,<span class="number">0x34</span>,<span class="number">0x12</span>&#125;;</span><br><span class="line">		ByteArrayInputStream bais = <span class="keyword">new</span> ByteArrayInputStream(byteAr);<span class="comment">//字节数组输入流</span></span><br><span class="line">		DataInputStream dis = <span class="keyword">new</span> DataInputStream(bais);</span><br><span class="line">		System.out.println(Integer.toHexString(dis.readInt()));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// output: 78563412</span></span><br></pre></td></tr></table></figure>
<p>结论：说明 JVM 是大端</p>
<p>整形转为字节数组</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.ByteArrayOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.DataOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException</span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="comment">/**</span></span><br><span class="line"><span class="comment">		 * 将整形(int)转为字节数组（byte[]）</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		<span class="keyword">int</span> a = <span class="number">0x12345678</span>;</span><br><span class="line">		ByteArrayOutputStream baos = <span class="keyword">new</span> ByteArrayOutputStream();<span class="comment">//字节数组输出流</span></span><br><span class="line">		DataOutputStream dos = <span class="keyword">new</span> DataOutputStream(baos);</span><br><span class="line">		dos.writeInt(a);</span><br><span class="line">		<span class="keyword">byte</span>[] b = baos.toByteArray();</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">3</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">		&#123;</span><br><span class="line">			System.out.print(Integer.toHexString(b[i]));</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Output: 78563412</span></span><br></pre></td></tr></table></figure>
<p>结论：说明 JVM 是大端</p>
<h3 id="final、finalize-和-finally-的不同之处"><a href="#final、finalize-和-finally-的不同之处" class="headerlink" title="final、finalize 和 finally 的不同之处"></a>final、finalize 和 finally 的不同之处</h3><p>final 是一个修饰符，可以修饰变量、方法和类。如果 final 修饰变量，意味着该变量的值在初始化后不能被改变。finalize 方法是在对象被回收之前调用的方法，给对象自己最后一个复活的机会，但是什么时候调用 finalize 没有保证。finally 是一个关键字，与 try 和 catch 一起用于异常的处理。finally 块一定会被执行，无论在 try 块中是否有发生异常。<br>Java 中的编译期常量是什么？使用它又什么风险？<br>公共静态不可变（public static final ）变量也就是我们所说的编译期常量，这里的 public 可选的。实际上这些变量在编译时会被替换掉，因为编译器知道这些变量的值，并且知道这些变量在运行时不能改变。这种方式存在的一个问题是你使用了一个内部的或第三方库中的公有编译时常量，但是这个值后面被其他人改变了，但是你的客户端仍然在使用老的值，甚至你已经部署了一个新的jar。为了避免这种情况，当你在更新依赖 JAR 文件时，确保重新编译你的程序。</p>
<h3 id="反射相关-Reflection"><a href="#反射相关-Reflection" class="headerlink" title="反射相关(Reflection)"></a>反射相关(Reflection)</h3><h4 id="描述一下JVM加载class文件的原理机制"><a href="#描述一下JVM加载class文件的原理机制" class="headerlink" title="描述一下JVM加载class文件的原理机制?"></a>描述一下JVM加载class文件的原理机制?</h4><p>JVM中类的装载是由ClassLoader和它的子类来实现的,它负责在运行时查找和装入类文件的类。<br>类装载器把一个类装入Java虚拟机中，要经过三个步骤来完成：装载、链接和初始化，其中链接又可以分成校验、准备、解析装载：查找和导入类或接口的二进制数据； 链接：执行下面的校验、准备和解析步骤，其中解析步骤是可以选择的； 校验：检查导入类或接口的二进制数据的正确性； 准备：给类的静态变量分配并初始化存储空间； 解析：将符号引用转成直接引用；初始化：激活类的静态变量,初始化Java代码和静态Java代码块</p>
<h3 id="Jquery知识"><a href="#Jquery知识" class="headerlink" title="Jquery知识"></a>Jquery知识</h3><p>jQuery 是一个 JavaScript 函数库。“写更少的代码，做更多的事情”<br>jQuery 库包含以下特性：<br>•    HTML 元素选取<br>•    HTML 元素操作<br>•    CSS 操作<br>•    HTML 事件函数<br>•    JavaScript 特效和动画<br>•    HTML DOM 遍历和修改<br>•    AJAX<br>•    Utilities</p>
<h4 id="获取select下option的值"><a href="#获取select下option的值" class="headerlink" title="获取select下option的值"></a>获取select下option的值</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line">	$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		$(<span class="string">"#selecttest"</span>).change(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// www.jbxue.com</span></span><br><span class="line">			<span class="comment">//alert("hello");</span></span><br><span class="line">			<span class="comment">//alert($("#selecttest").attr("name"));</span></span><br><span class="line">			<span class="comment">//$("a").attr("href","xx.html");</span></span><br><span class="line">			<span class="comment">//window.location.href="xx.html";</span></span><br><span class="line">			<span class="comment">//alert($("#selecttest").val());</span></span><br><span class="line">			<span class="keyword">var</span> c=$(<span class="string">"#selecttest option:selected"</span>).text();</span><br><span class="line">			alert(c);</span><br><span class="line">			$(<span class="string">"#selecttest"</span>).attr(<span class="string">"value"</span>, <span class="string">"2"</span>);</span><br><span class="line">		&#125;);</span><br><span class="line">	&#125;);</span><br></pre></td></tr></table></figure>
<h4 id="this-和-this-关键字在-jQuery-中有何不同"><a href="#this-和-this-关键字在-jQuery-中有何不同" class="headerlink" title="$(this) 和 this 关键字在 jQuery 中有何不同"></a>$(this) 和 this 关键字在 jQuery 中有何不同</h4><p>这对于很多 jQuery 初学者来说是一个棘手的问题，其实是个简单的问题。$(this) 回一个 jQuery 对象，你可以对它调用多个 jQuery 方法，比如用 text() 获取文本，用val() 获取值等等。而 this 代表当前元素，它是 JavaScript 关键词中的一个，表示上下文中的当前 DOM 元素。你不能对它调用 jQuery 方法，直到它被 $() 函数包裹，例如 $(this)。</p>
<h3 id="中的-lt-DOCTYPE-gt-是什么"><a href="#中的-lt-DOCTYPE-gt-是什么" class="headerlink" title="中的&lt;!DOCTYPE&gt;是什么"></a><html>中的&lt;!DOCTYPE&gt;是什么</html></h3><p>&lt;!DOCTYPE&gt; 声明必须是 HTML 文档的第一行，位于 <html> 标签之前。<br>&lt;!DOCTYPE&gt; 声明不是 HTML 标签；它是指示 web 浏览器关于页面使用哪个 HTML 版本进行编写的指令。</html></p>
<h3 id="Java-中的构造器链是什么"><a href="#Java-中的构造器链是什么" class="headerlink" title="Java 中的构造器链是什么"></a>Java 中的构造器链是什么</h3><p>当你从一个构造器中调用另一个构造器，就是Java 中的构造器链。这种情况只在重载了类的构造器的时候才会出现。</p>
<h3 id="IO"><a href="#IO" class="headerlink" title="IO"></a>IO</h3><p><img src="https://volcfamily.cn/images/interview-question/d.jpg" alt="d"></p>
<p>java.lang.Object<br>  java.io.InputStream(字节输入流) （abstract抽象类）<br>    AudioInputStream,(都是继承类)<br>    ByteArrayInputStream,<br>    FileInputStream(文件输入流),<br>    FilterInputStream,<br>    InputStream,<br>    ObjectInputStream,<br>    PipedInputStream,<br>    SequenceInputStream,<br>    StringBufferInputStream<br>java.lang.Object<br>  java.io.OutputStream(字节输出流)<br>    ByteArrayOutputStream,<br>    FileOutputStream(文件输出流)<br>    FilterOutputStream,<br>    ObjectOutputStream,<br>    OutputStream,<br>    PipedOutputStream<br>java.lang.Object<br>  java.io.Reader(字符输入流)<br>    BufferedReader(字符读入缓冲区),<br>    CharArrayReader,<br>    FilterReader,<br>    InputStreamReader(字符流通向字节流桥梁),<br>    PipedReader,<br>    StringReader<br>java.lang.Object<br>  java.io.Writer(字符输出流)<br>BufferedWriter(字符写出缓冲区),<br>CharArrayWriter,<br>    FilterWriter,<br>OutputStreamWriter(字节流通向字符流桥梁), PipedWriter, PrintWriter, StringWriter</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaIOStudy</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//第一步:定位文件所在的位置并新建一个文件用于确定复制的文件的文件名</span></span><br><span class="line">        File infile = <span class="keyword">new</span> File(<span class="string">"/Users/dxy/sync/infile.jpg"</span>);</span><br><span class="line">        File outfile = <span class="keyword">new</span> File(<span class="string">"/Users/dxy/sync/outfile.jpg"</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//第二步:建立文件流管道</span></span><br><span class="line">            FileInputStream fis = <span class="keyword">new</span> FileInputStream(infile);</span><br><span class="line">            FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(outfile);</span><br><span class="line">            <span class="comment">//第三步:操作文件流</span></span><br><span class="line">            <span class="comment">//第一种方式, 一次读一个字节, 会循环该文件的字节数</span></span><br><span class="line">            <span class="keyword">int</span> length1 = fis.available();</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;length1;i++)&#123;</span><br><span class="line">                fos.write(fis.read());</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//第二种方式, 一次读取多个字节</span></span><br><span class="line">            <span class="comment">//建一个byte数值用于临时成块存放字节文件,建议使用2的n次方,这样计算机的处理效率相对会高一些</span></span><br><span class="line">            <span class="keyword">byte</span>[] tmp = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">8192</span>] ;</span><br><span class="line">            <span class="comment">//设置读取的次数</span></span><br><span class="line">            <span class="keyword">int</span> length2 = fis.available()/<span class="number">8192</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; length2; i++) &#123;</span><br><span class="line">                fis.read(tmp);</span><br><span class="line">                fos.write(tmp);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//处理最后一次少读取的部分</span></span><br><span class="line">            <span class="keyword">int</span> size = fis.read(tmp) ;</span><br><span class="line">            <span class="comment">//第一个参数还是byte数组形成的临时缓冲区,第二个参数是从数组的哪里开始向文件写,第三个参数是写多少。</span></span><br><span class="line">            fos.write(tmp, <span class="number">0</span>, size) ;</span><br><span class="line">            <span class="comment">//最后关闭文件流</span></span><br><span class="line">            fis.close();</span><br><span class="line">            fos.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>参考：<a href="http://www.runoob.com/java/java-files-io.html" target="_blank" rel="noopener">http://www.runoob.com/java/java-files-io.html</a></p>
<p><img src="https://volcfamily.cn/images/interview-question/e.png" alt="e"><br><img src="https://volcfamily.cn/images/interview-question/f.png" alt="f"></p>
<p>参考：<a href="http://www.itzhai.com/java-based-notebook-io-flow-classification-and-detailed-description-of-various-classes-with-the-use-of-byte-stream-byte-stream-flow-filter.html#read-more" target="_blank" rel="noopener">http://www.itzhai.com/java-based-notebook-io-flow-classification-and-detailed-description-of-various-classes-with-the-use-of-byte-stream-byte-stream-flow-filter.html#read-more</a></p>
<h3 id="泛型"><a href="#泛型" class="headerlink" title="泛型"></a>泛型</h3><h4 id="泛型的好处"><a href="#泛型的好处" class="headerlink" title="泛型的好处"></a>泛型的好处</h4><p>泛型能保证大型应用程序的类型安全和良好的维护性;<br>泛型好处：限定添加类型和消除强转转换的麻烦！</p>
<p>泛型是提供给javac编译器使用的，<br>利用反射穿透泛型限制 （暴力反射）<br>泛型能绝对保证集合中存入数据都是它限定的类型吗？先看下边的代码 </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo23</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		ArrayList&lt;Integer&gt; collection2 = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();   </span><br><span class="line">		System.out.println(collection1.getClass()==collection2.getClass());   </span><br><span class="line">		collection2.add（“真暴力”）；<span class="comment">//这句会报错</span></span><br><span class="line">		collection2.getClass().getMethod(<span class="string">"add"</span>, Object.class).invoke(collection2, <span class="string">"真暴力"</span>);   </span><br><span class="line">		System.out.println(collection2.get(<span class="number">0</span>)); <span class="comment">//结果却为真暴力  </span></span><br><span class="line">		<span class="comment">//已经限制集合中元素的类型为Integer，可用反射却能将String存入，为什么？ 这是因为泛型是给编译器用的，运行时就没有这些泛型信息了，这叫做“去泛型化”，所以可以通过反射，获取集合字节码加入非指定的类型。</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="泛型中的？通配符的扩展"><a href="#泛型中的？通配符的扩展" class="headerlink" title="泛型中的？通配符的扩展"></a>泛型中的？通配符的扩展</h4><p>泛型中的？通配符的扩展<br>  限定通配符的上边界：<br>正确：Vector&lt;? extends Number&gt; x = new Vector<integer>();//Vector泛型的内容小于Number<br>错误：Vector&lt;? extends Number&gt; x = new Vector<string>();<br>  限定通配符的下边界：<br>正确：Vector&lt;? super Integer&gt; x = new Vector<number>();//Vector泛型的内容要大于Integer<br>错误：Vector&lt;? super Integer&gt; x = new Vector<byte>();</byte></number></string></integer></p>
<h3 id="GC"><a href="#GC" class="headerlink" title="GC"></a>GC</h3><p>Java语言中一个显著的特点就是引入了垃圾回收机制，使c++程序员最头疼的内存管理的问题迎刃而解，它使得Java程序员在编写程序的时候不再需要考虑内存管理。由于有个垃圾回收机制，Java中的对象不再有“作用域”的概念，只有对象的引用才有“作用域”。垃圾回收可以有效的防止内存泄露，有效的使用空闲的内存。</p>
<p>参考：<a href="http://www.cnblogs.com/laoyangHJ/articles/java_gc.html" target="_blank" rel="noopener">http://www.cnblogs.com/laoyangHJ/articles/java_gc.html</a></p>
<p>垃圾收集GC（Garbage Collection）是Java语言的核心技术之一，之前我们曾专门探讨过Java 7新增的垃圾回收器G1的新特性，但在JVM的内部运行机制上看，Java的垃圾回收原理与机制并未改变。垃圾收集的目的在于清除不再使用的对象。GC通过确定对象是否被活动对象引用来确定是否收集该对象。GC首先要判断该对象是否是时候可以收集。两种常用的方法是引用计数和对象引用遍历。<br>总的来说，可分为两大类</p>
<blockquote>
<ul>
<li>引用计数收集器<br>引用计数是垃圾收集器中的早期策略。在这种方法中，堆中每个对象（不是引用）都有一个引用计数。当一个对象被创建时，且将该对象分配给一个变量，该变量计数设置为1。当任何其它变量被赋值为这个对象的引用时，计数加1（a = b,则b引用的对象+1），但当一个对象的某个引用超过了生命周期或者被设置为一个新值时，对象的引用计数减1。任何引用计数为0的对象可以被当作垃圾收集。当一个对象被垃圾收集时，它引用的任何对象计数减1。<br>优点：引用计数收集器可以很快的执行，交织在程序运行中。对程序不被长时间打断的实时环境比较有利。<br>缺点： 无法检测出循环引用。如父对象有一个对子对象的引用，子对象反过来引用父对象。这样，他们的引用计数永远不可能为0.</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>跟踪收集器<br>早期的JVM使用引用计数，现在大多数JVM采用对象引用遍历。对象引用遍历从一组对象开始，沿着整个对象图上的每条链接，递归确定可到达（reachable）的对象。如果某对象不能从这些根对象的一个（至少一个）到达，则将它作为垃圾收集。在对象遍历阶段，GC必须记住哪些对象可以到达，以便删除不可到达的对象，这称为标记（marking）对象。<br>下一步，GC要删除不可到达的对象。删除时，有些GC只是简单的扫描堆栈，删除未标记的未标记的对象，并释放它们的内存以生成新的对象，这叫做清除（sweeping）。这种方法的问题在于内存会分成好多小段，而它们不足以用于新的对象，但是组合起来却很大。因此，许多GC可以重新组织内存中的对象，并进行压缩（compact），形成可利用的空间。<br>为此，GC需要停止其他的活动活动。这种方法意味着所有与应用程序相关的工作停止，只有GC运行。结果，在响应期间增减了许多混杂请求。另外，更复杂的 GC不断增加或同时运行以减少或者清除应用程序的中断。有的GC使用单线程完成这项工作，有的则采用多线程以增加效率。<br>实际上GC判断对象是否可达看的是强引用。更准确的描述是，一个对象存在强引用，必定是从其它强引用对象的本地变量，静态变量或者其它类似的地方直接引用过来的。换句话说，如果一堆对象通过某个不存活的对象“强引用”过来的话，它们会被一起回收掉。</li>
</ul>
</blockquote>
<h4 id="一些具体常用的垃圾收集算法"><a href="#一些具体常用的垃圾收集算法" class="headerlink" title="一些具体常用的垃圾收集算法"></a>一些具体常用的垃圾收集算法</h4><p>（1）标记－清除<br>这种收集器首先遍历对象图并标记可到达的对象，然后扫描堆栈以寻找未标记对象并释放它们的内存。这种收集器一般使用单线程工作并停止其他操作。并且，由于它只是清除了那些未标记的对象，而并没有对标记对象进行压缩，导致会产生大量内存碎片，从而浪费内存。<br>（2）标记－压缩<br>有时也叫标记－清除－压缩收集器，与标记－清除收集器有相同的标记阶段。在第二阶段，则把标记对象复制到堆栈的新域中以便压缩堆栈。这种收集器也停止其他操作。<br>（3）复制<br>这种收集器将堆栈分为两个域，常称为半空间。每次仅使用一半的空间，JVM生成的新对象则放在另一半空间中。GC运行时，它把可到达对象复制到另一半空间，从而压缩了堆栈。这种方法适用于短生存期的对象，持续复制长生存期的对象则导致效率降低。并且对于指定大小堆来说，需要两倍大小的内存，因为任何时候都只使用其中的一半。<br> (4) 增量收集器<br>增量收集器把堆栈分为多个域，每次仅从一个域收集垃圾，也可理解为把堆栈分成一小块一小块，每次仅对某一个块进行垃圾收集。这会造成较小的应用程序中断时间，使得用户一般不能觉察到垃圾收集器正在工作。<br>（5）分代<br>复制收集器的缺点是：每次收集时，所有的标记对象都要被拷贝，从而导致一些生命周期很长的对象被来回拷贝多次，消耗大量的时间。而分代收集器则可解决这个问题，分代收集器把堆栈分为两个或多个域，用以存放不同寿命的对象。JVM生成的新对象一般放在其中的某个域中。过一段时间，继续存在的对象(非短命对象)将获得使用期并转入更长寿命的域中。分代收集器对不同的域使用不同的算法以优化性能。<br>（6）并行收集器<br>并行收集器使用某种传统的算法并使用多线程并行的执行它们的工作。在多CPU机器上使用多线程技术可以显著的提高java应用程序的可扩展性。<br>最后，贴出一个非常简单的跟踪收集器的例图，以便大家加深对收集器的理解：<br><img src="https://volcfamily.cn/images/interview-question/g.png" alt="g"></p>
<h4 id="使用垃圾收集器要注意的地方"><a href="#使用垃圾收集器要注意的地方" class="headerlink" title="使用垃圾收集器要注意的地方"></a>使用垃圾收集器要注意的地方</h4><p>下面将提出一些有关垃圾收集器要注意的地方，垃圾收集器知识很多，下面只列出一部分必要的知识：<br>（1）每个对象只能调用finalize( )方法一次。如果在finalize( )方法执行时产生异常（exception），则该对象仍可以被垃圾收集器收集。<br>（2）垃圾收集器跟踪每一个对象，收集那些不可触及的对象（即该对象不再被程序引用 了），回收其占有的内存空间。但在进行垃圾收集的时候，垃圾收集器会调用该对象的finalize( )方法（如果有）。如果在finalize()方法中，又使得该对象被程序引用(俗称复活了)，则该对象就变成了可触及的对象，暂时不会被垃圾收集了。但是由于每个对象只能调用一次finalize( )方法，所以每个对象也只可能 “复活 “一次。<br>（3）Java语言允许程序员为任何方法添加finalize( )方法，该方法会在垃圾收集器交换回收对象之前被调用。但不要过分依赖该方法对系统资源进行回收和再利用，因为该方法调用后的执行结果是不可预知的。<br>（4）垃圾收集器不可以被强制执行，但程序员可以通过调研System.gc方法来建议执行垃圾收集。记住，只是建议。一般不建议自己写System.gc，因为会加大垃圾收集工作量。</p>
<h4 id="详解Java-GC的工作原理"><a href="#详解Java-GC的工作原理" class="headerlink" title="详解Java GC的工作原理"></a>详解Java GC的工作原理</h4><p>概要: JVM内存结构由堆、栈、本地方法栈、方法区等部分组成，另外JVM分别对新生代和旧生代采用不同的垃圾回收机制。<br>参考：<br><a href="http://www.cnblogs.com/ywl925/p/3925637.html" target="_blank" rel="noopener">http://www.cnblogs.com/ywl925/p/3925637.html</a></p>
<h4 id="Java中WeakReference与SoftReference的区别"><a href="#Java中WeakReference与SoftReference的区别" class="headerlink" title="Java中WeakReference与SoftReference的区别"></a>Java中WeakReference与SoftReference的区别</h4><p>虽然 WeakReference 与 SoftReference 都有利于提高 GC 和 内存的效率，但是 WeakReference ，一旦失去最后一个强引用，就会被 GC 回收，而软引用虽然不能阻止被回收，但是可以延迟到 JVM 内存不足的时候</p>
<h3 id="数组的排序"><a href="#数组的排序" class="headerlink" title="数组的排序"></a>数组的排序</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> array[] = &#123;<span class="number">33</span>,<span class="number">55</span>,<span class="number">22</span>,<span class="number">11</span>,-<span class="number">24</span>,<span class="number">57</span>,<span class="number">43</span>,<span class="number">77</span>,<span class="number">44</span>,<span class="number">37</span>,<span class="number">97</span>,<span class="number">25</span>,<span class="number">15</span>&#125;; </span><br><span class="line"><span class="comment">//调用Arrays.sort()方法给数组排序，默认是升序 </span></span><br><span class="line">Arrays.sort(array); </span><br><span class="line"><span class="comment">//利用foreach方法，从数组输出元素 </span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i : array) </span><br><span class="line">&#123; </span><br><span class="line">	System.out.print(i+<span class="string">" "</span>); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="集合的排序"><a href="#集合的排序" class="headerlink" title="集合的排序"></a>集合的排序</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(<span class="string">"调用Collections.sort(List&lt;T&gt; list)listCat2升序排序："</span>);</span><br><span class="line">Collections.sort(listCat1);</span><br><span class="line">System.out.println(<span class="string">"降序排列元素:"</span>);</span><br><span class="line">Collections.sort(listCat1, Collections.reverseOrder());</span><br><span class="line">System.out.println(<span class="string">"Collections.reverse 从列表中最后一个元素开始输出:"</span>);</span><br><span class="line">Collections.reverse(listCat1);</span><br></pre></td></tr></table></figure>
<h3 id="URI、URL、URN"><a href="#URI、URL、URN" class="headerlink" title="URI、URL、URN"></a>URI、URL、URN</h3><p><img src="https://volcfamily.cn/images/interview-question/h.png" alt="h"></p>
<p>URL的格式由下列三部分组成：<br>第一部分:协议（或称为服务方式）；<br>第二部分:存有该资源的主机IP地址（有时也包括端口号）；<br>第三部分是主机资源地址路径。，如目录和文件名等。<br><a href="http://ws.webxml.com.cn/WebServices/MobileCodeWS.asmx?op=getMobileCodeInfo" target="_blank" rel="noopener">http://ws.webxml.com.cn/WebServices/MobileCodeWS.asmx?op=getMobileCodeInfo</a><br>第一部分：//第二部/第三部分/。第一部分和第二部分是不可缺少的，第三部分有时可以省略<br><a href="http://www.aspxfans.com:8080/news/index.asp?boardID=5&amp;ID=24618&amp;page=1#name" target="_blank" rel="noopener">http://www.aspxfans.com:8080/news/index.asp?boardID=5&amp;ID=24618&amp;page=1#name</a></p>
<p>从上面的URL可以看出，一个完整的URL包括以下几部分：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1.协议部分：该URL的协议部分为“http：”，这代表网页使用的是HTTP协议。在Internet中可以使用多种协议，如HTTP，FTP等等本例中使用的是HTTP协议。在&quot;HTTP&quot;后面的“//”为分隔符</span><br><span class="line">2.域名(ip地址)部分：该URL的域名部分为“www.aspxfans.com”。一个URL中，也可以使用IP地址作为域名使用</span><br><span class="line">3.端口部分：跟在域名后面的是端口，域名和端口之间使用“:”作为分隔符。端口不是一个URL必须的部分，如果省略端口部分，将采用默认端口</span><br><span class="line">4.虚拟目录部分：从域名后的第一个“/”开始到最后一个“/”为止，是虚拟目录部分。虚拟目录也不是一个URL必须的部分。本例中的虚拟目录是“/news/”</span><br><span class="line">5.文件名部分：从域名后的最后一个“/”开始到“？”为止，是文件名部分，如果没有“?”,则是从域名后的最后一个“/”开始到“#”为止，是文件部分，如果没有“？”和“#”，那么从域名后的最后一个“/”开始到结束，都是文件名部分。本例中的文件名是“index.asp”。文件名部分也不是一个URL必须的部分，如果省略该部分，则使用默认的文件名</span><br><span class="line">6.锚部分：从“#”开始到最后，都是锚部分。本例中的锚部分是“name”。锚部分也不是一个URL必须的部分</span><br><span class="line">7.参数部分：从“？”开始到“#”为止之间的部分为参数部分，又称搜索部分、查询部分。本例中的参数部分为“boardID=5&amp;ID=24618&amp;page=1”。参数可以允许有多个参数，参数与参数之间用“&amp;”作为分隔符。</span><br></pre></td></tr></table></figure>
<h3 id="相对路径写-与不写"><a href="#相对路径写-与不写" class="headerlink" title="相对路径写/与不写/"></a>相对路径写/与不写/</h3><p>jsp或servlet路径的相对路径是根据web应用程序而言的。<br>new Configraution().config(“hibernate.cfg.xml”);//不加/<br>request.getRequestDispatcher(“/user/a.jsp”)这个/相对于当前的web应用webapp， 其绝对地址就是：<a href="http://192.168.0.1/webapp/user/a.jsp。" target="_blank" rel="noopener">http://192.168.0.1/webapp/user/a.jsp。</a></p>
<h3 id="java常用的设计模式"><a href="#java常用的设计模式" class="headerlink" title="java常用的设计模式"></a>java常用的设计模式</h3><h4 id="工厂方法模式"><a href="#工厂方法模式" class="headerlink" title="工厂方法模式"></a>工厂方法模式</h4><p><img src="https://volcfamily.cn/images/interview-question/i.png" alt="i"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">举例如下：（我们举一个发送邮件和短信的例子）</span><br><span class="line">首先，创建二者的共同接口：</span><br><span class="line">[java] view plaincopy</span><br><span class="line">1.	public interface Sender &#123;  </span><br><span class="line">2.	    public void Send();  </span><br><span class="line">3.	&#125;  </span><br><span class="line">其次，创建实现类：</span><br><span class="line">[java] view plaincopy</span><br><span class="line">1.	public class MailSender implements Sender &#123;  </span><br><span class="line">2.	    @Override  </span><br><span class="line">3.	    public void Send() &#123;  </span><br><span class="line">4.	        System.out.println(&quot;this is mailsender!&quot;);  </span><br><span class="line">5.	    &#125;  </span><br><span class="line">6.	&#125;  </span><br><span class="line">[java] view plaincopy</span><br><span class="line">1.	public class SmsSender implements Sender &#123;  </span><br><span class="line">2.	  </span><br><span class="line">3.	    @Override  </span><br><span class="line">4.	    public void Send() &#123;  </span><br><span class="line">5.	        System.out.println(&quot;this is sms sender!&quot;);  </span><br><span class="line">6.	    &#125;  </span><br><span class="line">7.	&#125;  </span><br><span class="line">最后，建工厂类：</span><br><span class="line">[java] view plaincopy</span><br><span class="line">1.	public class SendFactory &#123;  </span><br><span class="line">2.	  </span><br><span class="line">3.	    public Sender produce(String type) &#123;  </span><br><span class="line">4.	        if (&quot;mail&quot;.equals(type)) &#123;  </span><br><span class="line">5.	            return new MailSender();  </span><br><span class="line">6.	        &#125; else if (&quot;sms&quot;.equals(type)) &#123;  </span><br><span class="line">7.	            return new SmsSender();  </span><br><span class="line">8.	        &#125; else &#123;  </span><br><span class="line">9.	            System.out.println(&quot;请输入正确的类型!&quot;);  </span><br><span class="line">10.	            return null;  </span><br><span class="line">11.	        &#125;  </span><br><span class="line">12.	    &#125;  </span><br><span class="line">13.	&#125;  </span><br><span class="line">我们来测试下：</span><br><span class="line">1.	public class FactoryTest &#123;  </span><br><span class="line">2.	  </span><br><span class="line">3.	    public static void main(String[] args) &#123;  </span><br><span class="line">4.	        SendFactory factory = new SendFactory();  </span><br><span class="line">5.	        Sender sender = factory.produce(&quot;sms&quot;);  </span><br><span class="line">6.	        sender.Send();  </span><br><span class="line">7.	    &#125;  8.	&#125;</span><br></pre></td></tr></table></figure>
<h4 id="抽象工厂模式（Abstract-Factory）"><a href="#抽象工厂模式（Abstract-Factory）" class="headerlink" title="抽象工厂模式（Abstract Factory）"></a>抽象工厂模式（Abstract Factory）</h4><h4 id="单例模式（Singleton）"><a href="#单例模式（Singleton）" class="headerlink" title="单例模式（Singleton）"></a>单例模式（Singleton）</h4><h4 id="建造者模式（Builder）"><a href="#建造者模式（Builder）" class="headerlink" title="建造者模式（Builder）"></a>建造者模式（Builder）</h4><p>如下：一个Sender接口，两个实现类MailSender和SmsSender。最后，建造者类如下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">1.	sender接口</span><br><span class="line">2.	public interface Sender &#123;  </span><br><span class="line">3.	    public void Send();  </span><br><span class="line">4.	&#125;  </span><br><span class="line">5.	public class Builder &#123;  </span><br><span class="line">6.	      </span><br><span class="line">7.	    private List&lt;Sender&gt; list = new ArrayList&lt;Sender&gt;();  </span><br><span class="line">8.	      </span><br><span class="line">9.	    public void produceMailSender(int count)&#123;  </span><br><span class="line">10.	        for(int i=0; i&lt;count; i++)&#123;  </span><br><span class="line">11.	            list.add(new MailSender());  </span><br><span class="line">12.	        &#125;  </span><br><span class="line">13.	    &#125;  </span><br><span class="line">14.	      </span><br><span class="line">15.	    public void produceSmsSender(int count)&#123;  </span><br><span class="line">16.	        for(int i=0; i&lt;count; i++)&#123;  </span><br><span class="line">17.	            list.add(new SmsSender());  </span><br><span class="line">18.	        &#125;  </span><br><span class="line">19.	    &#125;  </span><br><span class="line">20.	&#125;</span><br><span class="line">测试类：	</span><br><span class="line">1.	public class Test &#123;  </span><br><span class="line">2.	  </span><br><span class="line">3.	    public static void main(String[] args) &#123;  </span><br><span class="line">4.	        Builder builder = new Builder();  </span><br><span class="line">5.	        builder.produceMailSender(10);  </span><br><span class="line">6.	    &#125;  7.	&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="String与StringBuffer"><a href="#String与StringBuffer" class="headerlink" title="String与StringBuffer"></a>String与StringBuffer</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">String a = “a”;//创建一个对象</span><br><span class="line">String b = “b” + “c”;//创建了一个对象”bc”</span><br><span class="line">String c = new String(“d”);//创建了两个对象c对象和“d”</span><br><span class="line">String d = new String(b)//创建一个对象对象，b存在于常量池，是初始化过的</span><br><span class="line">d = d + “e”;//创建了两个对象，新的String类型d和“e”</span><br><span class="line">String e = new String(b);//创建一个e对象</span><br><span class="line">String f = new StringBuffer(“f”);//创建一个f对象，和String类型的“e”</span><br><span class="line">f + “g”;//创建了一个对象”g”</span><br></pre></td></tr></table></figure>
<h3 id="Java基本数据类型？int所占的字节数"><a href="#Java基本数据类型？int所占的字节数" class="headerlink" title="Java基本数据类型？int所占的字节数"></a>Java基本数据类型？int所占的字节数</h3><p>byte char short int long float double boolean<br>字符与字节<br>ASCII码：一个英文字母（不分大小写）占一个字节的空间，一个中文汉字占两个字节的空间。<br>UTF-8编码：一个英文字符等于一个字节，一个中文（含繁体）等于二~四个字节。<br>Unicode编码：一个英文等于两个字节，一个中文（含繁体）等于两个字节。<br>符号：英文标点占一个字节，中文标点占两个字节。举例：英文句号“.”占1个字节的大小，中文句号“。”占2个字节的大小。</p>
<pre><code>C类型               32                  64
char               1                   1
short int           2                   2
int                   4                   4
long int           4                   8
long long int       8                   8
char*               4                   8
float               4                    4
double               8                   8
</code></pre><p>需要说明一下的是指针类型存储的是所指向变量的地址，所以32位机器只需要32bit，而64位机器需要64bit</p>
<h3 id="抽象"><a href="#抽象" class="headerlink" title="抽象"></a>抽象</h3><p>抽象类提供了继承的概念，它的出发点就是为了继承，否则它没有存在的任何意义。所以说定义的抽象类一定是用来继承的，同时在一个以抽象类为节点的继承关系等级链中，叶子节点一定是具体的实现类。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Test2Abstract</span> </span>&#123;<span class="comment">//抽象类和普通类最大的区别就是不能让其他类创建这个抽象类的对象</span></span><br><span class="line">	<span class="function"><span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method2</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"这是普通方法"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">mehtod3</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"这是静态方法"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//public static abstract void mehtod4()&#123;&#125;//报错：抽象方法不能为static</span></span><br><span class="line">	<span class="comment">//abstract void method5()&#123;&#125;//报错：抽象方法不能有方法体</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">method6</span><span class="params">()</span></span>&#123;<span class="comment">//抽象类中的方法可以为final，final方法不能在子类中重写(重载)[可以改变方法的参数个数，类型，和顺序]</span></span><br><span class="line">		System.out.println(<span class="string">"这个是final的方法"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test3</span> <span class="keyword">extends</span> <span class="title">Test2Abstract</span></span>&#123;<span class="comment">//普通类只能单继承抽象类，并且要实现抽象方法(继承和实现)</span></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">method</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"普通类继承了抽象类，并实现了抽象类中的抽象方法"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Test3 test3 = <span class="keyword">new</span> Test3();<span class="comment">//抽象类只能让其他类继承，其他类不能创建抽象类的实例对象</span></span><br><span class="line">		test3.mehtod3();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//public void method6()&#123;&#125;//报错：父类抽象类中的method6()为final类型不能重写</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h3><p>在接口中只有常量，因为定义的变量，在编译的时候都会默认加上<br>总结：接口所有方法全是抽象方法只能 public abstract修饰 （默认public abstract修饰 ），属性默认public static final修饰。</p>
<h3 id="Java语言中的修饰符"><a href="#Java语言中的修饰符" class="headerlink" title="Java语言中的修饰符"></a>Java语言中的修饰符</h3><p>主要分为以下两类：<br>•    访问修饰符<br>•    非访问修饰符</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">•	//Final类</span><br><span class="line">•	//Final类不能被继承，没有类能够继承final类的任何特性。</span><br><span class="line">•	//实例：</span><br><span class="line">•	public final class Test &#123;</span><br><span class="line">•		   // 类体•	&#125;</span><br></pre></td></tr></table></figure>
<p>基本类型与引用类型的区别<br>基本类型在声明其变量时就为它分配了空间。<br>在Java中，除了基本数据类型之外，其他的都是引用类型。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span>  <span class="title">f</span><span class="params">( <span class="keyword">int</span>  b)</span>  <span class="comment">/* b为形参 */</span>  </span></span><br><span class="line"><span class="function"></span>&#123;  <span class="keyword">return</span>  b;&#125; </span><br><span class="line">main() </span><br><span class="line">&#123; <span class="keyword">int</span>  a = <span class="number">1</span> ; </span><br><span class="line">printf( <span class="string">" %d "</span> ,f(a)); <span class="comment">/* a为实参 */</span>  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>例如，形参改变了，但是实参没有被改变。代码如下</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;  </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span>  </span></span><br><span class="line"><span class="class"></span>&#123;  </span><br><span class="line">   <span class="keyword">private</span> String name;  </span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">int</span> age;  </span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">(String name,<span class="keyword">int</span> age)</span>  </span></span><br><span class="line"><span class="function">   </span>&#123;  </span><br><span class="line">      <span class="keyword">this</span>.name=name;  </span><br><span class="line">      <span class="keyword">this</span>.age=age;  </span><br><span class="line">   &#125;  </span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printInfo</span><span class="params">()</span>  </span></span><br><span class="line"><span class="function">   </span>&#123;  </span><br><span class="line">      System.out.println(<span class="string">"Name:"</span>+name+<span class="string">" age:"</span>+age);</span><br><span class="line">    &#125;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">change</span><span class="params">(Student student)</span> <span class="comment">//student为形参，将s实参赋值给student</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      <span class="comment">//新增的输出操作</span></span><br><span class="line">      <span class="keyword">if</span>(student!=<span class="keyword">null</span>)  </span><br><span class="line">      &#123;  </span><br><span class="line">         student.printInfo();  </span><br><span class="line">      &#125;  </span><br><span class="line">      Student stu=<span class="keyword">new</span> Student(<span class="string">"Lucy"</span>,<span class="number">26</span>);  </span><br><span class="line">      student=stu;  </span><br><span class="line">      student.printInfo();  </span><br><span class="line">    &#125;  </span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[]args)</span>  </span></span><br><span class="line"><span class="function">   </span>&#123;  </span><br><span class="line">      Student s=<span class="keyword">new</span> Student(<span class="string">"Lily"</span>,<span class="number">25</span>);  </span><br><span class="line">      s.printInfo();  </span><br><span class="line">      change(s);  <span class="comment">//change(Student student)的形参student改变了。</span></span><br><span class="line">      s.printInfo();  <span class="comment">//实参s并没有改变</span></span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="什么是值传递，什么是引用传递"><a href="#什么是值传递，什么是引用传递" class="headerlink" title="什么是值传递，什么是引用传递"></a>什么是值传递，什么是引用传递</h3><p>1.值传递只传递一个对象的拷贝，本身的数据不会发生改变，一般java中8种基本类型都是值传递。 </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TransferTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> num = <span class="number">1</span>;</span><br><span class="line">        System.out.println(<span class="string">"changeNum()方法调用之前：num = "</span> + num);</span><br><span class="line">        changeNum(num);</span><br><span class="line">        System.out.println(<span class="string">"changeNum()方法调用之后：num = "</span> + num);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">changeNum</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"x = "</span> + x);</span><br><span class="line">        x = <span class="number">2</span>;</span><br><span class="line">        System.out.println(<span class="string">"x = "</span> + x);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>console<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">changeNum()方法调用之前：num = 1</span><br><span class="line">x = 1</span><br><span class="line">x = 2</span><br><span class="line">changeNum()方法调用之后：num = 1</span><br></pre></td></tr></table></figure></p>
<p>这个传递过程的示意图如下：<br><img src="https://volcfamily.cn/images/interview-question/j.png" alt="j"></p>
<p>num作为参数传递给changeNum()方法时，是将内存空间中num所指向的那个存储单元中存放的值1传递给了changeNum()方法中的x变量，而这个x变量也在内存空间中分配了一个存储单元，这个时候，就把num的值1传递给了x的这个存储单元中。此后，在changeNum()方法中对x的一切操作都是针对x所指向的这个存储单元，与num所指向的那个存储单元没有关系了！</p>
<p>所以，在changeNum()方法调用之后，num所指向的存储单元的值还是没有发生变化，这就是所谓的“按值传递”！按值传递的精髓是：传递的是存储单元中的内容，而不是存储单元的引用！</p>
<p>当一个对象被当作参数传递到一个方法后，在此方法内可以改变这个对象的属性，那么这里到底是「按值传递」还是「按引用传递」?<br>答：是按值传递。Java 语言的参数传递只有「按值传递」。当一个实例对象作为参数被传递到方法中时，参数的值就是该对象的引用的一个副本。指向同一个对象，对象的内容可以在被调用的方法内改变，但对象的引用(不是引用的副本) 是永远不会改变的。</p>
<p>Java的参数传递，不管是基本数据类型还是引用类型的参数，都是按值传递，没有按引用传递！</p>
<p>2.引用传递，将对象的引用传递过去，改变这个引用也会改变对象本身的数据。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TransferTest2</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Person p1 = <span class="keyword">new</span> Person();</span><br><span class="line">        System.out.println(p1);</span><br><span class="line">        change(p1);</span><br><span class="line">        System.out.println(p1);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">change</span><span class="params">(Person p2)</span> </span>&#123;</span><br><span class="line">        p2 = <span class="keyword">new</span> Person();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Person类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure>
<p>console<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Person@41629346</span><br><span class="line">Person@41629346</span><br></pre></td></tr></table></figure></p>
<p>可以看出两次打印person的地址值是一样的，即调用完change() 方法之后，person变量并没有发生改变。</p>
<p>这个传递过程的示意图如下：</p>
<p><img src="https://volcfamily.cn/images/interview-question/k.png" alt="k"></p>
<p>当执行到第3行代码时，程序在堆内存中开辟了一块内存空间用来存储Person类的实例对象，同时在栈内存中开辟了一个存储单元用来存储该实例对象的引用，即上图中person指向的存储单元。<br>当执行到第5行代码时，person作为参数传递给change()方法，需要注意的是：person将自己存储单元的内容传递给了change()方法的p变量！此后，在change()方法中对p的一切操作都是针对p所指向的存储单元，与person所指向的那个存储单元没有关系了！</p>
<h3 id="hashCode-和equals-的区别"><a href="#hashCode-和equals-的区别" class="headerlink" title="hashCode()和equals()的区别"></a>hashCode()和equals()的区别</h3><p>1.equals() 用于判断两个对象的数据、内容是否一致。<br>2.hashCode()用于生成一个哈希码(相应对象整型的 hash 值)，便于HashMap使用，系统默认实现是计算对象的内存地址，转换成一个整数。 它们之间没什么联系，两个相等的对象生成的HASH码应该是相等，但是HASH码相等并不能保证两个对象相等。关键在于你对相等的定义（也就是重写equals函数），与此同时，也应该重写hashCode函数保证上述关系。</p>
<h3 id="collection"><a href="#collection" class="headerlink" title="collection"></a>collection</h3><p>java.util.Collection [I]<br>+–java.util.List [I]<br>   +–java.util.ArrayList [C]<br>   +–java.util.LinkedList [C]<br>   +–java.util.Vector [C]<br>      +–java.util.Stack [C]<br>+–java.util.Set [I]<br>   +–java.util.HashSet [C]<br>   +–java.util.SortedSet [I]<br>      +–java.util.TreeSet [C]</p>
<p>java.util.Map [I]<br>+–java.util.SortedMap [I]<br>   +–java.util.TreeMap [C]<br>+–java.util.Hashtable [C]<br>+–java.util.HashMap [C]<br>+–java.util.LinkedHashMap [C]<br>+–java.util.WeakHashMap [C]<br>参考：<a href="http://android.blog.51cto.com/268543/400557" target="_blank" rel="noopener">http://android.blog.51cto.com/268543/400557</a></p>
<p><img src="https://volcfamily.cn/images/interview-question/l.png" alt="l"><br><img src="https://volcfamily.cn/images/interview-question/m.png" alt="m"><br><img src="https://volcfamily.cn/images/interview-question/n.png" alt="n">　    </p>
<p><img src="https://volcfamily.cn/images/interview-question/o.png" alt="o"></p>
<h4 id="Map集合取值方式"><a href="#Map集合取值方式" class="headerlink" title="Map集合取值方式"></a>Map集合取值方式</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">testMap</span><span class="params">()</span></span>&#123;  </span><br><span class="line">        <span class="comment">//Map 无序key值不重复  </span></span><br><span class="line">        Map&lt;String, String&gt; map = <span class="keyword">new</span> HashMap&lt;String, String&gt;();  </span><br><span class="line">        map.put(<span class="string">"zhangsan"</span>, <span class="string">"我是张三"</span>);  </span><br><span class="line">        map.put(<span class="string">"devin"</span>, <span class="string">"我是dw"</span>);  </span><br><span class="line">        map.put(<span class="string">"haha"</span>, <span class="string">"我是哈哈"</span>);  </span><br><span class="line">          </span><br><span class="line">        <span class="comment">//遍历方法一 map.keySet + for  </span></span><br><span class="line">        <span class="keyword">for</span>(String key : map.keySet())&#123;  </span><br><span class="line">            System.out.println(<span class="string">"key="</span>+ key + <span class="string">",value="</span> + map.get(key));  </span><br><span class="line">        &#125;  </span><br><span class="line">          </span><br><span class="line">        <span class="comment">//遍历方法二map.keySet +Iterator  </span></span><br><span class="line">        Iterator&lt;String&gt; iterator = map.keySet().iterator();  </span><br><span class="line">        <span class="keyword">while</span>(iterator.hasNext())&#123;  </span><br><span class="line">            String key1 = iterator.next().toString();  </span><br><span class="line">            System.out.println(<span class="string">"key="</span>+ key1 + <span class="string">",value="</span> + map.get(key1));  </span><br><span class="line">        &#125;  </span><br><span class="line">          </span><br><span class="line">        <span class="comment">//遍历方式三 map.values  </span></span><br><span class="line">        <span class="keyword">for</span> (String key2 : map.values()) &#123;    </span><br><span class="line">            System.out.println(<span class="string">"value="</span> + key2);  </span><br><span class="line">        &#125;  </span><br><span class="line">          </span><br><span class="line">        <span class="comment">//遍历方式四  map.entrySet + for  </span></span><br><span class="line">        <span class="keyword">for</span>(Map.Entry&lt;String,String&gt; entry : map.entrySet())&#123;  </span><br><span class="line">            System.out.println(<span class="string">"key="</span>+ entry.getKey() + <span class="string">",value="</span> + entry.getValue());  </span><br><span class="line">        &#125;  </span><br><span class="line">          </span><br><span class="line">        <span class="comment">//遍历方式五map.entrySet() + Iterator  </span></span><br><span class="line">        Iterator &lt;Map.Entry&lt;String,String&gt;&gt; entry = map.entrySet().iterator();  </span><br><span class="line">        <span class="keyword">while</span>(entry.hasNext())&#123;  </span><br><span class="line">            Map.Entry&lt;String, String&gt; ent = entry.next();  </span><br><span class="line">            System.out.println(<span class="string">"key="</span>+ ent.getKey() + <span class="string">",value="</span> + ent.getValue());  </span><br><span class="line">        &#125; </span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Java-中的-HashSet，内部是如何工作的"><a href="#Java-中的-HashSet，内部是如何工作的" class="headerlink" title="Java 中的 HashSet，内部是如何工作的"></a>Java 中的 HashSet，内部是如何工作的</h4><p>HashSet 的内部采用 HashMap来实现。由于 Map 需要 key 和 value，所以所有 key 的都有一个默认 value。类似于 HashMap，HashSet 不允许重复的 key，只允许有一个null key，意思就是 HashSet 中只允许存储一个 null 对象。</p>
<h4 id="Hashtable-和-HashMap之间的区别"><a href="#Hashtable-和-HashMap之间的区别" class="headerlink" title="Hashtable 和 HashMap之间的区别"></a>Hashtable 和 HashMap之间的区别</h4><ol>
<li>都实现了Map接口，Hashtable是线程安全的，HashMap非线程安全，hashMap速度较快一些。<ol start="2">
<li>HashMap的迭代器(Iterator)是fail-fast迭代器，而Hashtable的enumerator迭代器不是fail-fast的。所以当有其它线程改变了HashMap的结构（增加或者移除元素），将会抛出ConcurrentModificationException，但迭代器本身的remove()方法移除元素则不会抛出ConcurrentModificationException异常。但这并不是一个一定发生的行为，要看JVM。这条同样也是Enumeration和Iterator的区别。</li>
<li>HashMap允许null键值，Hashtable不允许有null值。</li>
<li>HashMap把Hashtable的contains方法去掉了，改成containsvalue和containsKey。因为contains方法容易让人引起误解。</li>
<li>Hashtable继承自Dictionary类，而HashMap是Java1.2引进的Map interface的一个实现。</li>
</ol>
</li>
</ol>
<h4 id="说出ArrayList-Vector-LinkedList的存储性能和特性"><a href="#说出ArrayList-Vector-LinkedList的存储性能和特性" class="headerlink" title="说出ArrayList,Vector, LinkedList的存储性能和特性"></a>说出ArrayList,Vector, LinkedList的存储性能和特性</h4><p>ArrayList和Vector都是使用数组方式存储数据，此数组元素数大于实际存储的数据以便增加和插入元素，它们都允许直接按序号索引元素，但是插入元素要涉及数组元素移动等内存操作，所以索引数据快而插入数据慢，Vector由于使用了synchronized方法（线程安全），通常性能上较ArrayList差，而LinkedList使用双向链表实现存储，按序号索引数据需要进行前向或后向遍历，但是插入数据时只需要记录本项的前后项即可，所以插入速度较快。</p>
<p>ArrayList数组方式存储，可以扩容1.5倍+1，按序号索引，查询更新快，插入删除慢，非线程安全<br>Vector  数组方法存储，可以扩容2倍，按序号索引，查询更新快，插入删除慢，线程安全<br>LinkedList双向链表存储，不可扩容，移动指针查询，查询更新慢，插入删除快，非线程安全</p>
<h4 id="ArrayList-和-HashMap-的默认大小是多数"><a href="#ArrayList-和-HashMap-的默认大小是多数" class="headerlink" title="ArrayList 和 HashMap 的默认大小是多数"></a>ArrayList 和 HashMap 的默认大小是多数</h4><p>在 Java 7 中，ArrayList 的默认大小是 10 个元素，HashMap 的默认大小是16个元素（必须是2的幂）。这就是 Java 7 中 ArrayList 和 HashMap 类的代码片段：</p>
<h4 id="Java-中，Comparator-与-Comparable-有什么不同"><a href="#Java-中，Comparator-与-Comparable-有什么不同" class="headerlink" title="Java 中，Comparator 与 Comparable 有什么不同"></a>Java 中，Comparator 与 Comparable 有什么不同</h4><p>Comparable 接口用于定义对象的自然顺序，而 comparator 通常用于定义用户定制的顺序。Comparable 总是只有一个，但是可以有多个 comparator 来定义对象的顺序。</p>
<h3 id="为什么在重写equals方法的时候需要重写hashCode方法"><a href="#为什么在重写equals方法的时候需要重写hashCode方法" class="headerlink" title="为什么在重写equals方法的时候需要重写hashCode方法"></a>为什么在重写equals方法的时候需要重写hashCode方法</h3><p>因为有强制的规范指定需要同时重写 hashcode 与 equal 是方法，许多容器类，如 HashMap、HashSet 都依赖于 hashcode 与 equals 的规定。</p>
<h3 id="session的特点"><a href="#session的特点" class="headerlink" title="session的特点"></a>session的特点</h3><p>(1)不是线程安全的，因此在设计软件架构时，应该避免多个线程共享同一个Session实例。<br>(2)Session实例是轻量级的，所谓轻量级是指它的创建和销毁不需要消耗太多的资源。这意味着在程序中可以经常创建或销毁Session对象，例如为每个客户请求分配单独的Session实例，或者为每个工作单元分配单独的Session实例。<br>(3)在Session 中，每个数据库操作都是在一个事务(transaction)中进行的，这样就可以隔离开不同的操作（甚至包括只读操作）。</p>
<h3 id="简述cookie与session作用、区别、应用范围、session的工作原理"><a href="#简述cookie与session作用、区别、应用范围、session的工作原理" class="headerlink" title="简述cookie与session作用、区别、应用范围、session的工作原理"></a>简述cookie与session作用、区别、应用范围、session的工作原理</h3><h4 id="Cookie原理"><a href="#Cookie原理" class="headerlink" title="Cookie原理"></a>Cookie原理</h4><pre><code>1）服务器创建cookie对象，把会话数据存储到cookie对象中。
        new Cookie(&quot;name&quot;,&quot;value&quot;);
2）    服务器发送cookie信息到浏览器
        response.addCookie(cookie);

        举例： set-cookie: name=eric  (隐藏发送了一个set-cookie名称的响应头)
3）浏览器得到服务器发送的cookie，然后保存在浏览器端。
4）浏览器在下次访问服务器时，会带着cookie信息
        举例： cookie: name=eric  (隐藏带着一个叫cookie名称的请求头)
5）服务器接收到浏览器带来的cookie信息
        request.getCookies();
</code></pre><h4 id="session工作原理"><a href="#session工作原理" class="headerlink" title="session工作原理"></a>session工作原理</h4><p>代码解读：HttpSession session = request.getSession();<br>            1）第一次访问创建session对象，给session对象分配一个唯一的ID，叫JSESSIONID<br>                    new HttpSession();<br>            2）把JSESSIONID作为Cookie的值发送给浏览器保存<br>                    Cookie cookie = new Cookie(“JSESSIONID”, sessionID);<br>                    response.addCookie(cookie);<br>            3）第二次访问的时候，浏览器带着JSESSIONID的cookie访问服务器<br>            4）服务器得到JSESSIONID，在服务器的内存中搜索是否存放对应编号的session对象。<br>                    if(找到){<br>                        return map.get(sessionID);<br>                    }<br>                    Map&lt;String,HttpSession&gt;]<br>                    &lt;”s001”, s1&gt;<br>                    &lt;”s001,”s2&gt;<br>            5）如果找到对应编号的session对象，直接返回该对象<br>            6）如果找不到对应编号的session对象，创建新的session对象，继续走1的流程</p>
<pre><code>结论：通过JSESSION的cookie值在服务器找session对象！！！！！
</code></pre><p>cookie是一种客户端的机制<br>    cookie:域：google.com称之为域<br>            后面带的url称之为路径，路径和域共同组成了cookie<br>    使用javascript脚本语言和windos.open打开的窗口会与原窗口使用用一个cookie<br>session是一种服务端的，当程序需要为某个客户端的请求创建一个session服务器，首先按照客户端的sessionid把这个session检索出来，如果找不到sessionid就会创建一个新的session并返回给客户端保存，保存这个客户端的sessionid可以采用cookie</p>
<p>Cookie类：用于存储会话数据</p>
<pre><code>1）构造Cookie对象
    Cookie(java.lang.String name, java.lang.String value)
2）设置cookie
    void setPath(java.lang.String uri)   ：设置cookie的有效访问路径
    void setMaxAge(int expiry) ： 设置cookie的有效时间
    void setValue(java.lang.String newValue) ：设置cookie的值
3）发送cookie到浏览器端保存
    void response.addCookie(Cookie cookie)  : 发送cookie
4）服务器接收cookie
    Cookie[] request.getCookies()  : 接收cookie
</code></pre><p>cookie案例:<br>显示用户上次访问的时间<br>查看用户浏览器过的商品<br>5天内自动登录:<br>    用户名和密码(MD5加密返回保存在cookie中)</p>
<h4 id="cookie-和session-的区别"><a href="#cookie-和session-的区别" class="headerlink" title="cookie 和session 的区别"></a>cookie 和session 的区别</h4><p>1、cookie数据存放在客户的浏览器上，session数据放在服务器上。<br>2、cookie不是很安全，别人可以分析存放在本地的COOKIE并进行COOKIE欺骗<br>   考虑到安全应当使用session。<br>3、session会在一定时间内保存在服务器上。当访问增多，会比较占用你服务器的性能<br>   考虑到减轻服务器性能方面，应当使用COOKIE。<br>4、单个cookie保存的数据不能超过4K，很多浏览器都限制一个站点最多保存20个cookie。<br>5、所以个人建议：<br>   将登陆信息等重要信息存放为SESSION<br>   其他信息如果需要保留，可以放在COOKIE中</p>
<h3 id="进程概念"><a href="#进程概念" class="headerlink" title="进程概念"></a>进程概念</h3><p>进程是表示资源分配的基本单位，又是调度运行的基本单位</p>
<h3 id="线程概念"><a href="#线程概念" class="headerlink" title="线程概念"></a>线程概念</h3><p>线程是进程中执行运算的最小单位，亦即执行处理机调度的基本单位</p>
<h4 id="线程调度方式"><a href="#线程调度方式" class="headerlink" title="线程调度方式"></a>线程调度方式</h4><pre><code>线程调度室指系统为线程分配处理器使用权的古城，主要的调度方式有两种：协同式和抢占式线程调度。
</code></pre><p>协同式线程调度<br>     使用协同式的线程调度，线程的执行时间由线程本身来控制，线程把自己的工作执行完了后，要主动通知系统切换到另一个线程上去。协同式线程调度的最大优点是实现简单，而且由于线程要把自己的事情干完后才会进行线程切换，因此没有什么线程同步的问题。它的缺点很明显：线程执行时间不可控制，有可能出现线程饥饿、永久阻塞等问题。比如，如果一个线程编写有问题，一直不告知系统进行线程切换，那么程序就会一直阻塞在那里。<br>    抢占式线程调度<br>     使用抢占式的线程调度，每个线程将由系统来分配执行时间，线程的切换不由线程本身来决定（在Java中，Thread.yield（）可以让出执行时间，但是要获得执行时间的话，线程本身是没有办法的）。在这种实现线程调度的方式下，线程的执行时间是系统可控的，也不会因为一个线程而导致整个进程阻塞。Java使用的线程调度方式就是抢占式调度。另外，抢占式线程调度也与线程优先级有关，不过线程优先级并不是很靠谱，原因是Java的线程是被映射到系统的原生线程上来实现的，所以线程调度最终还是由操作系统说了算，虽然现在好恩多操作系统都有提供线程优先级的概念，但是并不见得能与Java线程的优先级一一对应。因此，不能太依赖优先级。</p>
<h4 id="java多线程中的伪共享"><a href="#java多线程中的伪共享" class="headerlink" title="java多线程中的伪共享"></a>java多线程中的伪共享</h4><p><img src="https://volcfamily.cn/images/interview-question/p.png" alt="p"><br>图1<br>当多线程修改互相独立的变量时，如果这些变量共享同一个缓存行，就会无意中影响彼此的性能，这就是伪共享</p>
<p>图1说明了伪共享的问题。在核心1上运行的线程想更新变量X，同时核心2上的线程想要更新变量Y。不幸的是，这两个变量在同一个缓存行中。每个线程都要去竞争缓存行的所有权来更新变量。如果核心1获得了所有权，缓存子系统将会使核心2中对应的缓存行失效。当核心2获得了所有权然后执行更新操作，核心1就要使自己对应的缓存行失效。这会来来回回的经过L3缓存，大大影响了性能。如果互相竞争的核心位于不同的插槽，就要额外横跨插槽连接，问题可能更加严重。</p>
<h3 id="继承thread类与实现runnable接口的区别"><a href="#继承thread类与实现runnable接口的区别" class="headerlink" title="继承thread类与实现runnable接口的区别"></a>继承thread类与实现runnable接口的区别</h3><p>实现Runnable接口比继承Thread类所具有的优势：<br>1）：适合多个相同的程序代码的线程去处理同一个资源<br>2）：可以避免java中的单继承的限制<br>3）：增加程序的健壮性，代码可以被多个线程共享，代码和数据独立</p>
<h3 id="实现多线程方法"><a href="#实现多线程方法" class="headerlink" title="实现多线程方法"></a>实现多线程方法</h3><p>1 实现Runnable接口<br>2 集成thread类<br>3 实现Callable(实现有返回结果的多线程)<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* Java线程：有返回值的线程</span></span><br><span class="line"><span class="comment">* </span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span> wb_qiuquan.ying</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@SuppressWarnings</span>(<span class="string">"unchecked"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ExecutionException,</span></span><br><span class="line"><span class="function">    InterruptedException </span>&#123;</span><br><span class="line">   System.out.println(<span class="string">"----程序开始运行----"</span>);</span><br><span class="line">   Date date1 = <span class="keyword">new</span> Date();</span><br><span class="line"></span><br><span class="line">   <span class="keyword">int</span> taskSize = <span class="number">5</span>;</span><br><span class="line">   <span class="comment">// 创建一个线程池</span></span><br><span class="line">   ExecutorService pool = Executors.newFixedThreadPool(taskSize);</span><br><span class="line">   <span class="comment">// 创建多个有返回值的任务</span></span><br><span class="line">   List&lt;Future&gt; list = <span class="keyword">new</span> ArrayList&lt;Future&gt;();</span><br><span class="line">   <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; taskSize; i++) &#123;</span><br><span class="line">    Callable c = <span class="keyword">new</span> MyCallable(i + <span class="string">" "</span>);</span><br><span class="line">    <span class="comment">// 执行任务并获取Future对象</span></span><br><span class="line">    Future f = pool.submit(c);</span><br><span class="line">    <span class="comment">// System.out.println("&gt;&gt;&gt;" + f.get().toString());</span></span><br><span class="line">    list.add(f);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">// 关闭线程池</span></span><br><span class="line">   pool.shutdown();</span><br><span class="line"></span><br><span class="line">   <span class="comment">// 获取所有并发任务的运行结果</span></span><br><span class="line">   <span class="keyword">for</span> (Future f : list) &#123;</span><br><span class="line">    <span class="comment">// 从Future对象上获取任务的返回值，并输出到控制台</span></span><br><span class="line">    System.out.println(<span class="string">"&gt;&gt;&gt;"</span> + f.get().toString());</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   Date date2 = <span class="keyword">new</span> Date();</span><br><span class="line">   System.out.println(<span class="string">"----程序结束运行----，程序运行时间【"</span></span><br><span class="line">     + (date2.getTime() - date1.getTime()) + <span class="string">"毫秒】"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyCallable</span> <span class="keyword">implements</span> <span class="title">Callable</span>&lt;<span class="title">Object</span>&gt; </span>&#123;</span><br><span class="line"><span class="keyword">private</span> String taskNum;</span><br><span class="line"></span><br><span class="line">MyCallable(String taskNum) &#123;</span><br><span class="line">   <span class="keyword">this</span>.taskNum = taskNum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> Object <span class="title">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">   System.out.println(<span class="string">"&gt;&gt;&gt;"</span> + taskNum + <span class="string">"任务启动"</span>);</span><br><span class="line">   Date dateTmp1 = <span class="keyword">new</span> Date();</span><br><span class="line">   Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">   Date dateTmp2 = <span class="keyword">new</span> Date();</span><br><span class="line">   <span class="keyword">long</span> time = dateTmp2.getTime() - dateTmp1.getTime();</span><br><span class="line">   System.out.println(<span class="string">"&gt;&gt;&gt;"</span> + taskNum + <span class="string">"任务终止"</span>);</span><br><span class="line">   <span class="keyword">return</span> taskNum + <span class="string">"任务返回运行结果,当前任务时间【"</span> + time + <span class="string">"毫秒】"</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="线程工作流程"><a href="#线程工作流程" class="headerlink" title="线程工作流程"></a>线程工作流程</h3><ol>
<li>创建状态<br>使用new运算符创建一个线程后,该线程仅仅是一个空对象,系统没有分配资源,称该线程处于创建状态(new thread)。 </li>
<li>可运行状态<br>使用start()方法启动一个线程后,系统为该线程分配了除CPU外的所需资源,使该线程处于可运行状态(Runnable)。 </li>
<li>运行中状态<br>Java运行系统通过调度选中一个Runnable的线程,使其占有CPU并转为运行中状态(Running).此时,系统真正执行线程的run()方法。 </li>
<li>阻塞状态<br>一个正在运行的线程因某种原因不能继续运行时,进入阻塞状态(Blocked)。<br> 1&gt;线程通过调用sleep方法进入睡眠状态；<pre><code>2&gt;线程调用一个在I/O上被阻塞的操作，即该操作在输入输出操作完成之前不会返回到它的调用者；
3&gt;线程试图得到一个锁，而该锁正被其他线程持有；
4&gt;线程在等待某个触发条件；
</code></pre></li>
<li>死亡状态<br>线程结束后是死亡状态(Dead)。</li>
</ol>
<h3 id="volatile"><a href="#volatile" class="headerlink" title="volatile"></a>volatile</h3><p>用volatile修饰后的变量不允许有不同于“主”内存区域的变量拷贝。换句话说，一个变量经 volatile修饰后在所有线程中必须是同步的；任何线程中改变了它的值，所有其他线程立即获取到了相同的值。理所当然的，volatile修饰的变量存取时比一般变量消耗的资源要多一点，因为线程有它自己的变量拷贝更为高效。<br>volatile关键字相信了解Java多线程的读者都很清楚它的作用。volatile关键字用于声明简单类型变量，如int、float、 boolean等数据类型。如果这些简单数据类型声明为volatile，对它们的操作就会变成原子级别的。但这有一定的限制。例如，下面的例子中的n就不是原子级别的：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span>   <span class="class"><span class="keyword">class</span>  <span class="title">JoinThread</span>  <span class="keyword">extends</span>  <span class="title">Thread</span>  </span></span><br><span class="line"><span class="class"></span>&#123;  </span><br><span class="line">     <span class="keyword">public</span>   <span class="keyword">static</span> <span class="keyword">volatile</span> <span class="keyword">int</span>  n  =   <span class="number">0</span> ;  </span><br><span class="line">    <span class="function"><span class="keyword">public</span>   <span class="keyword">void</span>  <span class="title">run</span><span class="params">()</span>  </span></span><br><span class="line"><span class="function">    </span>&#123;  </span><br><span class="line">         <span class="keyword">for</span>  ( <span class="keyword">int</span>  i  =   <span class="number">0</span> ; i  &lt;   <span class="number">10</span> ; i ++ )  </span><br><span class="line">             <span class="keyword">try</span>   </span><br><span class="line">        &#123;  </span><br><span class="line">                n  =  n  +   <span class="number">1</span> ;  </span><br><span class="line">                sleep( <span class="number">3</span> );  <span class="comment">//  为了使运行结果更随机，延迟3毫秒   </span></span><br><span class="line">  </span><br><span class="line">            &#125;  </span><br><span class="line">             <span class="keyword">catch</span>  (Exception e)  </span><br><span class="line">            &#123;  </span><br><span class="line">            &#125;  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">     <span class="function"><span class="keyword">public</span>   <span class="keyword">static</span>   <span class="keyword">void</span>  <span class="title">main</span><span class="params">(String[] args)</span>  <span class="keyword">throws</span>  Exception  </span></span><br><span class="line"><span class="function">    </span>&#123;  </span><br><span class="line">  </span><br><span class="line">        Thread threads[]  =   <span class="keyword">new</span>  Thread[ <span class="number">100</span> ];  </span><br><span class="line">         <span class="keyword">for</span>  ( <span class="keyword">int</span>  i  =   <span class="number">0</span> ; i  &lt;  threads.length; i ++ )  </span><br><span class="line">             <span class="comment">//  建立100个线程   </span></span><br><span class="line">            threads[i]  =   <span class="keyword">new</span>  JoinThread();  </span><br><span class="line">         <span class="keyword">for</span>  ( <span class="keyword">int</span>  i  =   <span class="number">0</span> ; i  &lt;  threads.length; i ++ )  </span><br><span class="line">             <span class="comment">//  运行刚才建立的100个线程   </span></span><br><span class="line">            threads[i].start();  </span><br><span class="line">         <span class="keyword">for</span>  ( <span class="keyword">int</span>  i  =   <span class="number">0</span> ; i  &lt;  threads.length; i ++ )  </span><br><span class="line">             <span class="comment">//  100个线程都执行完后继续   </span></span><br><span class="line">            threads[i].join();  </span><br><span class="line">        System.out.println( <span class="string">" n= "</span>   +  JoinThread.n);  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果对n的操作是原子级别的，最后输出的结果应该为n=1000，而在执行上面积代码时，很多时侯输出的n都小于1000，这说明n=n+1不是原子级别的操作。原因是声明为volatile的简单变量如果当前值由该变量以前的值相关，那么volatile关键字不起作用，也就是说如下的表达式都不是原子操作： </p>
<p>n  =  n  +   1 ;<br>n ++ ;<br>如果要想使这种情况变成原子操作，需要使用synchronized关键字，如上的代码可以改成如下的形式：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span>   <span class="class"><span class="keyword">class</span>  <span class="title">JoinThread</span>  <span class="keyword">extends</span>  <span class="title">Thread</span>  </span></span><br><span class="line"><span class="class"></span>&#123;  </span><br><span class="line">     <span class="keyword">public</span>   <span class="keyword">static</span> <span class="keyword">int</span>  n  =   <span class="number">0</span> ;  </span><br><span class="line">  </span><br><span class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">static</span>   <span class="keyword">synchronized</span>   <span class="keyword">void</span>  <span class="title">inc</span><span class="params">()</span>  </span></span><br><span class="line"><span class="function">    </span>&#123;  </span><br><span class="line">        n ++ ;  </span><br><span class="line">    &#125;  </span><br><span class="line">     <span class="function"><span class="keyword">public</span>   <span class="keyword">void</span>  <span class="title">run</span><span class="params">()</span>  </span></span><br><span class="line"><span class="function">    </span>&#123;  </span><br><span class="line">         <span class="keyword">for</span>  ( <span class="keyword">int</span>  i  =   <span class="number">0</span> ; i  &lt;   <span class="number">10</span> ; i ++ )  </span><br><span class="line">             <span class="keyword">try</span>   </span><br><span class="line">            &#123;  </span><br><span class="line">                inc();  <span class="comment">//  n = n + 1 改成了 inc();   </span></span><br><span class="line">                sleep( <span class="number">3</span> );  <span class="comment">//  为了使运行结果更随机，延迟3毫秒   </span></span><br><span class="line">  </span><br><span class="line">            &#125;  </span><br><span class="line">             <span class="keyword">catch</span>  (Exception e)  </span><br><span class="line">            &#123;  </span><br><span class="line">            &#125;  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">     <span class="function"><span class="keyword">public</span>   <span class="keyword">static</span>   <span class="keyword">void</span>  <span class="title">main</span><span class="params">(String[] args)</span>  <span class="keyword">throws</span>  Exception  </span></span><br><span class="line"><span class="function">    </span>&#123;  </span><br><span class="line">  </span><br><span class="line">        Thread threads[]  =   <span class="keyword">new</span>  Thread[ <span class="number">100</span> ];  </span><br><span class="line">         <span class="keyword">for</span>  ( <span class="keyword">int</span>  i  =   <span class="number">0</span> ; i  &lt;  threads.length; i ++ )  </span><br><span class="line">             <span class="comment">//  建立100个线程   </span></span><br><span class="line">            threads[i]  =   <span class="keyword">new</span>  JoinThread();  </span><br><span class="line">         <span class="keyword">for</span>  ( <span class="keyword">int</span>  i  =   <span class="number">0</span> ; i  &lt;  threads.length; i ++ )  </span><br><span class="line">             <span class="comment">//  运行刚才建立的100个线程   </span></span><br><span class="line">            threads[i].start();  </span><br><span class="line">         <span class="keyword">for</span>  ( <span class="keyword">int</span>  i  =   <span class="number">0</span> ; i  &lt;  threads.length; i ++ )  </span><br><span class="line">             <span class="comment">//  100个线程都执行完后继续   </span></span><br><span class="line">            threads[i].join();  </span><br><span class="line">        System.out.println( <span class="string">" n= "</span>   +  JoinThread.n);  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面的代码将n=n+1改成了inc()，其中inc方法使用了synchronized关键字进行方法同步。因此，在使用volatile关键字时要慎重，并不是只要简单类型变量使用volatile修饰，对这个变量的所有操作都是原来操作，当变量的值由自身的上一个决定时，如n=n+1、n++ 等，volatile关键字将失效，只有当变量的值和自身上一个值无关时对该变量的操作才是原子级别的，如n = m + 1，这个就是原级别的。所以在使用volatile关键时一定要谨慎，如果自己没有把握，可以使用synchronized来代替volatile。 </p>
<h3 id="什么是线程局部变量"><a href="#什么是线程局部变量" class="headerlink" title="什么是线程局部变量"></a>什么是线程局部变量</h3><p>线程局部变量是局限于线程内部的变量，属于线程自身所有，不在多个线程间共享。Java 提供 ThreadLocal 类来支持线程局部变量，是一种实现线程安全的方式。但是在管理环境下（如 web 服务器）使用线程局部变量的时候要特别小心，在这种情况下，工作线程的生命周期比任何应用变量的生命周期都要长。任何线程局部变量一旦在工作完成后没有释放，Java 应用就存在内存泄露的风险。</p>
<h3 id="HTTP协议"><a href="#HTTP协议" class="headerlink" title="HTTP协议"></a>HTTP协议</h3><p>超文本传输协议（HTTP，HyperText Transfer Protocol)是互联网上应用最为广泛的一种网络协议。所有的WWW文件都必须遵守这个标准。http请求要依赖socket。<br>请求头 包含get方式时url中参数<br>请求行<br>空格<br>请求体 包含post方式时提交的参数<br>HTTP的请求：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 200 OK                --响应行</span><br><span class="line">Server: Apache-Coyote/1.1         --响应头（key-vaule）</span><br><span class="line">Content-Length: 24 </span><br><span class="line">Date: Fri, 30 Jan 2015 01:54:57 GMT</span><br><span class="line">                                   --一个空行</span><br><span class="line">this is hello servlet!!!                  --实体内容</span><br></pre></td></tr></table></figure>
<p>l   请求方法URI协议/版本(请求行)<br>l   请求头(Request Header)<br>l   请求正文<br>下面是一个HTTP请求的例子：<br>GET/sample.jspHTTP/1.1</p>
<p>Accept:image/gif.image/jpeg,<em>/</em><br>Accept-Language:zh-cn<br>Connection:Keep-Alive<br>Host:localhost<br>User-Agent:Mozila/4.0(compatible;MSIE5.01;Window NT5.0)<br>Accept-Encoding:gzip,deflate</p>
<p>username=jinqiao&amp;password=1234</p>
<p>HTTP应答与HTTP请求相似，HTTP响应也由3个部分构成，分别是：<br>l 　状态行<br>l 　响应头(Response Header)<br>l 　响应正文<br>在接收和解释请求消息后，服务器会返回一个HTTP响应消息。<br>状态行由协议版本、数字形式的状态代码、及相应的状态描述，各元素之间以空格分隔。<br>格式:    HTTP-Version Status-Code Reason-Phrase CRLF<br>例如:    HTTP/1.1 200 OK \r\n</p>
<h4 id="浏览器Request-Header和Response-Header的内容"><a href="#浏览器Request-Header和Response-Header的内容" class="headerlink" title="浏览器Request Header和Response Header的内容"></a>浏览器Request Header和Response Header的内容</h4><p>1)请求(客户端-&gt;服务端[request])<br>    GET(请求的方式) /newcoder/hello.html(请求的目标资源) HTTP/1.1(请求采用的协议和版本号)<br>    Accept: <em>/</em>(客户端能接收的资源类型)<br>    Accept-Language: en-us(客户端接收的语言类型)<br>    Connection: Keep-Alive(维护客户端和服务端的连接关系)<br>    Host: localhost:8080(连接的目标主机和端口号)<br>    Referer: <a href="http://localhost/links.asp(告诉服务器我来自于哪里)" target="_blank" rel="noopener">http://localhost/links.asp(告诉服务器我来自于哪里)</a><br>    User-Agent: Mozilla/4.0(客户端版本号的名字)<br>    Accept-Encoding: gzip, deflate(客户端能接收的压缩数据的类型)<br>    If-Modified-Since: Tue, 11 Jul 2000 18:23:51 GMT(缓存时间)<br>    Cookie(客户端暂存服务端的信息)<br>    Date: Tue, 11 Jul 2000 18:23:51 GMT(客户端请求服务端的时间)<br>2)响应(服务端-&gt;客户端[response])<br>    HTTP/1.1(响应采用的协议和版本号) 200(状态码) OK(描述信息)<br>    Location: <a href="http://www.baidu.com(服务端需要客户端访问的页面路径)" target="_blank" rel="noopener">http://www.baidu.com(服务端需要客户端访问的页面路径)</a><br>    Server:apache tomcat(服务端的Web服务端名)<br>    Content-Encoding: gzip(服务端能够发送压缩编码类型)<br>    Content-Length: 80(服务端发送的压缩数据的长度)<br>    Content-Language: zh-cn(服务端发送的语言类型)<br>    Content-Type: text/html; charset=GB2312(服务端发送的类型及采用的编码方式)<br>    Last-Modified: Tue, 11 Jul 2000 18:23:51 GMT(服务端对该资源最后修改的时间)<br>    Refresh: 1;url=<a href="http://www.it315.org(服务端要求客户端1秒钟后，刷新，然后访问指定的页面路径)" target="_blank" rel="noopener">http://www.it315.org(服务端要求客户端1秒钟后，刷新，然后访问指定的页面路径)</a><br>    Content-Disposition: attachment; filename=aaa.zip(服务端要求客户端以下载文件的方式打开该文件)<br>    Transfer-Encoding: chunked(分块传递数据到客户端）<br>    Set-Cookie:SS=Q0=5Lb_nQ; path=/search(服务端发送到客户端的暂存数据)<br>    Expires: -1//3种(服务端禁止客户端缓存页面数据)<br>    Cache-Control: no-cache(服务端禁止客户端缓存页面数据)<br>    Pragma: no-cache(服务端禁止客户端缓存页面数据)<br>    Connection: close(1.0)/(1.1)Keep-Alive(维护客户端和服务端的连接关系)  </p>
<h4 id="状态码"><a href="#状态码" class="headerlink" title="状态码"></a>状态码</h4><iframe width="100%" src="https://tool.oschina.net/commons?type=5"></iframe>

<h4 id="http协议缓存机制"><a href="#http协议缓存机制" class="headerlink" title="http协议缓存机制"></a>http协议缓存机制</h4><p>Http 缓存机制作为 web 性能优化的重要手段，对于从事 Web 开发的同学们来说，应该是知识体系库中的一个基础环节，同时对于有志成为前端架构师的同学来说是必备的知识技能。<br>但是对于很多前端同学来说，仅仅只是知道浏览器会对请求的静态文件进行缓存，但是为什么被缓存，缓存是怎样生效的，却并不是很清楚。<br>在此，我会尝试用简单明了的文字，像大家系统的介绍HTTP缓存机制，期望对各位正确的理解前端缓存有所帮助。</p>
<h5 id="缓存规则"><a href="#缓存规则" class="headerlink" title="缓存规则"></a>缓存规则</h5><p>为方便大家理解，我们认为浏览器存在一个缓存数据库,用于存储缓存信息。<br>在客户端第一次请求数据时，此时缓存数据库中没有对应的缓存数据，需要请求服务器，服务器返回后，将数据存储至缓存数据库中</p>
<p><img src="https://volcfamily.cn/images/interview-question/c1.png" alt="c1"></p>
<p>HTTP缓存有多种规则，根据是否需要重新向服务器发起请求来分类，我将其分为两大类(<font color="red">强制缓存</font>，<font color="red">对比缓存</font>)<br>在详细介绍这两种规则之前，先通过时序图的方式，让大家对这两种规则有个简单了解。</p>
<p>已存在缓存数据时，仅基于强制缓存，请求数据的流程如下<br><img src="https://volcfamily.cn/images/interview-question/c2.png" alt="c2"><br>已存在缓存数据时，仅基于对比缓存，请求数据的流程如下<br><img src="https://volcfamily.cn/images/interview-question/c4.png" alt="c4"></p>
<p>我们可以看到两类缓存规则的不同，强制缓存如果生效，不需要再和服务器发生交互，而对比缓存不管是否生效，都需要与服务端发生交互。<br>两类缓存规则可以同时存在，强制缓存优先级高于对比缓存，也就是说，当执行强制缓存的规则时，如果缓存生效，直接使用缓存，不再执行对比缓存规则</p>
<h5 id="强制缓存"><a href="#强制缓存" class="headerlink" title="强制缓存"></a>强制缓存</h5><p>从上文我们得知，强制缓存，在缓存数据未失效的情况下，可以直接使用缓存数据，那么浏览器是如何判断缓存数据是否失效呢？<br>我们知道，在没有缓存数据的时候，浏览器向服务器请求数据时，<font color="red">服务器会将数据和缓存规则一并返回，缓存规则信息包含在响应header中</font>。<br>对于强制缓存来说，响应header中会有两个字段来标明失效规则（Expires/Cache-Control）<br>使用chrome的开发者工具，可以很明显的看到对于强制缓存生效时，网络请求的情况</p>
<h6 id="Expires"><a href="#Expires" class="headerlink" title="Expires"></a>Expires</h6><p>Expires的值为服务端返回的到期时间，即下一次请求时，请求时间小于服务端返回的到期时间，直接使用缓存数据。<br>不过Expires 是HTTP 1.0的东西，现在默认浏览器均默认使用HTTP 1.1，所以它的作用基本忽略。<br>另一个问题是，到期时间是由服务端生成的，但是客户端时间可能跟服务端时间有误差，这就会导致缓存命中的误差。<br>所以HTTP 1.1 的版本，使用Cache-Control替代。</p>
<h6 id="Cache-Control"><a href="#Cache-Control" class="headerlink" title="Cache-Control"></a>Cache-Control</h6><p>Cache-Control 是最重要的规则。常见的取值有private、public、no-cache、max-age，no-store，默认为private。<br>private:             客户端可以缓存<br>public:              客户端和代理服务器都可缓存（前端的同学，可以认为public和private是一样的）<br>max-age=xxx:   缓存的内容将在 xxx 秒后失效<br>no-cache:          需要使用对比缓存来验证缓存数据（后面介绍）<br>no-store:           所有内容都不会缓存，强制缓存，对比缓存都不会触发（对于前端开发来说，缓存越多越好，so…基本上和它说886）<br>举个板栗<br><img src="https://volcfamily.cn/images/interview-question/c6.png" alt="c6"><br>图中Cache-Control仅指定了max-age，所以默认为private，缓存时间为31536000秒（365天）<br>也就是说，在365天内再次请求这条数据，都会直接获取缓存数据库中的数据，直接使用。</p>
<h5 id="对比缓存"><a href="#对比缓存" class="headerlink" title="对比缓存"></a>对比缓存</h5><p>对比缓存，顾名思义，需要进行比较判断是否可以使用缓存。<br>浏览器第一次请求数据时，服务器会将缓存标识与数据一起返回给客户端，客户端将二者备份至缓存数据库中。<br>再次请求数据时，客户端将备份的缓存标识发送给服务器，服务器根据缓存标识进行判断，判断成功后，返回304状态码，通知客户端比较成功，可以使用缓存数据。</p>
<p>第一次访问：<br><img src="https://volcfamily.cn/images/interview-question/c7.png" alt="c7"></p>
<p>第二次访问：<br><img src="https://volcfamily.cn/images/interview-question/c8.png" alt="c8"></p>
<p>通过两图的对比，我们可以很清楚的发现，在对比缓存生效时，状态码为304，并且报文大小和请求时间大大减少。<br>原因是，服务端在进行标识比较后，只返回header部分，通过状态码通知客户端使用缓存，不再需要将报文主体部分返回给客户端。<br>对于对比缓存来说，缓存标识的传递是我们着重需要理解的，它在请求header和响应header间进行传递，<br>一共分为两种标识传递，接下来，我们分开介绍。</p>
<h6 id="Last-Modified-If-Modified-Since"><a href="#Last-Modified-If-Modified-Since" class="headerlink" title="Last-Modified/If-Modified-Since"></a>Last-Modified/If-Modified-Since</h6><p>Last-Modified：<br>服务器在响应请求时，告诉浏览器资源的最后修改时间。<br><img src="https://volcfamily.cn/images/interview-question/c9.png" alt="c9"></p>
<p>If-Modified-Since：<br>再次请求服务器时，通过此字段通知服务器上次请求时，服务器返回的资源最后修改时间。<br>服务器收到请求后发现有头If-Modified-Since 则与被请求资源的最后修改时间进行比对。<br>若资源的最后修改时间大于If-Modified-Since，说明资源又被改动过，则响应整片资源内容，返回状态码200；<br>若资源的最后修改时间小于或等于If-Modified-Since，说明资源无新修改，则响应HTTP 304，告知浏览器继续使用所保存的cache。<br><img src="https://volcfamily.cn/images/interview-question/c10.png" alt="c10"></p>
<h6 id="Etag-If-None-Match"><a href="#Etag-If-None-Match" class="headerlink" title="Etag/If-None-Match"></a>Etag/If-None-Match</h6><p>优先级高于Last-Modified  /  If-Modified-Since<br>Etag：<br>服务器响应请求时，告诉浏览器当前资源在服务器的唯一标识（生成规则由服务器决定）。<br><img src="https://volcfamily.cn/images/interview-question/c11.png" alt="c11"></p>
<p>If-None-Match：<br>再次请求服务器时，通过此字段通知服务器客户段缓存数据的唯一标识。<br>服务器收到请求后发现有头If-None-Match 则与被请求资源的唯一标识进行比对，<br>不同，说明资源又被改动过，则响应整片资源内容，返回状态码200；<br>相同，说明资源无新修改，则响应HTTP 304，告知浏览器继续使用所保存的cache。<br><img src="https://volcfamily.cn/images/interview-question/c12.png" alt="c12"><br>总结<br>对于强制缓存，服务器通知浏览器一个缓存时间，在缓存时间内，下次请求，直接用缓存，不在时间内，执行比较缓存策略。<br>对于比较缓存，将缓存信息中的Etag和Last-Modified通过请求发送给服务器，由服务器校验，返回304状态码时，浏览器直接使用缓存。</p>
<p>浏览器第一次请求：<br><img src="https://volcfamily.cn/images/interview-question/c13.png" alt="c13"></p>
<p>浏览器再次请求时：<br><img src="https://volcfamily.cn/images/interview-question/c14.png" alt="c14"></p>
<h3 id="GET和POST的区别"><a href="#GET和POST的区别" class="headerlink" title="GET和POST的区别"></a>GET和POST的区别</h3><p>（1）get浏览器会保存历史记录缓存，post不保存<br>（1）   在客户端，Get方式在通过URL提交数据，数据在URL中可以看到；POST方式，数据放置在HTML HEADER内提交。<br>（2） 对于get方式，服务器端用Request.QueryString获取变量的值，对于post方式，服务器端用Request.Form获取提交的数据。<br>（2）   GET方式提交的数据最多只能有1024字节(1K)，而POST则没有此限制。<br>（3）   安全性问题。正如在（1）中提到，使用 Get 的时候，参数会显示在地址栏上，而 Post 不会。所以，如果这些数据是中文数据而且是非敏感数据，那么使用 get；如果用户输入的数据不是中文字符而且包含敏感数据，那么还是使用 post为好。<br>（4） 如果GET请求的表单action属性中已经包含参数，浏览器会直接将其过滤掉，再附加form表单数据</p>
<h3 id="TCP和UDP的异同"><a href="#TCP和UDP的异同" class="headerlink" title="TCP和UDP的异同"></a>TCP和UDP的异同</h3><p>TCP和UDP：传输层协议；<br>HTTP：应用层协议；<br>SOCKET：TCP/IP网络的API；</p>
<p>传输协议<br>通讯的规则<br>常见协议：TCP，UDP<br>在socket中使用tcp和udp<br>我的总结：<br>一、UDP:<br>                1、将数据源和目的地封装到数据包中，不需要建立连接<br>                2、每个数据包的大小限制在64k以内<br>                3、因无连接，是不可靠协议<br>                4、不需要建立连接，速度快</p>
<p>例子：聊天、对讲机就是UDP的，面向无连接（不管在不在，知不知道，只管发送，求速度），丢数据也不管。速度快。数据被分成包</p>
<p>二、TCP:<br>                1、建立连接，形成传输数据的通道<br>                2、在连接中进行大量数据的传输<br>                3、通过三次握手完成连接、是可靠协议<br>                4、必须建立连接，效率会稍低</p>
<p>例子：电话通话，必须连接，对方同意才可以发送数据（不然就等待），不能丢失数据。</p>
<h3 id="单例模式-饿汉与懒汉"><a href="#单例模式-饿汉与懒汉" class="headerlink" title="单例模式(饿汉与懒汉)"></a>单例模式(饿汉与懒汉)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 饿汉式单利模式</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Administrator</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Single</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> Single instance = <span class="keyword">new</span> Single();</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Single</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Single <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> instance;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method2</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"Single的mehtod2方法"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method3</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"Single的method3方法"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * lazy单例模式</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SingleLazy</span></span>&#123;</span><br><span class="line">		</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> SingleLazy instance = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="title">SingleLazy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> SingleLazy <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(instance == <span class="keyword">null</span>)&#123;</span><br><span class="line">			<span class="keyword">return</span> instance = <span class="keyword">new</span> SingleLazy();</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="keyword">return</span> instance;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="简述Socket"><a href="#简述Socket" class="headerlink" title="简述Socket"></a>简述Socket</h3><p>Socket<br>Socket就是为网络服务提供的一种机制。<br>通信的两端都有Socket。<br>网络通信其实就是Socket间的通信。<br>数据在两个Socket间通过IO传输。<br>SOCKET：TCP/IP网络的API<br>下面是示例程序的简单步骤说明<br>服务器端：<br>第一步：用指定的端口号和服务器的ip建立一个EndPoint对像；<br>第二步：建立一个Socket对像；<br>第三步：用socket对像的Bind()方法绑定EndPoint；<br>第四步：用socket对像的Listen()方法开始监听；<br>第五步：接受到客户端的连接，用socket对像的Accept()方法创建新的socket对像用于和请求的客户端进行通信;<br>第六步：通信结束后一定记得关闭socket;</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">using System;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using System.Text;</span><br><span class="line">using System.Net;</span><br><span class="line">using System.Net.Sockets;</span><br><span class="line"></span><br><span class="line">namespace server</span><br><span class="line">&#123;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Program</span></span></span><br><span class="line"><span class="class">     </span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span><span class="params">(string[] args)</span></span></span><br><span class="line"><span class="function">         </span>&#123;</span><br><span class="line">            <span class="keyword">int</span> port = <span class="number">2000</span>;</span><br><span class="line">            string host = <span class="string">"127.0.0.1"</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="comment">/**////创建终结点（EndPoint）</span></span><br><span class="line"><span class="comment">             IPAddress ip  = IPAddress.Parse(host);//把ip地址字符串转换为IPAddress类型的实例</span></span><br><span class="line"><span class="comment">             IPEndPoint ipe = new IPEndPoint(ip, port);//用指定的端口和ip初始化IPEndPoint类的新实例</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">            /**/</span><span class="comment">///创建socket并开始监听</span></span><br><span class="line">             Socket s　=　<span class="keyword">new</span> Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);<span class="comment">//创建一个socket对像，如果用udp协议，则要用SocketType.Dgram类型的套接字</span></span><br><span class="line">             s.Bind(ipe);<span class="comment">//绑定EndPoint对像（2000端口和ip地址）</span></span><br><span class="line">             s.Listen(<span class="number">0</span>);<span class="comment">//开始监听</span></span><br><span class="line">             Console.WriteLine(<span class="string">"等待客户端连接"</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="comment">/**////接受到client连接，为此连接建立新的socket，并接受信息</span></span><br><span class="line"><span class="comment">             Socket temp = s.Accept();//为新建连接创建新的socket</span></span><br><span class="line"><span class="comment">             Console.WriteLine("建立连接");</span></span><br><span class="line"><span class="comment">            string recvStr = "";</span></span><br><span class="line"><span class="comment">            byte[] recvBytes = new byte[1024];</span></span><br><span class="line"><span class="comment">            int bytes;</span></span><br><span class="line"><span class="comment">             bytes = temp.Receive(recvBytes, recvBytes.Length, 0);//从客户端接受信息</span></span><br><span class="line"><span class="comment">             recvStr += Encoding.ASCII.GetString(recvBytes, 0, bytes);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">            /**/</span><span class="comment">///给client端返回信息</span></span><br><span class="line">             Console.WriteLine(<span class="string">"server get message:&#123;0&#125;"</span>, recvStr);<span class="comment">//把客户端传来的信息显示出来</span></span><br><span class="line">            string sendStr = <span class="string">"ok!Client send message successful!"</span>;</span><br><span class="line">            <span class="keyword">byte</span>[] bs = Encoding.ASCII.GetBytes(sendStr);</span><br><span class="line">             temp.Send(bs, bs.Length, <span class="number">0</span>);<span class="comment">//返回信息给客户端</span></span><br><span class="line">             temp.Close();</span><br><span class="line">             s.Close();</span><br><span class="line">             Console.ReadLine();</span><br><span class="line">         &#125;</span><br><span class="line">       </span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>客户端：<br>第一步：用指定的端口号和服务器的ip建立一个EndPoint对像；<br>第二步：建立一个Socket对像；<br>第三步：用socket对像的Connect()方法以上面建立的EndPoint对像做为参数，向服务器发出连接请求；<br>第四步：如果连接成功，就用socket对像的Send()方法向服务器发送信息；<br>第五步：用socket对像的Receive()方法接受服务器发来的信息 ;<br>//获取服务端回传的数据<br>        InputStream is = sc.getInputStream();<br>第六步：通信结束后一定记得关闭socket；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">using System;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using System.Text;</span><br><span class="line">using System.Net;</span><br><span class="line">using System.Net.Sockets;</span><br><span class="line"></span><br><span class="line">namespace Client</span><br><span class="line">&#123;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Program</span></span></span><br><span class="line"><span class="class">     </span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span><span class="params">(string[] args)</span></span></span><br><span class="line"><span class="function">         </span>&#123;</span><br><span class="line">            <span class="keyword">try</span></span><br><span class="line">             &#123;</span><br><span class="line">                <span class="keyword">int</span> port = <span class="number">2000</span>;</span><br><span class="line">                string host = <span class="string">"127.0.0.1"</span>;</span><br><span class="line"></span><br><span class="line">                <span class="comment">/**////创建终结点EndPoint</span></span><br><span class="line"><span class="comment">                 IPAddress ip = IPAddress.Parse(host);</span></span><br><span class="line"><span class="comment">                //IPAddress ipp = new IPAddress("127.0.0.1");</span></span><br><span class="line"><span class="comment">                 IPEndPoint ipe = new IPEndPoint(ip, port);//把ip和端口转化为IPEndpoint实例</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">                /**/</span><span class="comment">///创建socket并连接到服务器</span></span><br><span class="line">                 Socket c = <span class="keyword">new</span> Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);<span class="comment">//创建Socket</span></span><br><span class="line">                 Console.WriteLine(<span class="string">"Conneting…"</span>);</span><br><span class="line">                 c.Connect(ipe);<span class="comment">//连接到服务器</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                <span class="comment">/**////向服务器发送信息</span></span><br><span class="line"><span class="comment">                string sendStr = "hello!This is a socket test";</span></span><br><span class="line"><span class="comment">                byte[] bs = Encoding.ASCII.GetBytes(sendStr);//把字符串编码为字节</span></span><br><span class="line"><span class="comment">                 Console.WriteLine("Send Message");</span></span><br><span class="line"><span class="comment">                 c.Send(bs, bs.Length, 0);//发送信息</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">                /**/</span><span class="comment">///接受从服务器返回的信息</span></span><br><span class="line">                string recvStr = <span class="string">""</span>;</span><br><span class="line">                <span class="keyword">byte</span>[] recvBytes = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">                <span class="keyword">int</span> bytes;</span><br><span class="line">                 bytes = c.Receive(recvBytes, recvBytes.Length, <span class="number">0</span>);<span class="comment">//从服务器端接受返回信息</span></span><br><span class="line">                 recvStr += Encoding.ASCII.GetString(recvBytes, <span class="number">0</span>, bytes);</span><br><span class="line">                 Console.WriteLine(<span class="string">"client get message:&#123;0&#125;"</span>, recvStr);<span class="comment">//显示服务器返回信息</span></span><br><span class="line"></span><br><span class="line">                <span class="comment">/**////一定记着用完socket后要关闭</span></span><br><span class="line"><span class="comment">                 c.Close();</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">             &#125;</span></span><br><span class="line"><span class="comment">            catch (ArgumentNullException e)</span></span><br><span class="line"><span class="comment">             &#123;</span></span><br><span class="line"><span class="comment">                 Console.WriteLine("argumentNullException: &#123;0&#125;", e);</span></span><br><span class="line"><span class="comment">             &#125;</span></span><br><span class="line"><span class="comment">            catch (SocketException e)</span></span><br><span class="line"><span class="comment">             &#123;</span></span><br><span class="line"><span class="comment">                 Console.WriteLine("SocketException:&#123;0&#125;", e);</span></span><br><span class="line"><span class="comment">             &#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">             Console.WriteLine("Press Enter to Exit");</span></span><br><span class="line"><span class="comment">         &#125;</span></span><br><span class="line"><span class="comment">     &#125;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="TCP-服务器的工作流程"><a href="#TCP-服务器的工作流程" class="headerlink" title="TCP 服务器的工作流程"></a>TCP 服务器的工作流程</h3><ol>
<li>服务器调用 socket() 创建 socket;</li>
<li>服务器调用 bind() 绑定端口和 ip;</li>
<li>服务器调用 listen() 设置缓冲区;</li>
<li>服务器调用 accept() 接收客户端的连接请求建立连接, 生成一个新的 socket;</li>
<li>服务器与客户端建立好连接之后, 就可以通过 send()/recv() 向客户端发送或者接收客户端的数据;</li>
<li>服务器调用 close() 关闭 socket.<br>客户端工作流程:</li>
<li>客户端调用 socket() 创建 socket;</li>
<li>客户端调用 connect() 向服务器发去连接请求以建立连接;</li>
<li>客户端与服务器建立连接之后, 就可以通过 send()/recv() 向服务器发送或者接收服务器的数据;</li>
<li>客户端调用 clos() 关闭 socket.</li>
</ol>
<p>TCP 服务器的工作流程:</p>
<ol>
<li>服务器调用 socket() 创建 socket;</li>
<li>服务器调用 bind() 绑定端口和 ip;</li>
<li>服务器调用 listen() 设置缓冲区;</li>
<li>服务器调用 accept() 接收客户端的连接请求建立连接, 生成一个新的 socket;</li>
<li>服务器与客户端建立好连接之后, 就可以通过 send()/recv() 向客户端发送或者接收客户端的数据;</li>
<li>服务器调用 close() 关闭 socket.<br>客户端工作流程:</li>
<li>客户端调用 socket() 创建 socket;</li>
<li>客户端调用 connect() 向服务器发去连接请求以建立连接;</li>
<li>客户端与服务器建立连接之后, 就可以通过 send()/recv() 向服务器发送或者接收服务器的数据;</li>
<li>客户端调用 clos() 关闭 socket</li>
</ol>
<h3 id="jdbc工作流程"><a href="#jdbc工作流程" class="headerlink" title="jdbc工作流程"></a>jdbc工作流程</h3><p>什么是JDBC<br>JDBC的全称是Java DataBase Connection，也就是Java数据库连接，我们可以用它来操作关系型数据库。JDBC接口及相关类在java.sql包和javax.sql包里。我们可以用它来连接数据库，执行SQL查询，存储过程，并处理返回的结果。<br>JDBC接口让Java程序和JDBC驱动实现了松耦合，使得切换不同的数据库变得更加简单</p>
<h4 id="工作原理"><a href="#工作原理" class="headerlink" title="工作原理"></a>工作原理</h4><p>1）获取数据库管理驱动。DriverManage  dm = Class.forName(“com.mysql.jdbc.Driver”);<br>2) 获取connection对象。Connection conn = dm.getConnection(String url, String user, String passWord);<br>3) 获取statement,createStatement();或者创建prepareStatement(sql)预编译对象。<br>4）执行<br>    execute();任何sql语句<br>    executeUpdate();执行DML;DDL语句<br>    executeQuery();返回ResualtSet结果集对象。<br>5）取出结果集对象中的数据，next(),first(),last()移动指针指向记录数。再使用getXxx()获取列数据<br>6）回收数据库资源，从后向前依次关闭ResualtSet，statement，connection对象。</p>
<h4 id="Statement、PreperStateent、CallableStatement之间的区别"><a href="#Statement、PreperStateent、CallableStatement之间的区别" class="headerlink" title="Statement、PreperStateent、CallableStatement之间的区别"></a>Statement、PreperStateent、CallableStatement之间的区别</h4><p>Statement(接口)<br>     |<br>PreparedStatement(接口)<br>     |<br>CallableStatement(接口)<br>以上三者为继承关系。<br>Statement:(用于执行不带参数的简单 SQL 语句)<br>    每次执行sql语句，数据库都要执行sql语句的编译，最好用于仅执行一次查询并返回结果的情形，效率高于PreparedStatement.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">String sql = <span class="string">"select seq_orderdetid.nextval as orderidfrom dual"</span>;</span><br><span class="line">    Statement stat1=conn.createStatement();</span><br><span class="line">    ResultSet rs1 = stat1.executeQuery(sql);</span><br><span class="line">    <span class="keyword">if</span> ( rs1.next() ) &#123;</span><br><span class="line">     id = rs1.getLong(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<p>PreparedStatement:(用于执行带或不带 IN 参数的预编译SQL 语句)<br>    执行的SQL语句中是可以带参数的,并支持批量执行SQL。由于采用Cache机制，则预先编译的语句，就会放在Cache中，下次执行相同SQL语句时，则可以直接从Cache中取出来。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">  方法一：</span><br><span class="line">    PreparedStatement pstmt  = con.prepareStatement(<span class="string">"UPDATE EMPLOYEES  SET SALARY = ? WHERE ID =?"</span>);</span><br><span class="line">    pstmt.setBigDecimal(<span class="number">1</span>, <span class="number">153833.00</span>);</span><br><span class="line">    pstmt.setInt(<span class="number">2</span>, <span class="number">110592</span>);</span><br><span class="line">pstmt. executeUpdate();</span><br><span class="line">  方法二：</span><br><span class="line">PreparedStatement pstmt  = con.prepareStatement(<span class="string">"UPDATE EMPLOYEES  SET SALARY = ? WHERE ID =?"</span>);</span><br><span class="line">   <span class="keyword">for</span>(<span class="keyword">int</span> i =<span class="number">0</span>;i&lt;length;i++)&#123;</span><br><span class="line">        pstmt.setBigDecimal(<span class="number">1</span>, param1[i]);</span><br><span class="line">        pstmt.setInt(<span class="number">2</span>, param2[i]);</span><br><span class="line">        pstmt.addBatch();</span><br><span class="line">    &#125;</span><br><span class="line">    pstmt. executeBatch();</span><br></pre></td></tr></table></figure></p>
<p>CallableStatement :(用于执行对数据库已存储过程的调用)<br>作为示例，下述代码先注册 OUT 参数，执行由 cstmt 所调用的已储存过程，然后检索在 OUT 参数中返回的值。方法 getByte 从第一个 OUT 参数中取出一个 Java 字节，而 getBigDecimal 从第二个 OUT 参数中取出一个 BigDecimal 对象（小数点后面带三位数）： </p>
<p>CallableStatement cstmt = con.prepareCall(<br>“{call getTestData(?, ?)}”);<br>cstmt.registerOutParameter(1, java.sql.Types.TINYINT);<br>cstmt.registerOutParameter(2, java.sql.Types.DECIMAL, 3);<br>cstmt.executeQuery();<br>byte x = cstmt.getByte(1);<br>java.math.BigDecimal n = cstmt.getBigDecimal(2, 3); </p>
<p>CallableStatement 与 ResultSet 不同，它不提供用增量方式检索大 OUT 值的特殊机制。</p>
<h4 id="注册驱动"><a href="#注册驱动" class="headerlink" title="注册驱动"></a>注册驱动</h4><p>//Class.forName(“com.mysql.jdbc.Driver”);<br>            //首先要导包,Class.forName(driver)的根本目的就是为了调用DriverManager.registerDriver。注册驱动<br>            //jdbc4已经不需要显式的调用Class.forName了，在jdbc4中，调用getConnection的时候DriverManager会自动去加载合适的驱动</p>
<h3 id="接口Statement中定义的execute方法的返回类型是-代表的含义-executeQuery方法返回的类型是-executeUpdate返回的类型是-代表的含义是"><a href="#接口Statement中定义的execute方法的返回类型是-代表的含义-executeQuery方法返回的类型是-executeUpdate返回的类型是-代表的含义是" class="headerlink" title="接口Statement中定义的execute方法的返回类型是? 代表的含义? executeQuery方法返回的类型是?  executeUpdate返回的类型是? 代表的含义是?"></a>接口Statement中定义的execute方法的返回类型是? 代表的含义? executeQuery方法返回的类型是?  executeUpdate返回的类型是? 代表的含义是?</h3><p>exectue<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testExecute</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">		Connection connection = JDBCUtils.getConnection();</span><br><span class="line">		String sql1 = <span class="string">"select * from admin"</span>;</span><br><span class="line">		Statement createStatement = connection.createStatement();</span><br><span class="line">		<span class="keyword">boolean</span> execute = createStatement.execute(sql1);<span class="comment">//表示是否成功返回了ResultSet对象</span></span><br><span class="line">		System.out.println(execute);</span><br><span class="line">		ResultSet resultSet = createStatement.getResultSet();</span><br><span class="line">		<span class="keyword">while</span>(resultSet.next())&#123;</span><br><span class="line">			System.out.println(resultSet.getString(<span class="number">1</span>));</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure></p>
<p>exetueQuery<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testExecuteQuery</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">		Connection connection = JDBCUtils.getConnection();</span><br><span class="line">		String sql = <span class="string">"select * from admin"</span>;</span><br><span class="line">		Statement createStatement = connection.createStatement();</span><br><span class="line">		ResultSet executeQuery = createStatement.executeQuery(sql);</span><br><span class="line">		<span class="keyword">while</span>(executeQuery.next())&#123;</span><br><span class="line">			System.out.println(executeQuery.getString(<span class="number">1</span>));</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure></p>
<p>executeUpdata<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testExecuteUpdata</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">	Connection connection = JDBCUtils.getConnection();</span><br><span class="line">	String sql = <span class="string">"INSERT INTO admin(id,userName) VALUES(4,'李四');"</span>;</span><br><span class="line">	Statement createStatement = connection.createStatement();</span><br><span class="line">	<span class="keyword">int</span> data = createStatement.executeUpdate(sql);<span class="comment">//影响几条数据</span></span><br><span class="line">	System.out.println(data);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="servlet工作流程"><a href="#servlet工作流程" class="headerlink" title="servlet工作流程"></a>servlet工作流程</h3><p>构造方法： 创建servlet对象的时候调用。tomcat创建servletConfig和servletContext接口的实现类对象standardWrapper和applicationContext。默认情况下，第一次访问servlet的时候创建servlet对象只调用1次。证明servlet对象在tomcat是单实例的。<br>init方法： 创建完servlet对象的时候调用。只调用1次。在service方法调用之前会创建request和response<br>service方法： 每次发出请求时调用。调用n次。<br>destroy方法： 销毁servlet对象的时候调用。停止服务器或者重新部署web应用时销毁servlet对象。只调用1次。</p>
<p>1）通过映射找到到servlet-class的内容，字符串： gz.itcast.a_servlet.FirstServlet<br>2）通过反射构造FirstServlet对象<br>    2.1 得到字节码对象<br>        Class clazz = class.forName(“gz.itcast.a_servlet.FirstServlet”);<br>    2.2 调用无参数的构造方法来构造对象<br>        Object obj = clazz.newInstance();     —1.servlet的构造方法被调用<br>3）创建ServletConfig对象，通过反射调用init方法<br>    3.1 得到方法对象<br>        Method m = clazz.getDeclareMethod(“init”,ServletConfig.class);//方法名和方法接收的对象类型(创建ServletConfig的class对象)<br>    3.2 调用方法<br>        m.invoke(obj,config);            –2.servlet的init方法被调用<br>4）创建request，response对象，通过反射调用service方法<br>    4.1 得到方法对象<br>        Methodm m =clazz.getDeclareMethod(“service”,HttpServletRequest.class,HttpServletResponse.class);<br>    4.2 调用方法<br>        m.invoke(obj,request,response);  –3.servlet的service方法被调用<br>5）当tomcat服务器停止或web应用重新部署，通过反射调用destroy方法<br>    5.1 得到方法对象<br>        Method m = clazz.getDeclareMethod(“destroy”,null);<br>    5.2 调用方法<br>        m.invoke(obj,null);          –4.servlet的destroy方法被调用</p>
<h3 id="重定向和转发"><a href="#重定向和转发" class="headerlink" title="重定向和转发"></a>重定向和转发</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ViewController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"viewTest"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">testForward</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        System.out.println(request.getParameter(<span class="string">"name"</span>));</span><br><span class="line">        <span class="comment">// 重定向</span></span><br><span class="line">        <span class="comment">//response.sendRedirect("/template/testJs.html");</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"/testJs.html"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 重定向</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/redirectTest"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedirectController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"redirectTest"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testForward</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 服务内部资源</span></span><br><span class="line"><span class="comment">//         String path = "/viewTest?name=1";</span></span><br><span class="line">        <span class="comment">// 服务外部资源</span></span><br><span class="line">        String path = <span class="string">"http://www.baidu.com"</span>;</span><br><span class="line">        response.sendRedirect(path);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.RequestDispatcher;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 转发</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/forwardTest"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ForwardController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"forwardTest"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testredirect</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 转发</span></span><br><span class="line">        RequestDispatcher rd = request.getRequestDispatcher(<span class="string">"/viewTest"</span>);</span><br><span class="line">        rd.forward(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>重定向<br>sendRedirect(“index.jsp”)<br>转发<br>forward(request, response)</p>
<p>区别：</p>
<ul>
<li>转发在服务器端完成的；重定向是在客户端完成的</li>
<li>转发的速度快；重定向速度慢</li>
<li>转发的是同一次请求；重定向是两次不同请求</li>
<li>转发地址栏没有变化；重定向地址栏有变化</li>
<li>转发必须是在同一台服务器下完成；重定向可以在不同的服务器下完成</li>
</ul>
<h3 id="Struts2的工作流程"><a href="#Struts2的工作流程" class="headerlink" title="Struts2的工作流程"></a>Struts2的工作流程</h3><p><img src="https://volcfamily.cn/images/interview-question/q.jpg" alt="q"></p>
<p>1 客户端初始化一个指向Servlet容器（例如Tomcat）的请求；<br>2 这个请求经过一系列的过滤器，struts核心过滤器StrutsPrepareAndExcuteFilter；<br>3 接着FilterDispatcher被调用，它是服务于controller(控制层)，FilterDispatcher询问ActionMapper来决定这个请是否需要调用某个Action，需要调用 ActionMapper返回一个收集Action详细信息的ActionMaping对象，给filterdispatcer；<br>4 FilterDispatcher把请求的处理交给ActionProxy；<br>5 FilterDispatcher将控制权委派给ActionProxy,ActionProxy调用配置管理器Configuration Manager（struts.xml），找到需要调用的Action类。例如上一篇的StrutsAction类就是Action类；<br>6接着ActionProxy创建一个ActionInvocation对象，ActionInvocation在调用Action之前会依次根据配置加载Action相关的所有拦截器（Interceptor ）；<br>7 一旦Action执行完毕，ActionInvocation负责根据struts.xml中的配置找到对应的返回结果；</p>
<p>优点：<br>    1.struts是基于MVC模式的。应用程序进行了明确的分层，使程序员更关注于业务逻辑的实现。<br>    2.struts有着丰富的taglib,则能大大提高开发效率<br>缺点：<br>1.需要配置forward的视图资源的转发和重定向。每一个action对象一个result。而且配置完成之后还要重新启动服务器tomcat<br>2.测试不方便</p>
<pre><code>每一个action都和web层耦合在一起，测试依赖于web容器，单元测试很难实现。
</code></pre><p>3.Struts 的Action必需是thread－safe方式，它仅仅允许一个实例去处理所有的请求。所以action用到的所有的资源都必需统一同步，这个就引起了线程安全的问题</p>
<ol start="4">
<li>对事件支持不够. 在struts中，实际是一个表单Form对应一个Action类(或DispatchAction)，换一句话说：在Struts中实际是一个表单只能对应一个事件，struts这种事件方式称为application event，application event和component event相比是一种粗粒度的事件。</li>
</ol>
<p>lock</p>
<h3 id="Struts常用标签"><a href="#Struts常用标签" class="headerlink" title="Struts常用标签"></a>Struts常用标签</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;s:textfield name=&quot;info.title&quot; cssClass=&quot;s_text&quot; id=&quot;infoTitle&quot;  cssStyle=&quot;width:160px;&quot;/&gt;</span><br></pre></td></tr></table></figure>
<p>if else<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;s:if test=&quot;%&#123;#session.SYS_USER.headImg != null &amp;&amp; #session.SYS_USER.headImg !=&apos;&apos;&#125;&quot;&gt;</span><br><span class="line">                            	&lt;img src=&quot;$&#123;ctx&#125;/upload/&lt;s:property value=&apos;#session.SYS_USER.headImg&apos;/&gt;&quot; width=&quot;70&quot; height=&quot;70&quot; /&gt;</span><br><span class="line">                            &lt;/s:if&gt;&lt;s:else&gt;</span><br><span class="line">								&lt;img src=&quot;$&#123;ctx&#125;/images/home/gs09.png&quot; width=&quot;70&quot; height=&quot;70&quot; /&gt;</span><br><span class="line">							&lt;/s:else&gt;</span><br></pre></td></tr></table></figure></p>
<p>url a<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;s:url var=&quot;infoViewUrl&quot; action=&quot;home_infoViewUI&quot; namespace=&quot;/sys&quot; &gt;</span><br><span class="line">                    	&lt;s:param name=&quot;info.infoId&quot;&gt;&lt;s:property value=&quot;infoId&quot;/&gt;&lt;/s:param&gt;</span><br><span class="line">                    &lt;/s:url&gt;</span><br><span class="line">                    &lt;s:a href=&quot;%&#123;#infoViewUrl&#125;&quot; target=&quot;_blank&quot;&gt;</span><br><span class="line">                    	&lt;s:property value=&quot;title&quot;/&gt;</span><br><span class="line">                   	&lt;/s:a&gt;</span><br></pre></td></tr></table></figure></p>
<p>iteroter<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;s:iterator value=&quot;#infoList&quot;&gt;</span><br><span class="line">                &lt;tr&gt;</span><br><span class="line">                    &lt;td height=&quot;23&quot;&gt;</span><br><span class="line">                    &lt;s:url var=&quot;infoViewUrl&quot; action=&quot;home_infoViewUI&quot; namespace=&quot;/sys&quot; &gt;</span><br><span class="line">                    	&lt;s:param name=&quot;info.infoId&quot;&gt;&lt;s:property value=&quot;infoId&quot;/&gt;&lt;/s:param&gt;</span><br><span class="line">                    &lt;/s:url&gt;</span><br><span class="line">                    &lt;s:a href=&quot;%&#123;#infoViewUrl&#125;&quot; target=&quot;_blank&quot;&gt;</span><br><span class="line">                    	&lt;s:property value=&quot;title&quot;/&gt;</span><br><span class="line">                   	&lt;/s:a&gt;</span><br><span class="line">                    &lt;/td&gt;</span><br><span class="line">                    &lt;td width=&quot;150px&quot;&gt;&lt;s:property value=&quot;#infoTypeMap[type]&quot;/&gt;&lt;/td&gt;</span><br><span class="line">                    &lt;td width=&quot;150px&quot;&gt;&lt;s:property value=&quot;creator&quot;/&gt;&lt;/td&gt;</span><br><span class="line">                    &lt;td width=&quot;150px&quot;&gt;&lt;s:date name=&quot;createTime&quot; format=&quot;yyyy-MM-dd HH:mm&quot;/&gt;&lt;/td&gt;</span><br><span class="line">                &lt;/tr&gt;</span><br><span class="line">                &lt;/s:iterator&gt;</span><br></pre></td></tr></table></figure></p>
<p>checkboxlist<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;td class=&quot;tdBg&quot; width=&quot;200px&quot;&gt;角色：&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;</span><br><span class="line">            	&lt;s:checkboxlist list=&quot;#roleList&quot; name=&quot;userRoleIds&quot; listKey=&quot;roleId&quot; listValue=&quot;name&quot;&gt;&lt;/s:checkboxlist&gt;</span><br><span class="line">            &lt;/td&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="struts-xml样式"><a href="#struts-xml样式" class="headerlink" title="struts.xml样式"></a>struts.xml样式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><br><span class="line">&lt;!DOCTYPE struts PUBLIC</span><br><span class="line">          &quot;-//Apache Software Foundation//DTD Struts Configuration 2.0//EN&quot;</span><br><span class="line">          &quot;http://struts.apache.org/dtds/struts-2.0.dtd&quot;&gt;</span><br><span class="line">&lt;struts&gt;</span><br><span class="line">    &lt;package name=&quot;firstStruts&quot; extends=&quot;struts-default&quot;&gt;</span><br><span class="line">    	&lt;action name=&quot;helloStruts&quot; class=&quot;cn.volc.struts.FirstStruts&quot; method=&quot;execute&quot;&gt;</span><br><span class="line">    		&lt;result name=&quot;success&quot;&gt;/jsp/success.jsp&lt;/result&gt;</span><br><span class="line">    	&lt;/action&gt;</span><br><span class="line">    &lt;/package&gt;  </span><br><span class="line">&lt;/struts&gt;</span><br></pre></td></tr></table></figure>
<h3 id="web-xml配置过滤器"><a href="#web-xml配置过滤器" class="headerlink" title="web.xml配置过滤器"></a>web.xml配置过滤器</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span><span class="meta">?&gt;</span></span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="attr">xmlns</span>=<span class="string">"http://java.sun.com/xml/ns/javaee"</span> <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"</span> <span class="attr">id</span>=<span class="string">"WebApp_ID"</span> <span class="attr">version</span>=<span class="string">"2.5"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>HelloStruts<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">  	<span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>struts2<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">  	<span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">  	<span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>struts2<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">  	<span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index.html<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index.htm<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index.jsp<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>default.html<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>default.htm<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>default.jsp<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="El表达式语言"><a href="#El表达式语言" class="headerlink" title="El表达式语言"></a>El表达式语言</h3><pre><code>用于页面取值，jsp页面取值的标准。(默认直接可以使用) (应用范围更广。)
</code></pre><h3 id="Ognl表达式语言"><a href="#Ognl表达式语言" class="headerlink" title="Ognl表达式语言"></a>Ognl表达式语言</h3><pre><code>struts标签默认支持的表达式语言。必须配置struts标签用，不能离开struts标签直接用。
</code></pre><h3 id="拦截器功能与过滤器功能类似"><a href="#拦截器功能与过滤器功能类似" class="headerlink" title="拦截器功能与过滤器功能类似"></a>拦截器功能与过滤器功能类似</h3><pre><code>区别：
    共同点： 都拦截资源！
    区别：
        过滤器，拦截器所有资源都可以；  (/index.jsp/servlet/img/css/js)
        拦截器，只拦截action请求。
            在strtus.xml文件中配置指定的拦截器。在拦截器类中可获取hibernate的session对象。再开始事物session.beginTransaction();
            再放行String result = invocation.invoke();去执行对应的action后再提交session.getTransaction().commit();
        拦截器是struts的概念，只能在struts中用。
        过滤器是servlet的概念，可以在struts项目、servlet项目用。
</code></pre><p>// 面试题： 拦截器什么时候执行？ (访问/启动)  先执行action类创建，先执行拦截器？<br>    // –》 1. 用户访问时候按顺序执行18个拦截器；<br>    //—》 2. 先执行Action类的创建，再执行拦截器； 最后拦截器执行完，再执行业务方法</p>
<h3 id="struct2的Interceptor有什么用？基于什么技术"><a href="#struct2的Interceptor有什么用？基于什么技术" class="headerlink" title="struct2的Interceptor有什么用？基于什么技术"></a>struct2的Interceptor有什么用？基于什么技术</h3><p>拦截器的设计，就是基于组件设计的应用！<br>拦截器是基于java的反射机制的，而过滤器是基于函数回调 。<br>2、过滤器依赖与servlet容器，而拦截器不依赖与servlet容器 。<br>3、拦截器只能对action请求起作用，而过滤器则可以对几乎所有的请求 起作用 。<br>4、拦截器可以访问action上下文、值栈里的对象，而过滤器不能 。<br>5、在action的生命周期中，拦截器可以多次被调用，而过滤器只能在容器初始化时被调用一次 </p>
<p>项目中用户权限的判定</p>
<h3 id="interceptor执行流程"><a href="#interceptor执行流程" class="headerlink" title="interceptor执行流程"></a>interceptor执行流程</h3><p>Struts2拦截器的实现原理相对简单，当请求struts2的action时，Struts 2会查找配置文件，并根据其配置实例化相对的拦截器对象，然后串成一个列表，最后一个一个地调用列表中的拦截器</p>
<p><img src="https://volcfamily.cn/images/interview-question/r.png" alt="r"></p>
<p>struts-default.xml文件中，定义了struts提供的所有拦截器！<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">//1. 定义拦截器以及拦截器栈</span><br><span class="line">&lt;interceptors&gt;</span><br><span class="line">    1.1 拦截器定义</span><br><span class="line">    &lt;interceptor name=&quot;&quot; class=&quot;&quot; /&gt; </span><br><span class="line">    </span><br><span class="line">    1.2 拦截器栈的定义</span><br><span class="line">    &lt;interceptor-stack name=&quot;defaultStack&quot;&gt;</span><br><span class="line">	引用了上面拦截器(1.1)</span><br><span class="line">    &lt;/interceptor-stack&gt;</span><br><span class="line">&lt;/interceptors&gt;</span><br><span class="line"></span><br><span class="line">2. 默认执行的拦截器(栈)</span><br><span class="line">&lt;default-interceptor-ref name=&quot;defaultStack&quot;/&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h3><h4 id="unicode"><a href="#unicode" class="headerlink" title="unicode"></a>unicode</h4><p>是一种编码方式，和ascii是同一个概念，而UTF是一种存储方式（格式）。<br>数据存储是以“字节”(Byte)为单位,数据传输是以“位”（bit）为单位，一个位就代表一个0或1（即二进制），每8个位（bit）组成一个字节（Byte）。1KB=1024B，1KB=1024Byte=1024*8bit<br>8位二进制数(表示一个字节)<br>1000  0000(-128)  -  1111  1111(-1)[8位二进制范围为255，用于ip地址：255.255.255.255]<br>字符与字节<br>ASCII码：一个英文字母（不分大小写）占一个字节的空间，一个中文汉字占两个字节的空间。<br>UTF-8编码：一个英文字符等于一个字节，一个中文（含繁体）等于二~四个字节。<br>Unicode编码：一个英文等于两个字节，一个中文（含繁体）等于两个字节。<br>符号：英文标点占一个字节，中文标点占两个字节。举例：英文句号“.”占1个字节的大小，中文句号“。”占2个字节的大小。</p>
<h4 id="sql语句"><a href="#sql语句" class="headerlink" title="sql语句"></a>sql语句</h4><p>DDL:数据定义语言INSERT /UPDATE/DELETE/<br>DML:数据操作语言CREATE/ALTER/DROP/TRUNCATE<br>DCL:数据控制语言grant/revoke</p>
<p>CREATE TABLE t_stu(<br>    id INT(4) PRIMARY KEY,<br>    userName VARCHAR(20),<br>    gender VARCHAR(4) DEFAULT ‘男’<br>)<br>DROP TABLE t_stu;<br>INSERT INTO t_stu(userName) VALUES(‘张三’);<br>INSERT INTO t_stu(gender,id,userName) VALUE(,2,’张三3’); – 会报错</p>
<h4 id="mysql分页"><a href="#mysql分页" class="headerlink" title="mysql分页"></a>mysql分页</h4><p>– 起始行从0开始<br>– 分页：当前页  每页显示多少条<br>– 分页查询当前页的数据的sql: SELECT <em> FROM student LIMIT (当前页-1)</em>每页显示多少条,每页显示多少条;</p>
<p>– 需求： 查询第1,2条记录（第1页的数据）<br>SELECT <em> FROM student LIMIT 0,2;<br>– 查询第3,4条记录（第2页的数据）<br>SELECT </em> FROM student LIMIT 2,2;</p>
<p>oracle分页</p>
<p>显示emp表中3-8条记录（方式一：使用集合减运算）<br>select rownum “伪列”,emp.<em> from emp where rownum&lt;=8<br>minus<br>select rownum,emp.</em> from emp where rownum&lt;=2;</p>
<p>显示emp表中3-8条记录（方式二：使用子查询，在from子句中使用，重点）<br>select xx.<em><br>from (select rownum ids,emp.</em> from emp where rownum&lt;=8) xx<br>where ids&gt;=2;<br>注意：在子查询中的别名，不可加””引号</p>
<h3 id="函数与存储过程使用场景"><a href="#函数与存储过程使用场景" class="headerlink" title="函数与存储过程使用场景"></a>函数与存储过程使用场景</h3><p>函数:<br>创建<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">create or replace function findEmpIncome(pempno in number) return number</span><br><span class="line">as</span><br><span class="line">	yearSal number;</span><br><span class="line">begin</span><br><span class="line">	select sal*12+NVL(comm,0) into yearSal from emp where empno=pempno;</span><br><span class="line">	return yearSal;</span><br><span class="line">end;</span><br><span class="line">/</span><br></pre></td></tr></table></figure></p>
<p>调用<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">declare</span><br><span class="line">	yearSal number;</span><br><span class="line">begin</span><br><span class="line">	yearSal := findEmpIncome(7369);</span><br><span class="line">	dbms_output.put_line(&apos;7369号员工的年薪是&apos; || yearSal);</span><br><span class="line">end;</span><br><span class="line">/</span><br></pre></td></tr></table></figure></p>
<p>过程：<br>创建<br>向emp表中插入数据<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">CREATE or replase procedure batchInsert</span><br><span class="line">as</span><br><span class="line">	i number(4) := 1; -- 循环插入999条数据，赋值：=</span><br><span class="line">begin</span><br><span class="line">	for i in 1...999</span><br><span class="line">	loop</span><br><span class="line">		insert into emp(empno,ename) values(I,”test”)</span><br><span class="line">	end loop</span><br><span class="line">end;</span><br><span class="line">/</span><br></pre></td></tr></table></figure></p>
<p>调用<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exec batchInsert;</span><br></pre></td></tr></table></figure></p>
<p>【适合使用】过程函数：<br>        》需要长期保存在数据库中<br>            》需要被多个用户重复调用<br>            》业务逻辑相同，只是参数不一样<br>        》批操作大量数据，例如：批量插入很多数据</p>
<p>函数：有且之有一个返回值时用函数<br>    过程：没有或有多个返回值时<br>过程函数使用场景：<br>    需要长期保存的数据<br>    需要被多个用户重复调用<br>    业务逻辑相同只是参数不一样<br>    批操作大量数据，例如：破凉插入跟多数据<br>SQL使用场景：<br>    分时上述反面，都可使用SQL<br>    对表，视图，序列，索引，等这些嗨哟要用SQL</p>
<h3 id="关于Oracle事务的总结"><a href="#关于Oracle事务的总结" class="headerlink" title="关于Oracle事务的总结"></a>关于Oracle事务的总结</h3><h4 id="什么是事务，事务的特性是什么"><a href="#什么是事务，事务的特性是什么" class="headerlink" title="什么是事务，事务的特性是什么"></a>什么是事务，事务的特性是什么</h4><p>事务的任务便是使数据库从一种状态变换成为另一种状态，这不同于文件系统，它是数据库所特用的。它的特性有四个：TOM总结为ACID即<br>原子性atomicity:语句级原子性，过程级原子性，事务级原子性<br>一致性consistency:状态一致，同一事务中不会有两种状态<br>隔离性isolation:事务间是互相分离的互不影响(这里可能也有自治事务)<br>持久性durability:事务提交了，那么状态就是永久的</p>
<p>回顾MySQL的事务开始：start transaction<br>Oracle的事务开始：第一条DML操作做为事务开始</p>
<p>Oracle的提交事务<br>（1）显示提交：commit<br>（2）隐藏提交：DDL/DCL/exit(sqlplus工具)<br>注意：提交是的从事务开始到事务提交中间的内容，提交到ORCL数据库中的DBF二进制文件<br>使用savepoint 回滚点，设置回滚点a<br>savepoint a;<br>使用rollback to savepoint，回滚到回滚点a处<br>rollback to savepoint a;</p>
<h4 id="PLSQL"><a href="#PLSQL" class="headerlink" title="PLSQL"></a>PLSQL</h4><pre><code>是专用于Oracle服务器，在SQL基础之上，添加了一些过程化控制语句，叫PLSQL
过程化包括有：类型定义，判断，循环，游标，异常或例外处理。。。
PLSQL强调过程
</code></pre><p>为什么要用PLSQL<br>     因为SQL是第四代命令式语言，无法显示处理过程化的业务，所以得用一个过程化程序设计语言来弥补SQL的不足之处，<br>     SQL和PLSQL不是替代关系，是弥补关系<br>PLSQL程序的完整组成结构如下：<br>     [declare]<br>          变量声明;<br>        变量声明;<br>     begin<br>          DML/TCL操作;<br>      DML/TCL操作;<br>     [exception]<br>          例外处理;<br>      例外处理;<br>     end;<br>     /<br>注意：在PLSQL程序中，；号表示每条语句的结束，/表示整个PLSQL程序结束</p>
<h3 id="触发器作用"><a href="#触发器作用" class="headerlink" title="触发器作用"></a>触发器作用</h3><p>需求定时插入：<br>create or replace trigger securityTigger<br>before<br>insert<br>on emp<br>declare<br>    pday varchar2(20);<br>    phour number(2);<br>begin<br>    select to_char(sysdate,’day’) into pday from dual;<br>    select to_char(sysdate,’hh24’) into phour from dual;<br>    if pday in(‘星期六’,’星期日’) or phour not between 7 and 23 then<br>        raise_application_error(‘-2000’,’非工作时间不能向emp表中插入数据’);<br>    end if;<br>end;<br>/</p>
<p>当操作了某张表时，希望同时触发一些动作/行为，可以使用触发器完成！！<br>例如： 当向员工表插入一条记录时，希望同时往日志表插入数据</p>
<h3 id="oracle-sql数据库的优化"><a href="#oracle-sql数据库的优化" class="headerlink" title="oracle sql数据库的优化"></a>oracle sql数据库的优化</h3><p>01）选择最有效率的表名顺序（笔试常考）<br>      ORACLE的解析器按照从右到左的顺序处理FROM子句中的表名，<br>      FROM子句中写在最后的表将被最先处理，<br>      在FROM子句中包含多个表的情况下,你必须选择记录条数最少的表放在最后，<br>      如果有3个以上的表连接查询,那就需要选择那个被其他表所引用的表放在最后。<br>      例如：查询员工的编号，姓名，工资，工资等级，部门名<br>      select emp.empno,emp.ename,emp.sal,salgrade.grade,dept.dname<br>      from salgrade,dept,emp<br>      where (emp.deptno = dept.deptno) and (emp.sal between salgrade.losal and salgrade.hisal)<br>      1)如果三个表是完全无关系的话，将记录和列名最少的表，写在最后，然后依次类推<br>      2)如果三个表是有关系的话，将引用最多的表，放在最后，然后依次类推</p>
<p>（02）WHERE子句中的连接顺序（笔试常考）<br>      ORACLE采用自右而左的顺序解析WHERE子句,根据这个原理,表之间的连接必须写在其他WHERE条件之左,<br>      那些可以过滤掉最大数量记录的条件必须写在WHERE子句的之右。<br>      例如：查询员工的编号，姓名，工资，部门名<br>      select emp.empno,emp.ename,emp.sal,dept.dname<br>      from emp,dept<br>      where (emp.deptno = dept.deptno) and (emp.sal &gt; 1500)</p>
<p>（03）SELECT子句中避免使用<em>号<br>      ORACLE在解析的过程中,会将</em>依次转换成所有的列名，这个工作是通过查询数据字典完成的，这意味着将耗费更多的时间<br>      select empno,ename from emp;</p>
<p>（04）使用DECODE函数来减少处理时间<br>      使用DECODE函数可以避免重复扫描相同记录或重复连接相同的表</p>
<p>（05）整合简单，无关联的数据库访问</p>
<p>（06）用TRUNCATE替代DELETE</p>
<p>（07）尽量多使用COMMIT<br>      因为COMMIT会释放回滚点</p>
<p>（08）用WHERE子句替换HAVING子句<br>      WHERE先执行，HAVING后执行</p>
<p>（09）多使用内部函数提高SQL效率</p>
<p>（10）使用表的别名<br>      salgrade s</p>
<p>（11）使用列的别名<br>      ename e</p>
<p>（12）用索引提高效率<br>      在查询中，善用索引</p>
<p>（13）字符串型，能用=号，不用like<br>      因为=号表示精确比较，like表示模糊比较 </p>
<p>（14）SQL语句用大写的<br>      因为Oracle服务器总是先将小写字母转成大写后，才执行<br>      在eclipse中，先写小写字母，再通过ctrl+shift+X转大写;ctrl+shift+Y转小写    </p>
<p>（15）避免在索引列上使用NOT<br>      因为Oracle服务器遇到NOT后，他就会停止目前的工作，转而执行全表扫描</p>
<p>（16）避免在索引列上使用计算<br>      WHERE子句中，如果索引列是函数的一部分，优化器将不使用索引而使用全表扫描，这样会变得变慢<br>      例如，SAL列上有索引，<br>      低效：<br>      SELECT EMPNO,ENAME<br>      FROM EMP<br>      WHERE SAL*12 &gt; 24000;<br>      高效：<br>      SELECT EMPNO,ENAME<br>      FROM EMP<br>      WHERE SAL &gt; 24000/12;</p>
<p>（17）用 &gt;= 替代 &gt;<br>      低效：<br>      SELECT <em> FROM EMP WHERE DEPTNO &gt; 3<br>      首先定位到DEPTNO=3的记录并且扫描到第一个DEPT大于3的记录<br>      高效：<br>      SELECT </em> FROM EMP WHERE DEPTNO &gt;= 4<br>      直接跳到第一个DEPT等于4的记录</p>
<p>（18）用IN替代OR<br>      select <em> from emp where sal = 1500 or sal = 3000 or sal = 800;<br>      select </em> from emp where sal in (1500,3000,800);</p>
<p>（19）总是使用索引的第一个列<br>      如果索引是建立在多个列上，只有在它的第一个列被WHERE子句引用时，优化器才会选择使用该索引<br>      当只引用索引的第二个列时，不引用索引的第一个列时，优化器使用了全表扫描而忽略了索引<br>      create index emp_sal_job_idex</p>
<pre><code>on emp(sal,job);
----------------------------------
select *
from emp  
where job != &apos;SALES&apos;;          
</code></pre><p>（20）避免改变索引列的类型，显示比隐式更安全<br>      当字符和数值比较时，ORACLE会优先转换数值类型到字符类型<br>      select 123 || ‘123’ from dual;</p>
<h3 id="oracle面试题"><a href="#oracle面试题" class="headerlink" title="oracle面试题"></a>oracle面试题</h3><hr>
<p>01）oracle10i，oracle11g，oracle12c，其它i,g,c什么意思？<br>    internet<br>    grit(网格运算)，多个服务器相连<br>    cloud云计算<br>02）sqlplus是什么意思？<br>    是oracle自带的一个oracle客户端工具，通过客户端自动连接服务端进行sql操作<br>03）oracle的对安装路径有什么要求，对硬件配置有什么要求？<br>    不能有中文或者字符串的目录，最好放在盘的根目录下<br>    硬件要求<br>        配置至少：<br>            CPU3核<br>            内存1G<br>            硬盘5G<br>04）什么是PLSQL？<br>    过程化结构查询语言，只能在oracle服务器中运行的语言<br>05）向表中如何插入’引号？<br>        ‘’’’<br>    通过以下代码：<br>    insert into emp(ename) values(‘’’’)–’代表转译<br>06）decode()函数的作用？<br>    是oracle专用的多条件判断函数，类似sql99case…end<br>07）union和union all的区别？<br>    union all表示两个集合中有相同的都取出<br>    union 表示取一个<br>08）delete和truncate和drop的区别？<br>    delete是DML语言可回滚可带where相对慢会产生碎片内容无结构有<br>    truncate是DDl语言不可回滚不可带where相对中内容无结构有<br>    drop是DDl语言不可回滚，不可待where内容无，结构无可以带purge关键字<br>09）oracle中为什么能回滚？<br>    回收站<br>    不是说所有的操作都能回滚只限于DML操作的数据暂时放在实例池中<br>    DML操作后会放入回滚区<br>    show recyclebin;<br>10）函数和过程的区别？<br>    函数：适合于有且只有一个返回值的情况<br>    过程：适合于无返回值或者两个及其以上的返回值的应用<br>11）序列的cache有什么作用？<br>    序列的目的是对主键提供为一个数值，但不一定是连续的<br>    有了cache机制后，那么主键可以直接从内存中获取，速度提高，默认是20个主键值<br>    可被多个表共享<br>12）简述用户，角色和权限的关系？<br>    多对多的关系<br>13）谈谈视图使用的场合？<br>    1.让不同角色用户只能访问该用户可以访问的内容不想让用户查看指定的数据<br>    2.简化复杂sql的编写，不能提高查询的效率<br>14）谈谈索引使用的场合？<br>       可以针对表中能找个的单个或多个字段创建索引，从而再根据该字段查询<br>15）谈谈悲观锁和乐观锁</p>
<h3 id="为什么需要锁（并发控制）"><a href="#为什么需要锁（并发控制）" class="headerlink" title="为什么需要锁（并发控制）"></a>为什么需要锁（并发控制）</h3><p>在多用户环境中，在同一时间可能会有<br>多个用户更新相同的记录，这会产生冲突。这就是著名的并发性问题。<br>典型的冲突有：</p>
<h4 id="丢失更新"><a href="#丢失更新" class="headerlink" title="丢失更新"></a>丢失更新</h4><p>一个事务的更新覆盖了其它事务的更新结果，就是所谓的更新丢失。例如：用户A把值从6改为2，用户B把值从2改为6，则用户A丢失了他的更新。</p>
<h4 id="脏读"><a href="#脏读" class="headerlink" title="脏读"></a>脏读</h4><p>脏读：事务T1更新了一行记录，还未提交所做的修改，这个T2读取了更新后的数据，然后这时T1执行回滚操作，取消刚才的修改，所以T2所读取的行就无效，也就是脏数据。一个事务读取另一个事务尚未提交的修改时，产生脏读很多数据库允许脏读以避免排它锁的竞争。<br>脏读(Dirty reads)为了解决这些并发带来的问题。 我们需要引入并发控制机制</p>
<h3 id="悲观锁"><a href="#悲观锁" class="headerlink" title="悲观锁"></a>悲观锁</h3><p>顾名思义，就是很悲观，每次去拿数据的时候都认为别人会修改，所以每次拿数据的时候都会上锁。这样别人拿数据的时候就要等待直到锁的释放。<br>Oracle的悲观锁需要利用一条现有的Connection，它分成两种方式，从SQL语句的区别来看，就是一种是select for update，一种是select for update nowait的形式。</p>
<ol>
<li>执行select xxx for update操作时，数据会被锁定，只有执行comit或rollover才会释放</li>
<li>执行select xxx for update nowait操作时，数据也会被锁定，其他人访问时或返回ORA-00054错误，内容是资源正忙，需要采取相应的业务措施进行处理。<br>缺点<br>虽然悲观锁应用起来很简单并且十分安全，与此同时却有两大问题：</li>
<li>锁定：应用的使用者选择一个记录进行更新，然后去吃午饭，但是没有结束或者丢弃该事务。这样其他所有需要更新该记录的用户就必须等待正在进行实务操作的用户回来并且完成该事务或者直到DBA杀掉该不愉快的事务并且释放锁。</li>
<li>死锁：用户A和B同时更新数据库。用户A锁定了一条记录并且试图请求用户B持有的锁，同时用户B也在等待获取用户A持有的锁。两个事务同时进入了无限等待状态即进入死锁状态。</li>
</ol>
<p>结论</p>
<ol>
<li>如果系统并发量不大且不允许脏读，可以使用悲观锁解决并发问题。</li>
<li>如果系统并发非常大的话，悲观锁会带来很大性能问题，所以一般采用乐观锁。</li>
<li>如果系统读比较多，写比较少，也应该使用乐观锁，可以提高吞吐量。</li>
</ol>
<h3 id="游标-cursor"><a href="#游标-cursor" class="headerlink" title="游标/cursor"></a>游标/cursor</h3><p>什么是光标/游标/cursor<br>类似于JDBC中的ResultSet对象的功能，从上向下依次获取每一记录的内容</p>
<p>使用无参光标cursor，查询所有员工的姓名和工资【如果需要遍历多条记录时，使用光标cursor，无记录找到使用cemp%notfound】<br>declare<br>    –定义游标<br>    cursor cemp is select ename,sal from emp;<br>    –定义变量<br>    vename emp.ename%type;<br>    vsal   emp.sal%type;<br>begin<br>    –打开游标，这时游标位于第一条记录之前<br>    open cemp;<br>    –循环<br>    loop<br>       –向下移动游标一次<br>       fetch cemp into vename,vsal;<br>       –退出循环,当游标下移一次后，找不到记录时，则退出循环<br>       exit when cemp%notfound;<br>       –输出结果<br>       dbms_output.put_line(vename||’——–’||vsal);<br>    end loop;<br>    –关闭游标<br>    close cemp;<br>end;<br>/</p>
<p>使用带参光标cursor，查询10号部门的员工姓名和工资<br>declare<br>    cursor cemp(pdeptno emp.deptno%type) is select ename,sal from emp where deptno=pdeptno;<br>    pename emp.ename%type;<br>    psal emp.sal%type;<br>begin<br>    open cemp(&amp;deptno);<br>    loop<br>        fetch cemp into pename,psal;<br>        exit when cemp%notfound;<br>        dbms_output.put_line(pename||’的薪水是’||psal);<br>    end loop;<br>    close cemp;<br>end;<br>/</p>
<p>使用无参光标cursor，真正给员工涨工资，ANALYST涨1000，MANAGER涨800，其它涨400，要求显示编号，姓名，职位，薪水<br>declare<br>    cursor cemp is select empno,ename,job,sal from emp;<br>    pempno emp.empno%type;<br>    pename emp.ename%type;<br>    pjob   emp.job%type;<br>    psal   emp.sal%type;<br>begin<br>    open cemp;<br>    loop<br>        fetch cemp into pempno,pename,pjob,psal;<br>        –循环退出条件一定要写<br>        exit when cemp%notfound;<br>        if pjob=’ANALYST’ then<br>            update emp set sal = sal + 1000 where empno = pempno;<br>        elsif pjob=’MANAGER’ then<br>            update emp set sal = sal + 800 where empno = pempno;<br>        else<br>        update emp set sal = sal + 400 where empno = pempno;<br>        end if;<br>    end loop;<br>    commit;<br>    close cemp;<br>end;<br>/</p>
<h3 id="oracle更新date类型数据"><a href="#oracle更新date类型数据" class="headerlink" title="oracle更新date类型数据"></a>oracle更新date类型数据</h3><p>update emp set HIREDATE = TO_DATE(‘2008 05 20’,’YYYY MM DD’) where sal=’800’;</p>
<h3 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h3><p>事务这概念是针对数据库来讲的，java在执行数据库操作的时候，需要保证数据完整性、一致性，在增删改的时候要做事务，事务可以说是一个过程。<br>这个过程只有两个结果，成功或者失败。<br>而spring中，一般是配置一个事务管理器，结合spring的aop（面向切面）特性，在比如在执行insert、update、delete为前缀或者后缀的方法时，就开启事务，在执行完毕后提交事务。</p>
<p>事务的4大特性<br>l 原子性：一个交易（transaction）中的所有操作，要么全部完成，要么全部不完成，不会结束在中间某个环节。事务在执行过程中发生错误，会被回滚（Rollback）到事务开始前的状态，就像这个事务从来没有执行过一样。<br>l 一致性：在事务开始之前和事务结束以后，数据库的完整性没有被破坏。这表示写入的资料必须完全符合所有的默认规则，这包含资料的精确度、串联性以及后续数据库可以自发性地完成预定的工作。<br>l 隔离性：当两个或者多个事务并发访问（此处访问指查询和修改的操作）数据库的同一数据时所表现出的相互关系。事务隔离分为不同级别，包括读未提交（Read uncommitted）、读提交（readcommitted）、可重复读（repeatable read）和串行化（Serializable）。<br>l 持久性：在事务完成以后，该事务对数据库所作的更改便持久地保存在数据库之中，并且是完全的。</p>
<h3 id="hibernate的工作流程"><a href="#hibernate的工作流程" class="headerlink" title="hibernate的工作流程"></a>hibernate的工作流程</h3><p>當您使用new建構Configuration物件時，會讀取Classpath路徑下的 hibernate.properties，如果您呼叫Configuration的configure()方法沒有指定路徑與檔案名稱時，則會再讀取 Classpath路徑下的hibernate.cfg.xml，如果有與hibernate.properties相同的屬性設定，則 hibernate.cfg.xml中的設定會覆蓋hibernate.properties中的設定。</p>
<p>1.通过Configuration config = new Configuration().configure();//读取并解析hibernate.cfg.xml配置文件<br>2.由hibernate.cfg.xml中的<mapping resource="com/xx/User.hbm.xml">读取并解析映射信息<br>3.通过SessionFactory sf = config.buildSessionFactory();//创建SessionFactory(buildSessionFactory关联了datasuorce)<br>//buildSessionFactory关联了hibernate.cfg.xml配置的session-factorys属性<br>        sf = new Configuration().configure().buildSessionFactory();<br>4.Session session = sf.openSession();//打开Sesssion<br>5.Transaction tx = session.beginTransaction();//创建并启动事务Transation<br>6.persistent operate//操作数据，持久化操作Query q = session.createQuery(“from Dept”);<br>7.tx.commit();//提交事务<br>8.关闭Session<br>9.关闭SesstionFactory<br>hibernate.cfg.xml配置文件样式<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE hibernate-configuration PUBLIC</span><br><span class="line">	&quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot;</span><br><span class="line">	&quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;</span><br><span class="line">&lt;hibernate-configuration&gt;</span><br><span class="line">	&lt;!-- 通常，一个session-factory节点代表一个数据库 --&gt;</span><br><span class="line">	&lt;session-factory&gt;</span><br><span class="line">		&lt;!-- 1. 数据库连接配置 --&gt;</span><br><span class="line">		&lt;property name=&quot;hibernate.connection.driver_class&quot;&gt;com.mysql.jdbc.Driver&lt;/property&gt;</span><br><span class="line">		&lt;property name=&quot;hibernate.connection.url&quot;&gt;jdbc:mysql:///hib_demo&lt;/property&gt;</span><br><span class="line">		&lt;property name=&quot;hibernate.connection.username&quot;&gt;root&lt;/property&gt;</span><br><span class="line">		&lt;property name=&quot;hibernate.connection.password&quot;&gt;root&lt;/property&gt;</span><br><span class="line">		&lt;!-- 数据库方法配置， hibernate在运行的时候，会根据不同的方言生成符合当前数据库语法的sql --&gt;</span><br><span class="line">		&lt;property name=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQL5Dialect&lt;/property&gt;</span><br><span class="line">		&lt;!-- 2. 其他相关配置 --&gt;</span><br><span class="line">		&lt;!-- 2.1 显示hibernate在运行时候执行的sql语句 --&gt;</span><br><span class="line">		&lt;property name=&quot;hibernate.show_sql&quot;&gt;true&lt;/property&gt;</span><br><span class="line">		&lt;!-- 2.2 格式化sql --&gt;</span><br><span class="line">		&lt;property name=&quot;hibernate.format_sql&quot;&gt;true&lt;/property&gt;</span><br><span class="line">		&lt;!-- 2.3 自动建表 --&gt;</span><br><span class="line">		&lt;property name=&quot;hibernate.hbm2ddl.auto&quot;&gt;update&lt;/property&gt;</span><br><span class="line">		&lt;!-- 3. 加载所有映射 &lt;mapping resource=&quot;cn/volc/hellohibernate/entity/User.hbm.xml&quot;/&gt; --&gt;</span><br><span class="line">	&lt;/session-factory&gt;</span><br><span class="line">&lt;/hibernate-configuration&gt;</span><br></pre></td></tr></table></figure></mapping></p>
<p>实体映射文件样式<br>User.hbm.xml<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE hibernate-mapping PUBLIC </span><br><span class="line">	&quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;</span><br><span class="line">	&quot;http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd&quot;&gt;</span><br><span class="line">	&lt;!-- 映射文件: 映射一个实体类对象； 描述一个对象最终实现可以直接保存对象数据到数据库中。 --&gt;</span><br><span class="line">	&lt;!-- package: 要映射的对象所在的包(可选,如果不指定,此文件所有的类都要指定全路径) auto-import 默认为true， 在写hql的时候自动导入包名 </span><br><span class="line">		如果指定为false, 再写hql的时候必须要写上类的全名； 如：session.createQuery(&quot;from cn.itcast.c_hbm_config.Employee&quot;).list(); </span><br><span class="line">	--&gt;</span><br><span class="line">&lt;hibernate-mapping package=&quot;cn.volc.hellohibernate.entity&quot;</span><br><span class="line">	auto-import=&quot;true&quot;&gt;</span><br><span class="line">	&lt;!-- class 映射某一个对象的(一般情况，一个对象写一个映射文件，即一个class节点) name 指定要映射的对象的类型 table </span><br><span class="line">		指定对象对应的表； 如果没有指定表名，默认与对象名称一样 </span><br><span class="line">	--&gt;</span><br><span class="line">	&lt;class name=&quot;User&quot; table=&quot;user&quot;&gt;</span><br><span class="line">		&lt;!-- 主键 ，映射 --&gt;</span><br><span class="line">		&lt;id name=&quot;id&quot; column=&quot;id&quot;&gt;</span><br><span class="line">			&lt;!-- 主键的生成策略 identity 自增长(mysql,db2) sequence 自增长(序列)， oracle中自增长是以序列方法实现 </span><br><span class="line">				native 自增长【会根据底层数据库自增长的方式选择identity或sequence】 如果是mysql数据库, 采用的自增长方式是identity </span><br><span class="line">				如果是oracle数据库， 使用sequence序列的方式实现自增长 increment 自增长(会有并发访问的问题，一般在服务器集群环境使用会存在问题。) </span><br><span class="line">				assigned 指定主键生成策略为手动指定主键的值 uuid 指定uuid随机生成的唯一的值 foreign (外键的方式， one-to-one讲) --&gt;</span><br><span class="line">			&lt;generator class=&quot;uuid&quot; /&gt;</span><br><span class="line">		&lt;/id&gt;</span><br><span class="line">		&lt;!-- 普通字段映射 property name 指定对象的属性名称 column 指定对象属性对应的表的字段名称，如果不写默认与对象属性一致。 </span><br><span class="line">			length 指定字符的长度, 默认为255 type 指定映射表的字段的类型，如果不指定会匹配属性的类型 java类型： 必须写全名 hibernate类型： </span><br><span class="line">			直接写类型，都是小写 --&gt;</span><br><span class="line">		&lt;property name=&quot;name&quot; column=&quot;name&quot; type=&quot;java.lang.String&quot;</span><br><span class="line">			length=&quot;20&quot;&gt;&lt;/property&gt;</span><br><span class="line">		&lt;!-- 如果列名称为数据库关键字，需要用反引号或改列名。 --&gt;</span><br><span class="line">		&lt;!-- &lt;property name=&quot;desc&quot; column=&quot;`desc`&quot; type=&quot;java.lang.String&quot;&gt;&lt;/property&gt; --&gt;</span><br><span class="line">	&lt;/class&gt;</span><br><span class="line">&lt;/hibernate-mapping&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="hibernate映射文件的作用"><a href="#hibernate映射文件的作用" class="headerlink" title="hibernate映射文件的作用"></a>hibernate映射文件的作用</h3><p>Hibernate映射文件是Hibernate与数据库进行持久化的桥梁</p>
<p>可根据主键查询(一般是id)，HibernateUtils.getSession.get(clazz, id);//这里的id指的是主键column字段名。<br>可根据非主键查询<br>        session = HibernateUtils.getSession();<br>        tx = session.beginTransaction();<br>        Query q =session.createQuery(“from Employee where empName=?”);<br>        // 注意：参数索引从0开始<br>        q.setParameter(0, employeeName);</p>
<h3 id="hibernate的反射"><a href="#hibernate的反射" class="headerlink" title="hibernate的反射"></a>hibernate的反射</h3><p>java的反射机制和上一篇JDBC都是hibernate框架的基本要素</p>
<p>反射机制的作用就是能够找到字段、方法和已加载类的构造函数的信息，并且能够应用反射域、方法和构造函数去操作各自的属性。<br>优点：</p>
<ol>
<li>对JDBC访问数据库的代码做了封装，大大简化了数据访问层繁琐的重复性代码。</li>
<li>Hibernate是一个基于JDBC的主流持久化框架，是一个优秀的ORM(Object-relationship-mapping对象关系映射)实现。他很大程度的简化DAO层的编码工作</li>
<li>hibernate使用Java反射机制，而不是字节码增强程序来实现透明性。</li>
<li>hibernate的性能非常好，因为它是个轻量级框架。映射的灵活性很出色。它支持各种关系数据库，从一对一到多对多的各种复杂关系。</li>
<li>Hibernate 使用 Java 反射机制 而不是字节码增强程序来实现透明性。</li>
<li>Hibernate 的性能非常好，因为它是个轻量级框架。 映射的灵活性很出色。</li>
<li>它支持各种关系数据库，从一对一到多对多的各种复杂关系。</li>
<li>在hibernate.hbm.xml中配可以自动创建表<br>缺点：(Hibernate何时不适用？)<br>1.hibernate在批量处理数据时具有弱势，使用循环遍历。</li>
</ol>
<h3 id="Hibernate是如何延迟加载"><a href="#Hibernate是如何延迟加载" class="headerlink" title="Hibernate是如何延迟加载"></a>Hibernate是如何延迟加载</h3><p>Hibernate 的延迟加载（lazy load）是一个被广泛使用的技术。这种延迟加载保证了应用只有在需要时才去数据库中抓取相应的记录。通过延迟加载技术可以避免过多、过早地加载数据表里的数据，从而降低应用的内存开销。Hibernate 的延迟加载本质上就是代理模式的应用，当程序通过 Hibernate 装载一个实体时，默认情况下，Hibernate 并不会立即抓取它的集合属性、关联实体所以对应的记录，而是通过生成一个代理来表示这些集合属性、关联实体，这就是代理模式应用带来的优势。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE hibernate-mapping PUBLIC &quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;</span><br><span class="line">&quot;http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd&quot;&gt;</span><br><span class="line">&lt;hibernate-mapping&gt;</span><br><span class="line">	&lt;class name=&quot;cn.itcast.nsfw.role.entity.Role&quot; table=&quot;role&quot;&gt;</span><br><span class="line">		&lt;id name=&quot;roleId&quot; type=&quot;java.lang.String&quot;&gt;</span><br><span class="line">			&lt;column name=&quot;role_id&quot; length=&quot;32&quot; /&gt;</span><br><span class="line">			&lt;generator class=&quot;uuid.hex&quot; /&gt;</span><br><span class="line">		&lt;/id&gt;</span><br><span class="line">		&lt;property name=&quot;name&quot; type=&quot;java.lang.String&quot;&gt;</span><br><span class="line">			&lt;column name=&quot;name&quot; length=&quot;20&quot; not-null=&quot;true&quot; /&gt;</span><br><span class="line">		&lt;/property&gt;</span><br><span class="line">		&lt;property name=&quot;state&quot; type=&quot;java.lang.String&quot;&gt;</span><br><span class="line">			&lt;column name=&quot;state&quot; length=&quot;1&quot; /&gt;</span><br><span class="line">		&lt;/property&gt;</span><br><span class="line">		&lt;set name=&quot;rolePrivileges&quot; inverse=&quot;true&quot; lazy=&quot;false&quot; cascade=&quot;save-update,delete&quot;&gt;</span><br><span class="line">			&lt;key&gt;</span><br><span class="line">				&lt;column name=&quot;role_id&quot;&gt;&lt;/column&gt;</span><br><span class="line">			&lt;/key&gt;</span><br><span class="line">			&lt;one-to-many class=&quot;cn.itcast.nsfw.role.entity.RolePrivilege&quot;/&gt;</span><br><span class="line">		&lt;/set&gt;</span><br><span class="line">	&lt;/class&gt;</span><br><span class="line">&lt;/hibernate-mapping&gt;</span><br></pre></td></tr></table></figure>
<p>role.hbm.xml放在entity包中</p>
<h3 id="hibernate缓存机制"><a href="#hibernate缓存机制" class="headerlink" title="hibernate缓存机制"></a>hibernate缓存机制</h3><p>1）Hibenate中一级缓存，也叫做session的缓存，它可以在session范围内减少数据库的访问次数！只在session范围有效！ Session关闭，一级缓存失效！<br>2）当调用session的save/saveOrUpdate/get/load/list/iterator方法的时候，都会把对象放入session的缓存中。 (session.createQurey(“from Dept”))不会放入缓存中<br>3）Session的缓存由hibernate维护， 用户不能操作缓存内容； 如果想操作缓存内容，必须通过hibernate提供的evit/clear方法操作。<br>特点：<br>    只在(当前)session范围有效，作用时间短，效果不是特别明显！<br>    在短时间内多次操作数据库，效果比较明显！</p>
<p>hibernate的缓存机制？<br>一级缓存session级别，作用域在session，session关闭缓存消失。<br>    list()和iterator()查询的数据都可以放入到缓存中。而list()不会从缓存中取出数据<br>    iterator()会出现N+1条的sql语句。解决方法是使用二级缓存。<br>二级缓存sessionFactory级别，缓存的是对象，当查询指定的对象的字段时缓存失效<br>    不会缓存hql语句<br>查询缓存sessionFactory级别。</p>
<p>一级缓存：<br>    session级别的，session关闭缓存消失<br>    list() 默认情况只会放入缓存，不会从一级缓存中取！发送一条sql语句<br>iterator()典型的N+1条语句。会放入缓存，也会从缓冲区中取数据。发出一条sql语句取所有数据的id值，再根据id发出sql语句才真正查询数据对象。<br>    使用查询缓存，可以让list()查询从二级缓存中取！<br>二级缓存：<br>    sessionFactory级别<br>二级缓存的使用：<br>1.导包<br>hibernate对于二级缓存没有相关的组件，要加入额外的二级缓存包相应的配置。常用的二级缓存包是EHcache<br>这个我们在下载好的hibernate的lib-&gt;optional-&gt;ehcache下可以找到(我这里使用的hibernate4.1.7版本)，然后将里面的几个jar包导入即可。<br>2.在hibernate.cfg.xml配置文件中配置我们二级缓存的一些属性：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 开启二级缓存 --&gt;</span><br><span class="line">        &lt;property name=&quot;hibernate.cache.use_second_level_cache&quot;&gt;true&lt;/property&gt;</span><br><span class="line">        &lt;!-- 二级缓存的提供类 在hibernate4.0版本以后我们都是配置这个属性来指定二级缓存的提供类--&gt;</span><br><span class="line">        &lt;property name=&quot;hibernate.cache.region.factory_class&quot;&gt;org.hibernate.cache.ehcache.EhCacheRegionFactory&lt;/property&gt;</span><br><span class="line">        &lt;!-- 二级缓存配置文件的位置 --&gt;</span><br><span class="line">        &lt;property name=&quot;hibernate.cache.provider_configuration_file_resource_path&quot;&gt;ehcache.xml&lt;/property&gt;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--这个类在4.0版本以后已经不建议被使用了--&gt;</span><br><span class="line">&lt;property name=&quot;hibernate.cache.provider_class&quot;&gt;net.sf.ehcache.hibernate.EhCacheProvider&lt;/property&gt;</span><br></pre></td></tr></table></figure>
<p>3.配置hibernate的二级缓存是通过使用 ehcache的缓存包，所以我们需要创建一个 ehcache.xml 的配置文件，来配置我们的缓存信息，将其放到项目根目录下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&lt;ehcache&gt;</span><br><span class="line">    &lt;!-- Sets the path to the directory where cache .data files are created.</span><br><span class="line">         If the path is a Java System Property it is replaced by</span><br><span class="line">         its value in the running VM.</span><br><span class="line">         The following properties are translated:</span><br><span class="line">         user.home - User&apos;s home directory</span><br><span class="line">         user.dir - User&apos;s current working directory</span><br><span class="line">         java.io.tmpdir - Default temp file path --&gt;</span><br><span class="line">　　&lt;!--指定二级缓存存放在磁盘上的位置--&gt;</span><br><span class="line">    &lt;diskStore path=&quot;user.dir&quot;/&gt;　　</span><br><span class="line">　　&lt;!--我们可以给每个实体类指定一个对应的缓存，如果没有匹配到该类，则使用这个默认的缓存配置--&gt;</span><br><span class="line">    &lt;defaultCache</span><br><span class="line">        maxElementsInMemory=&quot;10000&quot;　　//在内存中存放的最大对象数</span><br><span class="line">        eternal=&quot;false&quot;　　　　　　　　　//是否永久保存缓存，设置成false</span><br><span class="line">        timeToIdleSeconds=&quot;120&quot;　　　　</span><br><span class="line">        timeToLiveSeconds=&quot;120&quot;　　　　</span><br><span class="line">        overflowToDisk=&quot;true&quot;　　　　　//如果对象数量超过内存中最大的数，是否将其保存到磁盘中，设置成true</span><br><span class="line">        /&gt;</span><br><span class="line">　　&lt;!--</span><br><span class="line">　　　　1、timeToLiveSeconds的定义是：以创建时间为基准开始计算的超时时长；</span><br><span class="line">　　　　2、timeToIdleSeconds的定义是：在创建时间和最近访问时间中取出离现在最近的时间作为基准计算的超时时长；</span><br><span class="line">　　　　3、如果仅设置了timeToLiveSeconds，则该对象的超时时间=创建时间+timeToLiveSeconds，假设为A；</span><br><span class="line">　　　　4、如果没设置timeToLiveSeconds，则该对象的超时时间=max(创建时间，最近访问时间)+timeToIdleSeconds，假设为B；</span><br><span class="line">　　　　5、如果两者都设置了，则取出A、B最少的值，即min(A,B)，表示只要有一个超时成立即算超时。</span><br><span class="line">　　--&gt;</span><br><span class="line">　　&lt;!--可以给每个实体类指定一个配置文件，通过name属性指定，要使用类的全名--&gt;</span><br><span class="line">    &lt;cache name=&quot;com.xiaoluo.bean.Student&quot;</span><br><span class="line">        maxElementsInMemory=&quot;10000&quot;</span><br><span class="line">        eternal=&quot;false&quot;</span><br><span class="line">        timeToIdleSeconds=&quot;300&quot;</span><br><span class="line">        timeToLiveSeconds=&quot;600&quot;</span><br><span class="line">        overflowToDisk=&quot;true&quot;</span><br><span class="line">        /&gt;</span><br><span class="line">    &lt;cache name=&quot;sampleCache2&quot;</span><br><span class="line">        maxElementsInMemory=&quot;1000&quot;</span><br><span class="line">        eternal=&quot;true&quot;</span><br><span class="line">        timeToIdleSeconds=&quot;0&quot;</span><br><span class="line">        timeToLiveSeconds=&quot;0&quot;</span><br><span class="line">        overflowToDisk=&quot;false&quot;</span><br><span class="line">        /&gt; --&gt;</span><br><span class="line">&lt;/ehcache&gt;</span><br></pre></td></tr></table></figure></p>
<p>4.开启我们的二级缓存<br>①如果使用xml配置，我们需要在 Student.hbm.xml 中加上一下配置：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;hibernate-mapping package=&quot;com.xiaoluo.bean&quot;&gt;</span><br><span class="line">    &lt;class name=&quot;Student&quot; table=&quot;t_student&quot;&gt;</span><br><span class="line">        &lt;!-- 二级缓存一般设置为只读的 --&gt;</span><br><span class="line">        &lt;cache usage=&quot;read-only&quot;/&gt;</span><br><span class="line">        &lt;id name=&quot;id&quot; type=&quot;int&quot; column=&quot;id&quot;&gt;</span><br><span class="line">            &lt;generator class=&quot;native&quot;/&gt;</span><br><span class="line">        &lt;/id&gt;</span><br><span class="line">        &lt;property name=&quot;name&quot; column=&quot;name&quot; type=&quot;string&quot;&gt;&lt;/property&gt;</span><br><span class="line">        &lt;property name=&quot;sex&quot; column=&quot;sex&quot; type=&quot;string&quot;&gt;&lt;/property&gt;</span><br><span class="line">        &lt;many-to-one name=&quot;room&quot; column=&quot;rid&quot; fetch=&quot;join&quot;&gt;&lt;/many-to-one&gt;</span><br><span class="line">    &lt;/class&gt;</span><br><span class="line">&lt;/hibernate-mapping&gt;</span><br></pre></td></tr></table></figure></p>
<p>二级缓存的使用策略一般有这几种：read-only、nonstrict-read-write、read-write、transactional。注意：我们通常使用二级缓存都是将其配置成 read-only ，即我们应当在那些不需要进行修改的实体类上使用二级缓存，否则如果对缓存进行读写的话，性能会变差，这样设置缓存就失去了意义。</p>
<p>②如果使用annotation配置，我们需要在Student这个类上加上这样一个注解：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@Entity</span><br><span class="line">@Table(name=&quot;t_student&quot;)</span><br><span class="line">@Cache(usage=CacheConcurrencyStrategy.READ_ONLY)　　//　　表示开启二级缓存，并使用read-only策略</span><br><span class="line">public class Student</span><br><span class="line">&#123;</span><br><span class="line">    private int id;</span><br><span class="line">    private String name;</span><br><span class="line">    private String sex;</span><br><span class="line">    private Classroom room;</span><br><span class="line">    .......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>①二级缓存是sessionFactory级别的缓存<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">try</span><br><span class="line">        &#123;</span><br><span class="line">            session = HibernateUtil.openSession();</span><br><span class="line"></span><br><span class="line">            Student stu = (Student) session.load(Student.class, 1);</span><br><span class="line">            System.out.println(stu.getName() + &quot;-----------&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        catch (Exception e)</span><br><span class="line">        &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        finally</span><br><span class="line">        &#123;</span><br><span class="line">            HibernateUtil.close(session);</span><br><span class="line">        &#125;</span><br><span class="line">        try</span><br><span class="line">        &#123;</span><br><span class="line">            /**</span><br><span class="line">             * 即使当session关闭以后，因为配置了二级缓存，而二级缓存是sessionFactory级别的，所以会从缓存中取出该数据</span><br><span class="line">             * 只会发出一条sql语句</span><br><span class="line">             */</span><br><span class="line">            session = HibernateUtil.openSession();</span><br><span class="line">            Student stu = (Student) session.load(Student.class, 1);</span><br><span class="line">            System.out.println(stu.getName() + &quot;-----------&quot;);</span><br><span class="line">            /**</span><br><span class="line">             * 因为设置了二级缓存为read-only，所以不能对其进行修改</span><br><span class="line">             */</span><br><span class="line">            session.beginTransaction();</span><br><span class="line">            stu.setName(&quot;aaa&quot;);</span><br><span class="line">            session.getTransaction().commit();</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure></p>
<p>②二级缓存缓存的仅仅是对象，如果查询出来的是对象的一些属性，则不会被加到缓存中去<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">try</span><br><span class="line">        &#123;</span><br><span class="line">            session = HibernateUtil.openSession();</span><br><span class="line"></span><br><span class="line">            /**</span><br><span class="line">             * 注意：二级缓存中缓存的仅仅是对象，而下面这里只保存了姓名和性别两个字段，所以 不会被加载到二级缓存里面</span><br><span class="line">             */</span><br><span class="line">            List&lt;Object[]&gt; ls = (List&lt;Object[]&gt;) session</span><br><span class="line">                    .createQuery(&quot;select stu.name, stu.sex from Student stu&quot;)</span><br><span class="line">                    .setFirstResult(0).setMaxResults(30).list();</span><br><span class="line">        &#125;</span><br><span class="line">        catch (Exception e)</span><br><span class="line">        &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        finally</span><br><span class="line">        &#123;</span><br><span class="line">            HibernateUtil.close(session);</span><br><span class="line">        &#125;</span><br><span class="line">        try</span><br><span class="line">        &#123;</span><br><span class="line">            /**</span><br><span class="line">             * 由于二级缓存缓存的是对象，所以此时会发出两条sql</span><br><span class="line">             */</span><br><span class="line">            session = HibernateUtil.openSession();</span><br><span class="line">            Student stu = (Student) session.load(Student.class, 1);</span><br><span class="line">            System.out.println(stu);</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure></p>
<p>我们看到这个测试用例，如果我们只是取出对象的一些属性的话，则不会将其保存到二级缓存中去，因为二级缓存缓存的仅仅是对象。</p>
<p>③通过二级缓存来解决 N+1 的问题<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">try</span><br><span class="line">        &#123;</span><br><span class="line">            session = HibernateUtil.openSession();</span><br><span class="line">            /**</span><br><span class="line">             * 将查询出来的Student对象缓存到二级缓存中去</span><br><span class="line">             */</span><br><span class="line">            List&lt;Student&gt; stus = (List&lt;Student&gt;) session.createQuery(</span><br><span class="line">                    &quot;select stu from Student stu&quot;).list();</span><br><span class="line">        &#125;</span><br><span class="line">        catch (Exception e)</span><br><span class="line">        &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        finally</span><br><span class="line">        &#123;</span><br><span class="line">            HibernateUtil.close(session);</span><br><span class="line">        &#125;</span><br><span class="line">        try</span><br><span class="line">        &#123;</span><br><span class="line">            /**</span><br><span class="line">             * 由于学生的对象已经缓存在二级缓存中了，此时再使用iterate来获取对象的时候，首先会通过一条</span><br><span class="line">             * 取id的语句，然后在获取对象时去二级缓存中，如果发现就不会再发SQL，这样也就解决了N+1问题 </span><br><span class="line">             * 而且内存占用也不多</span><br><span class="line">             */</span><br><span class="line">            session = HibernateUtil.openSession();</span><br><span class="line">            Iterator&lt;Student&gt; iterator = session.createQuery(&quot;from Student&quot;)</span><br><span class="line">                    .iterate();</span><br><span class="line">            for (; iterator.hasNext();)</span><br><span class="line">            &#123;</span><br><span class="line">                Student stu = (Student) iterator.next();</span><br><span class="line">                System.out.println(stu.getName());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure></p>
<p>当我们如果需要查询出两次对象的时候，可以使用二级缓存来解决N+1的问题。</p>
<p>④二级缓存会缓存 hql 语句吗？<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">try</span><br><span class="line">        &#123;</span><br><span class="line">            session = HibernateUtil.openSession();</span><br><span class="line">            List&lt;Student&gt; ls = session.createQuery(&quot;from Student&quot;)</span><br><span class="line">                    .setFirstResult(0).setMaxResults(50).list();//第一次查询</span><br><span class="line">        &#125;</span><br><span class="line">        catch (Exception e)</span><br><span class="line">        &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        finally</span><br><span class="line">        &#123;</span><br><span class="line">            HibernateUtil.close(session);</span><br><span class="line">        &#125;</span><br><span class="line">        try</span><br><span class="line">        &#123;</span><br><span class="line">            /**</span><br><span class="line">             * 使用List会发出两条一模一样的sql，此时如果希望不发sql就需要使用查询缓存</span><br><span class="line">             */</span><br><span class="line">            session = HibernateUtil.openSession();</span><br><span class="line">            List&lt;Student&gt; ls = session.createQuery(&quot;from Student&quot;)</span><br><span class="line">                    .setFirstResult(0).setMaxResults(50).list();//第二次查询</span><br><span class="line">            Iterator&lt;Student&gt; stu = ls.iterator();</span><br><span class="line">            for(;stu.hasNext();)</span><br><span class="line">            &#123;</span><br><span class="line">                Student student = stu.next();</span><br><span class="line">                System.out.println(student.getName());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure></p>
<p>结果<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Hibernate: select student0_.id as id2_, student0_.name as name2_, student0_.sex as sex2_, student0_.rid as rid2_ from t_student student0_ limit ?</span><br><span class="line">Hibernate: select student0_.id as id2_, student0_.name as name2_, student0_.sex as sex2_, student0_.rid as rid2_ from t_student student0_ limit ?</span><br></pre></td></tr></table></figure></p>
<p>查询缓存(sessionFactory级别)<br>我们如果要配置查询缓存，只需要在hibernate.cfg.xml中加入一条配置即可：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">　&lt;!-- 开启查询缓存 --&gt;</span><br><span class="line">&lt;property name=&quot;hibernate.cache.use_query_cache&quot;&gt;true&lt;/property&gt;</span><br></pre></td></tr></table></figure></p>
<p>然后我们如果在查询hql语句时要使用查询缓存，就需要在查询语句后面设置这样一个方法:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Student&gt; ls = session.createQuery(&quot;from Student where name like ?&quot;)</span><br><span class="line">                    .setCacheable(true)　　//开启查询缓存，查询缓存也是SessionFactory级别的缓存</span><br><span class="line">                    .setParameter(0, &quot;%王%&quot;)</span><br><span class="line">                    .setFirstResult(0).setMaxResults(50).list();</span><br></pre></td></tr></table></figure></p>
<p>如果是在annotation中，我们还需要在这个类上加上这样一个注解：@Cacheable<br>接下来我们来通过测试用例来看看我们的查询缓存<br>①查询缓存也是sessionFactory级别的缓存<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">    public void test2() &#123;</span><br><span class="line">        Session session = null;</span><br><span class="line">        try &#123;</span><br><span class="line">            /**</span><br><span class="line">             * 此时会发出一条sql取出所有的学生信息</span><br><span class="line">             */</span><br><span class="line">            session = HibernateUtil.openSession();</span><br><span class="line">            List&lt;Student&gt; ls = session.createQuery(&quot;from Student&quot;)</span><br><span class="line">                    .setCacheable(true)  //开启查询缓存,查询缓存也是sessionFactory级别的缓存</span><br><span class="line">                    .setFirstResult(0).setMaxResults(50).list();</span><br><span class="line">            Iterator&lt;Student&gt; stus = ls.iterator();</span><br><span class="line">            for(;stus.hasNext();) &#123;</span><br><span class="line">                Student stu = stus.next();</span><br><span class="line">                System.out.println(stu.getName());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; finally &#123;</span><br><span class="line">            HibernateUtil.close(session);</span><br><span class="line">        &#125;</span><br><span class="line">        try &#123;</span><br><span class="line">            /**</span><br><span class="line">             * 此时会发出一条sql取出所有的学生信息</span><br><span class="line">             */</span><br><span class="line">            session = HibernateUtil.openSession();</span><br><span class="line">            List&lt;Student&gt; ls = session.createQuery(&quot;from Student&quot;)</span><br><span class="line">                    .setCacheable(true)  //开启查询缓存,查询缓存也是sessionFactory级别的缓存</span><br><span class="line">                    .setFirstResult(0).setMaxResults(50).list();</span><br><span class="line">            Iterator&lt;Student&gt; stus = ls.iterator(); </span><br><span class="line">            for(;stus.hasNext();) &#123;</span><br><span class="line">                Student stu = stus.next();</span><br><span class="line">                System.out.println(stu.getName());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; finally &#123;</span><br><span class="line">            HibernateUtil.close(session);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<p>结果<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hibernate: select student0_.id as id2_, student0_.name as name2_, student0_.sex as sex2_, student0_.rid as rid2_ from t_student student0_ limit ?</span><br></pre></td></tr></table></figure></p>
<p>我们看到，此时如果我们发出两条相同的语句，hibernate也只会发出一条sql，因为已经开启了查询缓存了，并且查询缓存也是sessionFactory级别的</p>
<p>②只有当 HQL 查询语句完全相同时，连参数设置都要相同，此时查询缓存才有效<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">　@Test</span><br><span class="line">    public void test3() &#123;</span><br><span class="line">        Session session = null;</span><br><span class="line">        try &#123;</span><br><span class="line">            /**</span><br><span class="line">             * 此时会发出一条sql取出所有的学生信息</span><br><span class="line">             */</span><br><span class="line">            session = HibernateUtil.openSession();</span><br><span class="line">            List&lt;Student&gt; ls = session.createQuery(&quot;from Student where name like ?&quot;)</span><br><span class="line">                    .setCacheable(true)//开启查询缓存，查询缓存也是SessionFactory级别的缓存</span><br><span class="line">                    .setParameter(0, &quot;%王%&quot;)</span><br><span class="line">                    .setFirstResult(0).setMaxResults(50).list();</span><br><span class="line">            Iterator&lt;Student&gt; stus = ls.iterator();</span><br><span class="line">            for(;stus.hasNext();) &#123;</span><br><span class="line">                Student stu = stus.next();</span><br><span class="line">                System.out.println(stu.getName());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; finally &#123;</span><br><span class="line">            HibernateUtil.close(session);</span><br><span class="line">        &#125;</span><br><span class="line">        session = null;</span><br><span class="line">        try &#123;</span><br><span class="line">            /**</span><br><span class="line">             * 此时会发出一条sql取出所有的学生信息</span><br><span class="line">             */</span><br><span class="line">            session = HibernateUtil.openSession();</span><br><span class="line">            /**</span><br><span class="line">             * 只有当HQL完全相同的时候，连参数都要相同，查询缓存才有效</span><br><span class="line">             */</span><br><span class="line">//            List&lt;Student&gt; ls = session.createQuery(&quot;from Student where name like ?&quot;)</span><br><span class="line">//                    .setCacheable(true)//开启查询缓存，查询缓存也是SessionFactory级别的缓存</span><br><span class="line">//                    .setParameter(0, &quot;%王%&quot;)</span><br><span class="line">//                    .setFirstResult(0).setMaxResults(50).list();</span><br><span class="line">            List&lt;Student&gt; ls = session.createQuery(&quot;from Student where name like ?&quot;)</span><br><span class="line">                    .setCacheable(true)//开启查询缓存，查询缓存也是SessionFactory级别的缓存</span><br><span class="line">                    .setParameter(0, &quot;%张%&quot;)</span><br><span class="line">                    .setFirstResult(0).setMaxResults(50).list();</span><br><span class="line">            Iterator&lt;Student&gt; stus = ls.iterator();</span><br><span class="line">            for(;stus.hasNext();) &#123;</span><br><span class="line">                Student stu = stus.next();</span><br><span class="line">                System.out.println(stu.getName());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; finally &#123;</span><br><span class="line">            HibernateUtil.close(session);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<p>结果<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Hibernate: select student0_.id as id2_, student0_.name as name2_, student0_.sex as sex2_, student0_.rid as rid2_ from t_student student0_ where student0_.name like ? limit ?</span><br><span class="line"></span><br><span class="line">Hibernate: select student0_.id as id2_, student0_.name as name2_, student0_.sex as sex2_, student0_.rid as rid2_ from t_student student0_ where student0_.name like ? limit ?</span><br></pre></td></tr></table></figure></p>
<p>我们看到，如果我们的hql查询语句不同的话，我们的查询缓存也没有作用</p>
<p>③查询缓存也能引起 N+1 的问题<br>查询缓存也能引起 N+1 的问题，我们这里首先先将 Student 对象上的二级缓存先注释掉：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">　&lt;!-- 二级缓存一般设置为只读的 --&gt;</span><br><span class="line">&lt;!--　　&lt;cache usage=&quot;read-only&quot;/&gt;　　--&gt;</span><br></pre></td></tr></table></figure></p>
<p>test<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">    public void test4() &#123;</span><br><span class="line">        Session session = null;</span><br><span class="line">        try &#123;</span><br><span class="line">            /**</span><br><span class="line">             * 查询缓存缓存的不是对象而是id</span><br><span class="line">             */</span><br><span class="line">            session = HibernateUtil.openSession();</span><br><span class="line">            List&lt;Student&gt; ls = session.createQuery(&quot;from Student where name like ?&quot;)</span><br><span class="line">                    .setCacheable(true)//开启查询缓存，查询缓存也是SessionFactory级别的缓存</span><br><span class="line">                    .setParameter(0, &quot;%王%&quot;)</span><br><span class="line">                    .setFirstResult(0).setMaxResults(50).list();</span><br><span class="line">            Iterator&lt;Student&gt; stus = ls.iterator();</span><br><span class="line">            for(;stus.hasNext();) &#123;</span><br><span class="line">                Student stu = stus.next();</span><br><span class="line">                System.out.println(stu.getName());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; finally &#123;</span><br><span class="line">            HibernateUtil.close(session);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        session = null;</span><br><span class="line">        try &#123;</span><br><span class="line">            /**</span><br><span class="line">             * 查询缓存缓存的是id，此时由于在缓存中已经存在了这样的一组学生数据，但是仅仅只是缓存了</span><br><span class="line">             * id，所以此处会发出大量的sql语句根据id取对象，这也是发现N+1问题的第二个原因</span><br><span class="line">             * 所以如果使用查询缓存必须开启二级缓存</span><br><span class="line">             */</span><br><span class="line">            session = HibernateUtil.openSession();</span><br><span class="line">            List&lt;Student&gt; ls = session.createQuery(&quot;from Student where name like ?&quot;)</span><br><span class="line">                    .setCacheable(true)//开启查询缓存，查询缓存也是SessionFactory级别的缓存</span><br><span class="line">                    .setParameter(0, &quot;%王%&quot;)</span><br><span class="line">                    .setFirstResult(0).setMaxResults(50).list();</span><br><span class="line">            Iterator&lt;Student&gt; stus = ls.iterator();</span><br><span class="line">            for(;stus.hasNext();) &#123;</span><br><span class="line">                Student stu = stus.next();</span><br><span class="line">                System.out.println(stu.getName());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; finally &#123;</span><br><span class="line">            HibernateUtil.close(session);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<p>结果<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Hibernate: select student0_.id as id2_, student0_.name as name2_, student0_.sex as sex2_, student0_.rid as rid2_ from t_student student0_ where student0_.name like ? limit ?</span><br><span class="line"></span><br><span class="line">Hibernate: select student0_.id as id2_2_, student0_.name as name2_2_, student0_.sex as sex2_2_, student0_.rid as rid2_2_, classroom1_.id as id1_0_, classroom1_.name as name1_0_, classroom1_.sid as sid1_0_, special2_.id as id0_1_, special2_.name as name0_1_, special2_.type as type0_1_ from t_student student0_ left outer join t_classroom classroom1_ on student0_.rid=classroom1_.id left outer join t_special special2_ on classroom1_.sid=special2_.id where student0_.id=?</span><br><span class="line">Hibernate: select student0_.id as id2_2_, student0_.name as name2_2_, student0_.sex as sex2_2_, student0_.rid as rid2_2_, classroom1_.id as id1_0_, classroom1_.name as name1_0_, classroom1_.sid as sid1_0_, special2_.id as id0_1_, special2_.name as name0_1_, special2_.type as type0_1_ from t_student student0_ left outer join t_classroom classroom1_ on student0_.rid=classroom1_.id left outer join t_special special2_ on classroom1_.sid=special2_.id where student0_.id=?</span><br><span class="line">Hibernate: select student0_.id as id2_2_, student0_.name as name2_2_, student0_.sex as sex2_2_, student0_.rid as rid2_2_, classroom1_.id as id1_0_, classroom1_.name as name1_0_, classroom1_.sid as sid1_0_, special2_.id as id0_1_, special2_.name as name0_1_, special2_.type as type0_1_ from t_student student0_ left outer join t_classroom classroom1_ on student0_.rid=classroom1_.id left outer join t_special special2_ on classroom1_.sid=special2_.id where student0_.id=?</span><br><span class="line">Hibernate: select student0_.id as id2_2_, student0_.name as name2_2_, student0_.sex as sex2_2_, student0_.rid as rid2_2_, classroom1_.id as id1_0_, classroom1_.name as name1_0_, classroom1_.sid as sid1_0_, special2_.id as id0_1_, special2_.name as name0_1_, special2_.type as type0_1_ from t_student student0_ left outer join t_classroom classroom1_ on student0_.rid=classroom1_.id left outer join t_special special2_ on classroom1_.sid=special2_.id where student0_.id=?</span><br></pre></td></tr></table></figure></p>
<p>…………………….</p>
<p>我们看到，当我们将二级缓存注释掉以后，在使用查询缓存时，也会出现 N+1 的问题，为什么呢？</p>
<p>因为查询缓存缓存的也仅仅是对象的id，所以第一条 sql 也是将对象的id都查询出来，但是当我们后面如果要得到每个对象的信息的时候，此时又会发sql语句去查询，所以，如果要使用查询缓存，我们一定也要开启我们的二级缓存，这样就不会出现 N+1 问题了</p>
<h3 id="Hibernate自带的分页机制是什么？如果不使用Hibernate自带的分页，则采用什么方式分页？"><a href="#Hibernate自带的分页机制是什么？如果不使用Hibernate自带的分页，则采用什么方式分页？" class="headerlink" title="Hibernate自带的分页机制是什么？如果不使用Hibernate自带的分页，则采用什么方式分页？"></a>Hibernate自带的分页机制是什么？如果不使用Hibernate自带的分页，则采用什么方式分页？</h3><p>　　1、hibernate自带的分页机制：获得Session对象后，从Session中获得Query对象。用Query.setFirstResult()：设置要显示的第一行数据,<br>Query.setMaxResults()：设置要显示的最后一行数据。<br>　　2、不使用hibernate自带的分页,可采用sql语句分页，<br>如：5:为每页显示的记录,2为当前页： select <em> top 5 from table where tabId not in (select tabId top (2-1)</em>5 from table);</p>
<h3 id="spring配置数据库"><a href="#spring配置数据库" class="headerlink" title="spring配置数据库"></a>spring配置数据库</h3><ol>
<li>使用3cp0jar包，直接配置dataSource<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;dataSource&quot; class=&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;       </span><br><span class="line">        destroy-method=&quot;close&quot;&gt;      </span><br><span class="line">    &lt;property name=&quot;driverClass&quot; value=&quot; oracle.jdbc.driver.OracleDriver &quot;/&gt;      </span><br><span class="line">    &lt;property name=&quot;jdbcUrl&quot; value=&quot; jdbc:oracle:thin:@localhost:1521:ora9i &quot;/&gt;      </span><br><span class="line">    &lt;property name=&quot;user&quot; value=&quot;admin&quot;/&gt;      </span><br><span class="line">    &lt;property name=&quot;password&quot; value=&quot;1234&quot;/&gt;      </span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>2.引用db.properties文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 导入外部的properties配置文件 --&gt;</span><br><span class="line">	&lt;context:property-placeholder location=&quot;classpath:db.properties&quot; /&gt;</span><br><span class="line"></span><br><span class="line">	&lt;!-- 配置c3p0数据源 --&gt;</span><br><span class="line">	&lt;bean id=&quot;dataSource&quot; class=&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot; destroy-method=&quot;close&quot;&gt;</span><br><span class="line">		&lt;property name=&quot;jdbcUrl&quot; value=&quot;$&#123;jdbcUrl&#125;&quot;&gt;&lt;/property&gt;</span><br><span class="line">		&lt;property name=&quot;driverClass&quot; value=&quot;$&#123;driverClass&#125;&quot;&gt;&lt;/property&gt;</span><br><span class="line">		&lt;property name=&quot;user&quot; value=&quot;$&#123;user&#125;&quot;&gt;&lt;/property&gt;</span><br><span class="line">		&lt;property name=&quot;password&quot; value=&quot;$&#123;password&#125;&quot;&gt;&lt;/property&gt;</span><br><span class="line">		&lt;!--初始化时获取三个连接，取值应在minPoolSize与maxPoolSize之间。Default: 3 --&gt;</span><br><span class="line">		&lt;property name=&quot;initialPoolSize&quot; value=&quot;$&#123;initialPoolSize&#125;&quot;&gt;&lt;/property&gt;</span><br><span class="line">		&lt;!--连接池中保留的最小连接数。Default: 3 --&gt;</span><br><span class="line">		&lt;property name=&quot;minPoolSize&quot; value=&quot;3&quot;&gt;&lt;/property&gt;</span><br><span class="line">		&lt;!--连接池中保留的最大连接数。Default: 15 --&gt;</span><br><span class="line">		&lt;property name=&quot;maxPoolSize&quot; value=&quot;$&#123;maxPoolSize&#125;&quot;&gt;&lt;/property&gt;</span><br><span class="line">		&lt;!--当连接池中的连接耗尽的时候c3p0一次同时获取的连接数。Default: 3 --&gt;</span><br><span class="line">		&lt;property name=&quot;acquireIncrement&quot; value=&quot;3&quot;&gt;&lt;/property&gt;</span><br><span class="line">		&lt;!--最大空闲时间，1800秒内未使用则连接被丢弃，若为0则永不丢弃。Default: 0 --&gt;</span><br><span class="line">	    &lt;property name=&quot;maxIdleTime&quot; value=&quot;1800&quot;&gt;&lt;/property&gt;</span><br><span class="line">	&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">	&lt;bean id=&quot;sessionFactory&quot; class=&quot;org.springframework.orm.hibernate3.LocalSessionFactoryBean&quot;&gt;</span><br><span class="line">		&lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/property&gt;</span><br><span class="line">		&lt;property name=&quot;hibernateProperties&quot;&gt;</span><br><span class="line">			&lt;props&gt;</span><br><span class="line">				&lt;prop key=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQL5Dialect&lt;/prop&gt;</span><br><span class="line">				&lt;prop key=&quot;hibernate.show_sql&quot;&gt;true&lt;/prop&gt;</span><br><span class="line">				&lt;prop key=&quot;hibernate.hbm2ddl.auto&quot;&gt;update&lt;/prop&gt;</span><br><span class="line">				&lt;prop key=&quot;javax.persistence.validation.mode&quot;&gt;none&lt;/prop&gt;</span><br><span class="line">			&lt;/props&gt;</span><br><span class="line">		&lt;/property&gt;</span><br><span class="line">		&lt;property name=&quot;mappingLocations&quot;&gt;</span><br><span class="line">			&lt;list&gt;</span><br><span class="line">				&lt;value&gt;classpath:cn/itcast/nsfw/*/entity/*.hbm.xml&lt;/value&gt;</span><br><span class="line">				&lt;value&gt;classpath:cn/itcast/test/entity/*.hbm.xml&lt;/value&gt;</span><br><span class="line">			&lt;/list&gt;</span><br><span class="line">		&lt;/property&gt;</span><br><span class="line">	&lt;/bean&gt;</span><br></pre></td></tr></table></figure></p>
<p>2.引入hibernate.cfg.xml文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 配置 sessionFactory --&gt;</span><br><span class="line">   &lt;bean id=&quot;sessionFactory&quot; class =&quot;org.springframework.orm.hibernate3.LocalSessionFactoryBean&quot;&gt;</span><br><span class="line">             &lt;property name=&quot;configLocation&quot;&gt;</span><br><span class="line">                    &lt;value&gt;classpath:hibernate.cfg .xml&lt;/value&gt;</span><br><span class="line">             &lt;/property&gt;</span><br><span class="line">             &lt;!-- &lt;property name=&quot;configLocation&quot; value =&quot;classpath:hibernate.cfg.xml&quot; &gt;--&gt;</span><br><span class="line">             &lt;/property&gt;</span><br><span class="line">      &lt;/bean&gt;      </span><br><span class="line">      &lt;!-- 配置事务管理器 --&gt;   </span><br><span class="line">      &lt;bean id =&quot;transactionManager&quot; class =&quot;org.springframework.orm.hibernate3.HibernateTransactionManager&quot; &gt;</span><br><span class="line">             &lt;property name = sessionFactory&quot; &gt;</span><br><span class="line">                    &lt;ref local = &quot;sessionFactory&quot; /&gt;</span><br><span class="line">             &lt;/property&gt;</span><br><span class="line">      &lt;/bean&gt;</span><br></pre></td></tr></table></figure></p>
<p>Json数据<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">map2json</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	List&lt;City&gt; cityList = <span class="keyword">new</span> ArrayList&lt;City&gt;();</span><br><span class="line">	cityList.add(<span class="keyword">new</span> City(<span class="number">1</span>,<span class="string">"中山"</span>));</span><br><span class="line">	cityList.add(<span class="keyword">new</span> City(<span class="number">2</span>,<span class="string">"佛山"</span>));</span><br><span class="line">	Map&lt;String,Object&gt; map = <span class="keyword">new</span> LinkedHashMap&lt;String,Object&gt;();</span><br><span class="line">	map.put(<span class="string">"total"</span>,cityList.size());<span class="comment">//表示集合的长度</span></span><br><span class="line">	map.put(<span class="string">"rows"</span>,cityList);<span class="comment">//rows表示集合</span></span><br><span class="line">	JSONArray jSONArray = JSONArray.fromObject(map);</span><br><span class="line">	String jsonJAVA = jSONArray.toString();</span><br><span class="line">	System.out.println(jsonJAVA);</span><br><span class="line">	<span class="comment">//[&#123;"total":2,"rows":[&#123;"id":1,"name":"中山"&#125;,&#123;"id":2,"name":"佛山"&#125;]&#125;]</span></span><br><span class="line">	jsonJAVA = jsonJAVA.substring(<span class="number">1</span>,jsonJAVA.length()-<span class="number">1</span>);</span><br><span class="line">	System.out.println(jsonJAVA);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>GetDataAction.java<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletOutputStream;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> org.apache.struts2.ServletActionContext;</span><br><span class="line"><span class="keyword">import</span> com.opensymphony.xwork2.ActionSupport;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GetDataAction</span> <span class="keyword">extends</span> <span class="title">ActionSupport</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> User user;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getData</span><span class="params">()</span> <span class="keyword">throws</span> IOException</span>&#123;<span class="comment">//不能传参</span></span><br><span class="line">		HttpServletRequest request = ServletActionContext.getRequest();</span><br><span class="line">		System.out.println(<span class="string">"进入action"</span>);</span><br><span class="line">		String id = request.getParameter(<span class="string">"id"</span>);</span><br><span class="line">		user = <span class="keyword">new</span> User();</span><br><span class="line">		user.setId(id);</span><br><span class="line">		user.setUserName(<span class="string">"张三"</span>);</span><br><span class="line">		System.out.println(user);</span><br><span class="line">		HttpServletResponse response = ServletActionContext.getResponse();</span><br><span class="line">		<span class="comment">//PrintWriter writer = response.getWriter();</span></span><br><span class="line">		ServletOutputStream outputStream = response.getOutputStream();</span><br><span class="line">		<span class="comment">//writer.write("good");//会直接返回浏览器页面</span></span><br><span class="line">		outputStream.write(<span class="string">"good"</span>.getBytes(<span class="string">"utf-8"</span>));<span class="comment">//不管是printwriter还是outputstream都可以向浏览器发送数据，ajax都可以接收</span></span><br><span class="line">		<span class="comment">//writer.close();</span></span><br><span class="line">		outputStream.close();</span><br><span class="line">		<span class="keyword">return</span> SUCCESS;<span class="comment">//如果没有jsp页面接受json格式的数据会直接在浏览器页面打印出json格式数据</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> User <span class="title">getUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> user;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>getdatabypost.jsp<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">language</span>=<span class="string">"java"</span> <span class="attr">import</span>=<span class="string">"java.util.*"</span> <span class="attr">pageEncoding</span>=<span class="string">"utf-8"</span>%&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">taglib</span> <span class="attr">uri</span>=<span class="string">"http://java.sun.com/jsp/jstl/core"</span> <span class="attr">prefix</span>=<span class="string">"c"</span> %&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>获取json对象<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"../js/jquery-1.8.2.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"获取数据"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">	$(<span class="string">":button"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="undefined">		alert(0);</span></span><br><span class="line"><span class="javascript">		$.post(</span></span><br><span class="line"><span class="javascript">			<span class="string">"$&#123;pageContext.request.contextPath&#125;/getData_getData.action?id=1"</span>,</span></span><br><span class="line"><span class="javascript">			<span class="function"><span class="keyword">function</span>(<span class="params">data,status,ajax</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">					<span class="comment">//ajax是json文本&#123;"data":"",...&#125;字符串,data是json文本的对象</span></span></span><br><span class="line"><span class="javascript">					<span class="comment">//在action中javabean要提供get方法ajax才能获得json格式的javabean(user)</span></span></span><br><span class="line"><span class="javascript">				alert(ajax.responseText);<span class="comment">//打印出&#123;"data":"success","user":&#123;"id":null,"userName":"张三"&#125;&#125;</span></span></span><br><span class="line"><span class="javascript">				<span class="keyword">var</span> user = data.user;</span></span><br><span class="line"><span class="undefined">				alert(user);</span></span><br><span class="line"><span class="undefined">				alert(user.id);</span></span><br><span class="line"><span class="undefined">			&#125;</span></span><br><span class="line"><span class="undefined">		);</span></span><br><span class="line"><span class="undefined">	&#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span> <span class="meta">?&gt;</span></span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE struts PUBLIC</span></span><br><span class="line"><span class="meta">          "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"</span></span><br><span class="line"><span class="meta">          "http://struts.apache.org/dtds/struts-2.0.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">struts</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"firstStruts"</span> <span class="attr">extends</span>=<span class="string">"json-default"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">"helloStruts"</span> <span class="attr">class</span>=<span class="string">"cn.volc.action.FirstStruts"</span></span></span><br><span class="line"><span class="tag">			<span class="attr">method</span>=<span class="string">"execute"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">"success"</span>&gt;</span>/jsp/success.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">"getData_*"</span> <span class="attr">class</span>=<span class="string">"cn.volc.action.GetDataAction"</span></span></span><br><span class="line"><span class="tag">			<span class="attr">method</span>=<span class="string">"&#123;1&#125;"</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">			&lt;result name="success" type="json" /&gt;</span></span><br><span class="line"><span class="comment">			 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">"success"</span>&gt;</span>/jsp/getdatabypost.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">package</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">struts</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>异步发布信息<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">//异步发布信息，无需返回值</span><br><span class="line">	public void publicInfo()&#123;</span><br><span class="line">		try &#123;</span><br><span class="line">			if(info != null)&#123;</span><br><span class="line">				//1、更新信息状态</span><br><span class="line">				Info tem = infoService.findObjectById(info.getInfoId());</span><br><span class="line">				tem.setState(info.getState());</span><br><span class="line">				infoService.update(tem);</span><br><span class="line">				//2、输出更新结果</span><br><span class="line">				HttpServletResponse response = ServletActionContext.getResponse();</span><br><span class="line">				response.setContentType(&quot;text/html&quot;);</span><br><span class="line">				ServletOutputStream outputStream = response.getOutputStream();</span><br><span class="line">				outputStream.write(&quot;更新状态成功&quot;.getBytes(&quot;utf-8&quot;));</span><br><span class="line">				outputStream.close();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125; catch (Exception e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure></p>
<p>listUI.JSP<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">//异步发布信息,信息的id及将要改成的信息状态</span><br><span class="line">  	function doPublic(infoId, state)&#123;</span><br><span class="line">  		//1、更新信息状态</span><br><span class="line">  		$.ajax(&#123;</span><br><span class="line">  			url:&quot;$&#123;basePath&#125;nsfw/info_publicInfo.action&quot;,</span><br><span class="line">  			data:&#123;&quot;info.infoId&quot;:infoId, &quot;info.state&quot;:state&#125;,</span><br><span class="line">  			type:&quot;post&quot;,</span><br><span class="line">  			success: function(msg)&#123;</span><br><span class="line">  				//2、更新状态栏、操作栏的显示值</span><br><span class="line">  				if(&quot;更新状态成功&quot; == msg)&#123;</span><br><span class="line">  					if(state == 1)&#123;//说明信息状态已经被改成 发布，状态栏显示 发布，操作栏显示 停用</span><br><span class="line">  						$(&quot;#show_&quot;+infoId).html(&quot;发布&quot;);</span><br><span class="line">  						$(&quot;#oper_&quot;+infoId).html(&apos;&lt;a href=&quot;javascript:doPublic(\&apos;&apos;+infoId+&apos;\&apos;,0)&quot;&gt;停用&lt;/a&gt;&apos;);</span><br><span class="line">  					&#125; else &#123;</span><br><span class="line">  						$(&quot;#show_&quot;+infoId).html(&quot;停用&quot;);</span><br><span class="line">  						$(&quot;#oper_&quot;+infoId).html(&apos;&lt;a href=&quot;javascript:doPublic(\&apos;&apos;+infoId+&apos;\&apos;,1)&quot;&gt;发布&lt;/a&gt;&apos;);</span><br><span class="line">  					&#125;</span><br><span class="line">  				&#125; else &#123;alert(&quot;更新信息状态失败！&quot;);&#125;</span><br><span class="line">  			&#125;,</span><br><span class="line">  			error: function()&#123;</span><br><span class="line">  				alert(&quot;更新信息状态失败！&quot;);</span><br><span class="line">  			&#125;</span><br><span class="line">  		&#125;);</span><br></pre></td></tr></table></figure></p>
<h3 id="springmvc的工作流程"><a href="#springmvc的工作流程" class="headerlink" title="springmvc的工作流程"></a>springmvc的工作流程</h3><p><img src="https://volcfamily.cn/images/interview-question/s.png" alt="s"><br><img src="https://volcfamily.cn/images/interview-question/t.png" alt="t"></p>
<p>Spring工作流程描述</p>
<ol>
<li>用户向服务器发送请求，请求被Spring 前端控制Servelt DispatcherServlet捕获；<ol start="2">
<li>DispatcherServlet对请求URL进行解析，得到请求资源标识符（URI）。然后根据该URI，调用HandlerMapping(映射器)获得该Handler配置的所有相关的对象（包括Handler对象以及(加载controllerRequestMapping注解信息)Handler对象对应的拦截器），最后以HandlerExecutionChain(执行链)对象的形式返回，把handler交给核心控制器；</li>
<li>DispatcherServlet 根据获得的Handler，选择一个合适的HandlerAdapter(适配器)。（附注：如果成功获得HandlerAdapter后，此时将开始执行拦截器的preHandler(…)方法）<ol start="4">
<li>提取Request中的模型数据，填充Handler入参，开始执行Handler（Controller)。 在填充Handler的入参过程中，根据你的配置，Spring将帮你做一些额外的工作：<br>HttpMessageConveter： 将请求消息（如Json、xml等数据）转换成一个对象，将对象转换为指定的响应信息<br>数据转换：对请求消息进行数据转换。如String转换成Integer、Double等<br>数据根式化：对请求消息进行数据格式化。 如将字符串转换成格式化数字或格式化日期等<br>数据验证： 验证数据的有效性（长度、格式等），验证结果存储到BindingResult或Error中</li>
</ol>
</li>
<li>Handler执行完成后，向DispatcherServlet 返回一个ModelAndView对象；</li>
<li>根据返回的ModelAndView，选择一个适合的ViewResolver（必须是已经注册到Spring容器中的ViewResolver)返回给DispatcherServlet ；</li>
<li>ViewResolver 结合Model和View，来渲染视图</li>
<li>将渲染结果返回给客户端。</li>
</ol>
</li>
</ol>
<p>其他流程图解<br><img src="https://volcfamily.cn/images/interview-question/u.png" alt="u"></p>
<p>(1).发起请求到前端控制器(DispatcherServlet);<br>(2).前端控制器请求HandlerMapping查找Handler，可以根据xml配置、注解进行查找；<br>(3).处理器映射器HandlerMapping向前端控制器返回Handler；<br>(4).前端控制器调用处理器适配器去执行Handler(包含的controller注解的信息)；<br>(5).处理器适配器去执行Handler；<br>(6).Handler执行完成给适配器返回ModelAndView；<br>(7).处理器适配器向前端控制器返回ModelAndView(是springmvc框架的一个底层对象，包括Model和View)；<br>(8).前端控制器请求视图解析器去进行视图解析，根据逻辑视图名称解析真正的视图(jsp…)；<br>(9).视图解析器向前端控制器返回View;<br>(10).前端控制器进行视图渲染，视图渲染就是将模型数据(在ModelAndView对象中)填充到request域中。<br>(11).前端控制器向用户响应结果。</p>
<p>面试回答的流程：</p>
<ol>
<li>用户向服务器发送请求，请求被Spring 前端控制Servelt DispatcherServlet捕获；</li>
<li>DispatcherServlet对请求URL进行解析，得到请求资源标识符（URI）。然后根据该URI，调用HandlerMapping(映射器)获得该Handler配置的所有相关的对象（包括Handler对象以及加载controllerRequestMapping注解信息)，最后以HandlerExecutionChain(执行链)对象的形式返回，把handler交给核心控制器。</li>
<li>DispatcherServlet 根据获得的Handler，选择一个合适的HandlerAdapter(适配器)，并获取适配器。</li>
<li>DispatcherServlet 调用适配器去执行Handler(包含的controller注解的信息)；</li>
<li>Handler执行完成后，向DispatcherServlet 返回一个ModelAndView对象(向视图发送的数据和视图的逻辑名字)；</li>
<li>DispatcherServlet根据返回的ModelAndView，选择一个适合的ViewResolver(视图解析器)返回给DispatcherServlet ；</li>
<li>DispatcherServlet请求视图解析器去进行视图解析，根据逻辑视图名称解析真正的视图(jsp…)。返回一个View给DispatcherServlet。</li>
<li>前端控制器进行视图渲染，视图渲染就是将模型数据(在ModelAndView对象中)填充到request域中。</li>
<li>前端控制器向用户响应结果。</li>
</ol>
<p>Spring工作流程描述<br>    为什么Spring只使用一个Servlet(DispatcherServlet)来处理所有请求？<br>     详细见J2EE设计模式-前端控制模式<br>    Spring为什么要结合使用HandlerMapping以及HandlerAdapter来处理Handler?<br>    符合面向对象中的单一职责原则，代码架构清晰，便于维护，最重要的是代码可复用性高。如HandlerAdapter可能会被用于处理多种Handler。</p>
<p>1.客户端发送请求，符合.action的话，就有dispatchservlet来处理<br>    1.1.交给映射器，交给action处理<br>2.映射器根据客户的http请求，在对比&lt;bean name=”/hello.action” class=”…”&gt;如果匹配正确，再讲http请求交给<br>3.执行Action中的业务方法，最总发挥一个名叫ModelAndView的对象，其中封装了，向视图发送的数据和视图的逻辑名字。<br>4.ModelAndView对象随着响应到达核心dispatchservlet中<br>5.这时DispatcherServlet收到这个对象，它也不知道视图逻辑名是何意，有的未退一个名叫视图解析器对象，具体解析modelandview中的内容。<br>6.将试图解析后的内容交给dispatchservlet核心控制器对象，进行视图渲染，将数据填充到request与对象中，请求转发到具体的视图页面。取出数据进行再显示给用户。</p>
<p><img src="https://volcfamily.cn/images/interview-question/v.png" alt="v"><br><img src="https://volcfamily.cn/images/interview-question/w.png" alt="w"><br><img src="https://volcfamily.cn/images/interview-question/x.png" alt="x"><br>优点：</p>
<ol>
<li>提供了一种管理对象的方法，可以把中间层对象有效地组织起来。一个完美的框架“黏合剂”。</li>
<li>采用了分层结构，可以增量引入到项目中。</li>
<li>有利于面向接口编程习惯的养成。</li>
<li>目的之一是为了写出易于测试的代码。</li>
<li>非侵入性，应用程序对Spring API的依赖可以减至最小限度。</li>
<li>一致的数据访问介面。<br>缺点：<br>1，Spring的使用引入了新的复杂度，这点毋庸置疑（虽然可降低已有复杂度，但是小型项目引入Spring简直是噩梦）。<br>小型项目必需要使用spring吗？ 其实也不能论大小来说，当你想要方便地使用某些特性的时候，比如说ioc，切面，声明式事务等等，那就应该用spring，你都需要那么多spring能轻易集成并且串联的功能，为什么还要不使用spring呢？<br>当然如果项目用不上这些特性，也没说一定要用spring。<br>2，破坏了一些本来不该破坏的结构，比如一个类的完整抽象，现在需要通过看配置文件或Annotation才能完全理解,<br>这是ioc容器共有的特征，当然，一个好的ide，比如IntelliJ IDEA 在：重构、导航方面，你几乎不会感觉到因为使用ioc而带来的不便。<br>3，单个功能的测试必须启动Spring容器。<br>启动慢了点，不过在编码上用Spring JUnit Runner注解也不会多敲多少代码<br>spring和springmvc中的配置<br>spring<br>加载applicationContext.xml方法(应用上下文配置)<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;listener&gt;</span><br><span class="line">	&lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;</span><br><span class="line">&lt;/listener&gt;</span><br><span class="line">&lt;context-param&gt;</span><br><span class="line">	&lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;</span><br><span class="line">	&lt;param-value&gt;classpath:applicationContext.xml&lt;/param-value&gt;</span><br><span class="line">&lt;/context-param&gt;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>applicationContext.xml<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">    xmlns:p=&quot;http://www.springframework.org/schema/p&quot;</span><br><span class="line">    xmlns:context=&quot;http://www.springframework.org/schema/context&quot;</span><br><span class="line">    xsi:schemaLocation=&quot;</span><br><span class="line">        http://www.springframework.org/schema/beans</span><br><span class="line">        http://www.springframework.org/schema/beans/spring-beans.xsd</span><br><span class="line">        http://www.springframework.org/schema/context</span><br><span class="line">        http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;</span><br><span class="line">	&lt;!-- ###############对象创建############### --&gt;</span><br><span class="line">	&lt;bean id=&quot;user1&quot; class=&quot;cn.volc.spring.User&quot;&gt;&lt;/bean&gt;</span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure></p>
<p>springmvc配置<br>spring.xml<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot;</span><br><span class="line">	xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot; xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;</span><br><span class="line">	xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;</span><br><span class="line">	xsi:schemaLocation=&quot;</span><br><span class="line">	  http://www.springframework.org/schema/beans </span><br><span class="line">	  http://www.springframework.org/schema/beans/spring-beans-3.0.xsd</span><br><span class="line">	  http://www.springframework.org/schema/context</span><br><span class="line">      http://www.springframework.org/schema/context/spring-context-3.0.xsd</span><br><span class="line">      http://www.springframework.org/schema/mvc</span><br><span class="line">      http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd</span><br><span class="line">      &quot;&gt;</span><br><span class="line">	&lt;!-- 扫描指定包中的action --&gt;</span><br><span class="line">	&lt;context:component-scan base-package=&quot;cn.volc.springmvc&quot; &gt;&lt;/context:component-scan&gt;</span><br><span class="line">	&lt;!-- 基于注解的映射器(可选) --&gt;</span><br><span class="line">	&lt;bean</span><br><span class="line">	class=&quot;org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping&quot; /&gt;</span><br><span class="line">	&lt;!—-适配器 --&gt;</span><br><span class="line">	&lt;bean</span><br><span class="line">	class=&quot;org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter&quot;&gt;</span><br><span class="line">		&lt;property name=&quot;messageConverters&quot;&gt;</span><br><span class="line">			&lt;list&gt;</span><br><span class="line">				&lt;bean</span><br><span class="line">	class=&quot;org.springframework.http.converter.json.MappingJacksonHttpMessageConverter&quot; /&gt;</span><br><span class="line">			&lt;/list&gt;</span><br><span class="line">		&lt;/property&gt;</span><br><span class="line">	&lt;/bean&gt;</span><br><span class="line">	&lt;!-- 视图解析器(可选) --&gt;</span><br><span class="line">	&lt;bean</span><br><span class="line">	class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot; /&gt;</span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure></p>
<p>需要配置web.xml中核心过滤器(servlet)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot; xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot; id=&quot;WebApp_ID&quot; version=&quot;2.5&quot;&gt;</span><br><span class="line">&lt;!-- 配置springmvc核心控制器 --&gt;</span><br><span class="line">&lt;servlet&gt;</span><br><span class="line">	&lt;servlet-name&gt;DispatcherServlet&lt;/servlet-name&gt;</span><br><span class="line">	&lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;</span><br><span class="line">	&lt;init-param&gt;&lt;!—这个配置是在servlet中进行配置与context-parm不同 --&gt;</span><br><span class="line">		&lt;param-name&gt;ContextConfigLocation&lt;/param-name&gt;</span><br><span class="line">		&lt;param-value&gt;classpath:spring.xml&lt;/param-value&gt;</span><br><span class="line">	&lt;/init-param&gt;</span><br><span class="line">&lt;/servlet&gt;</span><br><span class="line">&lt;servlet-mapping&gt;</span><br><span class="line">	&lt;servlet-name&gt;DispatcherServlet&lt;/servlet-name&gt;</span><br><span class="line">	&lt;url-pattern&gt;*.action&lt;/url-pattern&gt;</span><br><span class="line">&lt;/servlet-mapping&gt;</span><br><span class="line">  &lt;display-name&gt;helloSpringMVCzhujie2&lt;/display-name&gt;</span><br><span class="line">  &lt;welcome-file-list&gt;</span><br><span class="line">    &lt;welcome-file&gt;index.html&lt;/welcome-file&gt;</span><br><span class="line">    &lt;welcome-file&gt;index.htm&lt;/welcome-file&gt;</span><br><span class="line">    &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;</span><br><span class="line">    &lt;welcome-file&gt;default.html&lt;/welcome-file&gt;</span><br><span class="line">    &lt;welcome-file&gt;default.htm&lt;/welcome-file&gt;</span><br><span class="line">    &lt;welcome-file&gt;default.jsp&lt;/welcome-file&gt;</span><br><span class="line">  &lt;/welcome-file-list&gt;</span><br><span class="line">&lt;/web-app&gt;</span><br></pre></td></tr></table></figure></p>
<p>视图解析器InternalResourceViewResolver【解析视图逻辑名对应的真实路径】<br>ModelAndView对象中即可以封装真实视图路径名，也可以封装视图路径的逻辑名，springmvc.xml<br>代码如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 视图解析器(框架) --&gt;  </span><br><span class="line">    &lt;bean class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;</span><br><span class="line">    	&lt;property name=&quot;prefix&quot; value=&quot;/jsp/&quot;/&gt;</span><br><span class="line">    	&lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot;/&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br></pre></td></tr></table></figure></p>
<p>Action类代码如下：<br>modelAndView.setViewName(“success”);<br>映射器Mapping【什么样的请求交给Action】<br>1）    org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping(核心)<br>将程序员定义的Action所对应的<bean>标签的name属性作为请求路径<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">  &lt;!-- 注册控制器(程序员) --&gt;</span><br><span class="line">      &lt;bean name=&quot;/add.action&quot; class=&quot;cn.itcast.javaee.springmvc.mapping.UserAction&quot;&gt;&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">      &lt;!-- 注册映射器(handler包)(框架) --&gt;</span><br><span class="line">	  &lt;bean </span><br><span class="line">class=&quot;org.springframework.web.servlet</span><br><span class="line">.handler</span><br><span class="line">.BeanNameUrlHandlerMapping&quot;&gt;&lt;/bean&gt;</span><br></pre></td></tr></table></figure></bean></p>
<p>2）    org.springframework.web.servlet.handler.SimpleUrlHandlerMapping<br>/delete.action和/update.action和/find.action请求路径都交由<bean>标签为id的Action，即<br>多个路径对应同一个Action<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 注册控制器(程序员) --&gt;</span><br><span class="line"> &lt;bean id=&quot;userActionID&quot; class=&quot;cn.itcast.javaee.springmvc.mapping.UserAction&quot;&gt;&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line"> &lt;!-- 注册映射器(handler包)(框架) --&gt;</span><br><span class="line"> &lt;bean class=&quot;org.springframework.web.servlet.handler.SimpleUrlHandlerMapping&quot;&gt;</span><br><span class="line"> 		&lt;property name=&quot;mappings&quot;&gt;</span><br><span class="line"> 			&lt;props&gt;</span><br><span class="line"> 				&lt;prop key=&quot;/delete.action&quot;&gt;userActionID&lt;/prop&gt;</span><br><span class="line"> 				&lt;prop key=&quot;/update.action&quot;&gt;userActionID&lt;/prop&gt;</span><br><span class="line"> 				&lt;prop key=&quot;/find.action&quot;&gt;userActionID&lt;/prop&gt;</span><br><span class="line"> 			&lt;/props&gt;</span><br><span class="line"> 		&lt;/property&gt;</span><br><span class="line"> &lt;/bean&gt;</span><br></pre></td></tr></table></figure></bean></p>
<p>适配器Adapter【Action实现什么接口】<br>1）    Action实现Controller接口<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter</span><br><span class="line">public class EmpAction implements Controller&#123;</span><br><span class="line">	public ModelAndView handleRequest(HttpServletRequest request,HttpServletResponse response) throws Exception &#123;</span><br><span class="line">		System.out.println(&quot;EmpAction::handleRequest&quot;);</span><br><span class="line">		request.setCharacterEncoding(&quot;UTF-8&quot;);</span><br><span class="line">		String username = request.getParameter(&quot;username&quot;);</span><br><span class="line">		ModelAndView modelAndView = new ModelAndView();</span><br><span class="line">		modelAndView.addObject(&quot;message&quot;,username);</span><br><span class="line">		modelAndView.setViewName(&quot;/jsp/success.jsp&quot;);</span><br><span class="line">		return modelAndView;</span><br></pre></td></tr></table></figure></p>
<p>控制器Controller【Action继承什么类】<br>1.org.springframework.web.servlet.mvc.ParameterizableViewController<br>如果请求是/hello.action的请求路径，则直接跳转到/jsp/success.jsp页面，<br>不经过程序员定义的控制器Action<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- /index.action请求，直接转发到/index.jsp页面 --&gt;</span><br><span class="line">      &lt;bean name=&quot;/index.action&quot; class=&quot;org.springframework.web.servlet.mvc.ParameterizableViewController&quot;&gt;</span><br><span class="line">      		&lt;property name=&quot;viewName&quot; value=&quot;/index.jsp&quot;/&gt;</span><br><span class="line">      &lt;/bean&gt;</span><br><span class="line">      </span><br><span class="line">      </span><br><span class="line">     &lt;!-- 注册视图解析器(view包)(框架) </span><br><span class="line">	  &lt;bean class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;</span><br><span class="line">	  		&lt;property name=&quot;prefix&quot; value=&quot;/&quot;/&gt;</span><br><span class="line">	  		&lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot;/&gt;</span><br><span class="line">	  &lt;/bean&gt;</span><br><span class="line">      --&gt;</span><br></pre></td></tr></table></figure></p>
<ol start="2">
<li>org.springframework.web.servlet.mvc.AbstractCommandController<br>能够以实体的形式，收集客户端参数<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">public class AdminAction extends AbstractCommandController&#123;</span><br><span class="line">	public AdminAction()&#123;</span><br><span class="line">		this.setCommandClass(Admin.class);</span><br><span class="line">	&#125;</span><br><span class="line">	@Override</span><br><span class="line">	protected ModelAndView handle(HttpServletRequest request,HttpServletResponse response, Object obj, BindException bindException)throws Exception &#123;</span><br><span class="line">		System.out.println(&quot;AdminAction::handle&quot;);</span><br><span class="line">		ModelAndView modelAndView = new ModelAndView();</span><br><span class="line">		Admin admin = null;</span><br><span class="line">		if(obj instanceof Admin)&#123;</span><br><span class="line">			admin = (Admin) obj;</span><br><span class="line">		&#125;</span><br><span class="line">		modelAndView.addObject(&quot;username&quot;,admin.getUsername());</span><br><span class="line">		modelAndView.addObject(&quot;gender&quot;,admin.getGender());</span><br><span class="line">		modelAndView.addObject(&quot;hiredate&quot;,admin.getHiredate());</span><br><span class="line">		modelAndView.setViewName(&quot;/jsp/success.jsp&quot;);</span><br><span class="line">		return modelAndView;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 请求处理类 --&gt;</span><br><span class="line">      &lt;bean name=&quot;/add.action&quot; class=&quot;cn.itcast.javaee.springmvc.controller.AdminAction&quot;&gt;</span><br><span class="line">      &lt;/bean&gt;</span><br><span class="line">      </span><br><span class="line">      &lt;!-- 映射器 --&gt;</span><br><span class="line">	  &lt;bean class=&quot;org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping&quot;&gt;</span><br><span class="line">	  &lt;/bean&gt;</span><br></pre></td></tr></table></figure>
<p>spring-mvc中json格式对象数据传输<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@RequestMapping(&quot;/doAjax&quot;)</span><br><span class="line">@ResponseBody //如果返回json格式，需要这个注解，这里用来测试环境</span><br><span class="line">public Object doAjax(Supplier supplier)&#123;</span><br><span class="line">	System.out.println(&quot;---doAjax.supplier:&quot;+supplier);</span><br><span class="line">	supplier.setSupName(&quot;supName1&quot;);</span><br><span class="line">	return supplier;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>在spring.xml中配置<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 同时开启json格式的支持 --&gt;</span><br><span class="line">&lt;mvc:annotation-driven&gt;&lt;/mvc:annotation-driven&gt;</span><br></pre></td></tr></table></figure></p>
<p>struts与json数据省份-城市-区域三级联动【Struts2 + JSON版】<br>action<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">	 * 根据省份查询城市</span><br><span class="line">	 */</span><br><span class="line">	public String findCityByProvinceMethod() throws Exception&#123;</span><br><span class="line">		cityList = new ArrayList&lt;String&gt;();</span><br><span class="line">		if(&quot;湖北&quot;.equals(province))&#123;</span><br><span class="line">			cityList.add(&quot;武汉&quot;);</span><br><span class="line">			cityList.add(&quot;黄岗&quot;);</span><br><span class="line">		&#125;else if(&quot;湖南&quot;.equals(province))&#123;</span><br><span class="line">			cityList.add(&quot;岳阳&quot;);</span><br><span class="line">			cityList.add(&quot;张家界&quot;);</span><br><span class="line">		&#125;else if(&quot;广东&quot;.equals(province))&#123;</span><br><span class="line">			cityList.add(&quot;韶关&quot;);</span><br><span class="line">			cityList.add(&quot;东莞&quot;);</span><br><span class="line">		&#125;</span><br><span class="line">		return &quot;ok&quot;;</span><br><span class="line">	&#125;</span><br><span class="line">    /**</span><br><span class="line">	 * 根据城市查询区域</span><br><span class="line">	 */</span><br><span class="line">	public String findAreaByCityMethod() throws Exception&#123;</span><br><span class="line">		areaList = new ArrayList&lt;String&gt;();</span><br><span class="line">		if(&quot;武汉&quot;.equals(city))&#123;</span><br><span class="line">			areaList.add(&quot;AA&quot;);</span><br><span class="line">			areaList.add(&quot;BB&quot;);</span><br><span class="line">		&#125;else if(&quot;黄岗&quot;.equals(city))&#123;</span><br><span class="line">			areaList.add(&quot;CC&quot;);</span><br><span class="line">			areaList.add(&quot;DD&quot;);</span><br><span class="line">		&#125;else if(&quot;岳阳&quot;.equals(city))&#123;</span><br><span class="line">			areaList.add(&quot;EE&quot;);</span><br><span class="line">			areaList.add(&quot;FF&quot;);</span><br><span class="line">		&#125;else if(&quot;张家界&quot;.equals(city))&#123;</span><br><span class="line">			areaList.add(&quot;GG&quot;);</span><br><span class="line">			areaList.add(&quot;HH&quot;);</span><br><span class="line">		&#125;else if(&quot;韶关&quot;.equals(city))&#123;</span><br><span class="line">			areaList.add(&quot;II&quot;);</span><br><span class="line">			areaList.add(&quot;JJ&quot;);</span><br><span class="line">		&#125;else if(&quot;东莞&quot;.equals(city))&#123;</span><br><span class="line">			areaList.add(&quot;KK&quot;);</span><br><span class="line">			areaList.add(&quot;LL&quot;);</span><br><span class="line">		&#125;</span><br><span class="line">		return &quot;ok&quot;;</span><br><span class="line">	&#125;</span><br><span class="line">private List&lt;String&gt; cityList;</span><br><span class="line">	private List&lt;String&gt; areaList;</span><br><span class="line">	public List&lt;String&gt; getCityList() &#123;//json与struts结合使用需要提供get方法</span><br><span class="line">		return cityList;</span><br><span class="line">	&#125;</span><br><span class="line">	public List&lt;String&gt; getAreaList() &#123;</span><br><span class="line">		return areaList;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure></p>
<p>struts.xml<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;package name=&quot;provinceCityAreaPackage&quot; extends=&quot;json-default&quot; namespace=&quot;/&quot;&gt;</span><br><span class="line">	   	&lt;action </span><br><span class="line">			name=&quot;findCityByProvinceRequest&quot; </span><br><span class="line">			class=&quot;cn.itcast.javaee.js.provincecityarea.ProvinceCityAreaAction&quot; </span><br><span class="line">			method=&quot;findCityByProvinceMethod&quot;&gt;</span><br><span class="line">	   		&lt;result name=&quot;ok&quot; type=&quot;json&quot;&gt;</span><br><span class="line">	   		&lt;/result&gt;</span><br><span class="line">	   	&lt;/action&gt;</span><br><span class="line">   &lt;/package&gt;</span><br></pre></td></tr></table></figure></p>
<p>导包：struts2-json-plugin-2.3.1.1.jar</p>
<p>javabean2json<br>使用第三方工具，将JavaBean对象/List或Set或Map对象转成JSON<br>    准备导入第三方jar包：<br>    》commons-beanutils-1.7.0.jar<br>    》commons-collections-3.1.jar<br>    》commons-lang-2.5.jar<br>》commons-logging-1.1.1.jar<br>》ezmorph-1.0.3.jar<br>》json-lib-2.1-jdk15.jar<br>   （1）JavaBean—–&gt;JSON<br>        》JSONArray jsonArray = JSONArray.fromObject(city);<br>        》String jsonJAVA = jsonArray.toString();<br>   （2）List<javabean>—–&gt;JSON<br>        》JSONArray jsonArray = JSONArray.fromObject(cityList);<br>        》String jsonJAVA = jsonArray.toString();<br>   （3）List<string>—–&gt;JSON<br>        》JSONArray jsonArray = JSONArray.fromObject(stringList);<br>        》String jsonJAVA = jsonArray.toString();<br>   （4）Set<javabean>—–&gt;JSON<br>        》JSONArray jsonArray = JSONArray.fromObject(citySet);<br>        》String jsonJAVA = jsonArray.toString();<br>   （5）Map&lt;String,Object&gt;—–&gt;JSON<br>        》JSONArray jsonArray = JSONArray.fromObject(map);<br>        》String jsonJAVA = jsonArray.toString();<br>        最后一个例子切记，将来jQuery-EasyUI-DataGrid组件时我们还要用到<br>        将来，在企业中，就算脱离struts2的环境，也能用第三方工具，将Java类型转成JSON文本</javabean></string></javabean></p>
<h3 id="介绍一下Spring的事务管理"><a href="#介绍一下Spring的事务管理" class="headerlink" title="介绍一下Spring的事务管理"></a>介绍一下Spring的事务管理</h3><p>事务管理对于企业应用而言至关重要。它保证了用户的每一次操作都是可靠的，即便出现了异常的访问情况，也不至于破坏后台数据的完整性。就像银行的自助取款机，通常都能正常为客户服务，但是也难免遇到操作过程中机器突然出故障的情况，此时，事务就必须确保出故障前对账户的操作不生效，就像用户刚才完全没有使用过取款机一样，以保证用户和银行的利益都不受损失。<br>编程式事务控制<br>    比较灵活，但开发起来比较繁琐： 每次都要开启、提交、回滚<br>声明式事务控制<br>    spring声明式事务管理，核心实现就是基于Aop</p>
<h3 id="springmvc与struts2的区别"><a href="#springmvc与struts2的区别" class="headerlink" title="springmvc与struts2的区别"></a>springmvc与struts2的区别</h3><p>1）springmvc的入口是一个servlet，即前端控制器，例如：<em>.action<br>   struts2入口是一个filter过虑器，即前端过滤器，例如：/</em><br>2）springmvc是基于方法开发，传递参数是通过方法形参，可以设计为单例<br>   struts2是基于类开发，传递参数是通过类的属性，只能设计为多例<br>3）springmvc通过参数解析器是将request对象内容进行解析成方法形参，将响应数据和页面封装成<br>       ModelAndView对象，最后又将模型数据通过request对象传输到页面<br>   struts采用值栈存储请求和响应的数据，通过OGNL存取数据</p>
<h3 id="Spring的安全（线程安全？）问题？"><a href="#Spring的安全（线程安全？）问题？" class="headerlink" title="Spring的安全（线程安全？）问题？"></a>Spring的安全（线程安全？）问题？</h3><p>Spring框架里的bean，或者说组件，获取实例的时候都是默认的单例模式，这是在多线程开发的时候要尤其注意的地方<br>Spring利用ThreadLocal解决线程安全问题</p>
<p>我们知道在一般情况下，只有无状态的Bean才可以在多线程环境下共享，在Spring中，绝大部分Bean都可以声明为singleton作用域。就是因为Spring对一些Bean（如RequestContextHolder、TransactionSynchronizationManager、LocaleContextHolder）中非线程安全的“状态性对象”采用ThreadLocal进行封装，让它们也成为线程安全的“状态性对象”，因为有状态的Bean就能够以singleton方式在多线程中正常工作了。</p>
<h3 id="xml配置与注解的优缺点"><a href="#xml配置与注解的优缺点" class="headerlink" title="xml配置与注解的优缺点"></a>xml配置与注解的优缺点</h3><p>xml配置文件方式优点：<br>1、降低耦合，使容易扩展。<br>2、对象之间的关系一目了然。<br>3、xml配置文件比注解功能齐全。<br>xml配置文件方式缺点：<br>1、配置文件配置工作量相对注解要大。<br>注解方式优点：</p>
<p>1、在class文件中，可以降低维护成本<br>2、提高开发效率。</p>
<p>注解方式缺点：<br>1、如果对annotation进行修改，需要重新编译整个工程。<br>2、业务类之间的关系不如XML配置那样一目了然。<br>3、程序中过多的annotation，对于代码的简洁度有一定影响。<br>4、annotation貌似功能没有xml配置文件齐全</p>
<h3 id="mybatis工作流程"><a href="#mybatis工作流程" class="headerlink" title="mybatis工作流程"></a>mybatis工作流程</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Reader reader = Resources.getResourceAsReader(&quot;mybatis.xml&quot;);//configraution.config也可以</span><br></pre></td></tr></table></figure>
<p>1）通过Reader对象读取src目录下的mybatis.xml配置文件(该文本的位置和名字可任意)<br>2）通过SqlSessionFactoryBuilder对象创建SqlSessionFactory对象</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Reader reader = Resources.getResourceAsReader(&quot;mybatis.xml&quot;);//configraution.config也可以</span><br><span class="line">			sqlSessionFactory = new SqlSessionFactoryBuilder().build(reader);</span><br></pre></td></tr></table></figure>
<p>3）从当前线程中获取SqlSession对象<br>4）事务开始，在mybatis中默认<br>5）通过SqlSession对象读取StudentMapper.xml映射文件中的操作编号，从而读取sql语句<br>6）事务提交，必写<br>7）关闭SqlSession对象，并且分开当前线程与SqlSession对象，让GC尽早回收</p>
<p>scm32在事务管理中注入了datasource<br>优点：</p>
<ol>
<li>配置generatorConfig.xml可以逆向生成entity实体文件,和相应的entityMapper.xml文件</li>
<li>易于上手和掌握。</li>
<li>sql写在xml里，便于统一管理和优化。</li>
<li>解除sql与程序代码的耦合。</li>
<li>提供映射标签，支持对象与数据库的orm字段关系映射</li>
<li>提供对象关系映射标签，支持对象关系组建维护</li>
<li>提供xml标签，支持编写动态sql。</li>
</ol>
<p>scm32项目的application配置<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;</span><br><span class="line">	xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot;</span><br><span class="line">	xmlns:p=&quot;http://www.springframework.org/schema/p&quot;</span><br><span class="line">	xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans </span><br><span class="line">	http://www.springframework.org/schema/beans/spring-beans-3.2.xsd</span><br><span class="line">	http://www.springframework.org/schema/context </span><br><span class="line">	http://www.springframework.org/schema/context/spring-context-3.2.xsd</span><br><span class="line">	http://www.springframework.org/schema/tx </span><br><span class="line">	http://www.springframework.org/schema/tx/spring-tx-3.2.xsd</span><br><span class="line">	http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.2.xsd&quot;&gt;</span><br><span class="line"></span><br><span class="line">	&lt;!-- 配置数据源，记得去掉myBatis-config.xml的数据源相关配置 --&gt;</span><br><span class="line">	&lt;bean id=&quot;dataSource&quot; class=&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;&gt;</span><br><span class="line">		&lt;property name=&quot;driverClass&quot; value=&quot;com.mysql.jdbc.Driver&quot; /&gt;</span><br><span class="line">		&lt;property name=&quot;jdbcUrl&quot;</span><br><span class="line">			value=&quot;jdbc:mysql://localhost:3306/scm?useUnicode=true&amp;amp;characterEncoding=UTF-8&quot; /&gt;</span><br><span class="line">		&lt;property name=&quot;user&quot; value=&quot;root&quot; /&gt;</span><br><span class="line">		&lt;property name=&quot;password&quot; value=&quot;root&quot; /&gt;</span><br><span class="line">	&lt;/bean&gt;</span><br><span class="line">	&lt;!-- 配置session工厂 --&gt;</span><br><span class="line">	&lt;bean id=&quot;sqlSessionFactory&quot; class=&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;&gt;</span><br><span class="line">		&lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot; /&gt;</span><br><span class="line">		&lt;property name=&quot;configLocation&quot; value=&quot;classpath:myBatis-config.xml&quot; /&gt;</span><br><span class="line">		&lt;!--配置扫描式加载SQL映射文件,记得去掉mybatis-config配置--&gt;</span><br><span class="line">		&lt;property name=&quot;mapperLocations&quot; value=&quot;classpath:cn/itcast/scm/dao/*.xml&quot;/&gt;</span><br><span class="line">	&lt;/bean&gt;</span><br><span class="line">	&lt;!-- 配置事务管理器,管理数据源事务处理 --&gt;</span><br><span class="line">	&lt;bean id=&quot;transactionManager&quot;</span><br><span class="line">		class=&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;&gt;</span><br><span class="line">		&lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot; /&gt;</span><br><span class="line">	&lt;/bean&gt;</span><br><span class="line">	&lt;!-- 配置事务通知 --&gt;</span><br><span class="line">	&lt;tx:advice id=&quot;advice&quot; transaction-manager=&quot;transactionManager&quot;&gt;</span><br><span class="line">		&lt;tx:attributes&gt;</span><br><span class="line">			&lt;!-- 默认只处理运行时异常，可加rollback-for=&quot;Exception/Throwable&quot;等处理所有异常或包括错误 --&gt;</span><br><span class="line">			&lt;tx:method name=&quot;insert*&quot; propagation=&quot;REQUIRED&quot;</span><br><span class="line">				rollback-for=&quot;Exception&quot; /&gt;</span><br><span class="line">			&lt;tx:method name=&quot;update*&quot; propagation=&quot;REQUIRED&quot;</span><br><span class="line">				rollback-for=&quot;Exception&quot; /&gt;</span><br><span class="line">			&lt;tx:method name=&quot;delete*&quot; propagation=&quot;REQUIRED&quot;</span><br><span class="line">				rollback-for=&quot;Exception&quot; /&gt;</span><br><span class="line">			&lt;tx:method name=&quot;*&quot; propagation=&quot;SUPPORTS&quot; /&gt;</span><br><span class="line">		&lt;/tx:attributes&gt;</span><br><span class="line">	&lt;/tx:advice&gt;</span><br><span class="line">	&lt;!-- 配置切面织入的范围,后边要把事务边界定在service层 --&gt;</span><br><span class="line">	&lt;aop:config&gt;</span><br><span class="line">		&lt;aop:advisor advice-ref=&quot;advice&quot;</span><br><span class="line">			pointcut=&quot;execution(* cn.itcast.scm.service.impl.*.*(..))&quot; /&gt;</span><br><span class="line">	&lt;/aop:config&gt;</span><br><span class="line">	&lt;!-- 配置SessionTemplate，已封装了繁琐的数据操作 --&gt;</span><br><span class="line">	&lt;bean id=&quot;sqlSessionTemplate&quot; class=&quot;org.mybatis.spring.SqlSessionTemplate&quot;&gt;</span><br><span class="line">		&lt;constructor-arg name=&quot;sqlSessionFactory&quot; ref=&quot;sqlSessionFactory&quot; /&gt;</span><br><span class="line">	&lt;/bean&gt;</span><br><span class="line">	&lt;!-- &lt;context:component-scan base-package=&quot;*&quot; /&gt; --&gt;</span><br><span class="line">	&lt;!-- 自动扫描组件，要把controller去除，他们是在spring-mvc.xml中配置，如果不去除会影响事务管理。 --&gt;</span><br><span class="line">	&lt;context:component-scan base-package=&quot;cn.itcast&quot;&gt;</span><br><span class="line">		&lt;context:exclude-filter type=&quot;annotation&quot;</span><br><span class="line">			expression=&quot;org.springframework.stereotype.Controller&quot; /&gt;</span><br><span class="line">	&lt;/context:component-scan&gt;</span><br><span class="line">	&lt;!-- 配置 转换器，对于在basePackage设置的包（包括子包）下的接口类，</span><br><span class="line">	如果接口类的全类名在Mapper.xml文件中和定义过命名空间一致，</span><br><span class="line">	 将被转换成spring的BEAN，在调用 </span><br><span class="line">		的地方通过@Autowired方式将可以注入接口实例 --&gt;</span><br><span class="line">	&lt;bean class=&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;&gt;</span><br><span class="line">	&lt;!-- 扫描cn.itcast.scm.dao实体映射文件。并为每一个实体映射配置文件注入sqlSessionFactory对象，</span><br><span class="line">		实体映射配置文件就可以转化成javabean对象也就是dao实例对象，</span><br><span class="line">		而且通过serviceImpl中@Autowired来位serviceImpl注入dao实体对象 --&gt;</span><br><span class="line">		&lt;property name=&quot;sqlSessionFactory&quot; ref=&quot;sqlSessionFactory&quot; /&gt;</span><br><span class="line">		&lt;property name=&quot;basePackage&quot; value=&quot;cn.itcast.scm.dao&quot; /&gt;</span><br><span class="line">	&lt;/bean&gt;</span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure></p>
<p>缺点：</p>
<ol>
<li>sql工作量很大，尤其是字段多、关联表多时，更是如此。</li>
<li>sql依赖于数据库，导致数据库移植性差。</li>
<li>由于xml里标签id必须唯一，导致DAO中方法不支持方法重载。</li>
<li>字段映射标签和对象关系映射标签仅仅是对映射关系的描述，具体实现仍然依赖于sql。（比如配置了一对多Collection标签，如果sql里没有join子表或查询子表的话，查询后返回的对象是不具备对象关系的，即Collection的对象为null）</li>
<li>DAO层过于简单，对象组装的工作量较大。</li>
<li>不支持级联更新、级联删除。</li>
<li>编写动态sql时,不方便调试，尤其逻辑复杂时。<br>8 提供的写动态sql的xml标签功能简单（连struts都比不上），编写动态sql仍然受限，且可读性低。</li>
<li>若不查询主键字段，容易造成查询出的对象有“覆盖”现象。</li>
<li>参数的数据类型支持不完善。（如参数为Date类型时，容易报没有get、set方法，需在参数上加@param）</li>
<li>多参数时，使用不方便，功能不够强大。（目前支持的方法有map、对象、注解@param以及默认采用012索引位的方式）</li>
<li>缓存使用不当，容易产生脏数据。<br>mybatis配置文件<br>mybatis.xml<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE configuration PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span><br><span class="line">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;</span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">	&lt;environments default=&quot;development&quot;&gt;</span><br><span class="line">		&lt;environment id=&quot;development&quot;&gt;</span><br><span class="line">			&lt;transactionManager type=&quot;JDBC&quot;/&gt;</span><br><span class="line">			&lt;dataSource type=&quot;POOLED&quot;&gt;</span><br><span class="line">				&lt;property name=&quot;driver&quot; value=&quot;com.mysql.jdbc.Driver&quot;/&gt;	</span><br><span class="line">				&lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://127.0.0.1:3306/mybatis&quot;/&gt;	</span><br><span class="line">				&lt;property name=&quot;username&quot; value=&quot;root&quot;/&gt;</span><br><span class="line">				&lt;property name=&quot;password&quot; value=&quot;root&quot;/&gt;</span><br><span class="line">			&lt;/dataSource&gt;</span><br><span class="line">		&lt;/environment&gt;</span><br><span class="line">	&lt;/environments&gt;</span><br><span class="line">	&lt;mappers&gt;</span><br><span class="line">		&lt;mapper resource=&quot;cn/volc/entity/CourseMapper.xml&quot;/&gt;</span><br><span class="line">		&lt;mapper resource=&quot;cn/volc/entity/StudentMapper.xml&quot;/&gt;</span><br><span class="line">	&lt;/mappers&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br><span class="line">CourseMapper.xml</span><br><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><br><span class="line">&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span><br><span class="line">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span><br><span class="line">&lt;mapper namespace=&quot;courseNamespace&quot;&gt;</span><br><span class="line">	&lt;resultMap type=&quot;cn.volc.entity.Course&quot; id=&quot;courseMap&quot;&gt;</span><br><span class="line">		&lt;id property=&quot;id&quot; column=&quot;cid&quot; /&gt;</span><br><span class="line">		&lt;result property=&quot;name&quot; column=&quot;cname&quot;/&gt;</span><br><span class="line">	&lt;/resultMap&gt;</span><br><span class="line">	&lt;select id=&quot;findCourseByName&quot; parameterType=&quot;string&quot; resultMap=&quot;courseMap&quot;&gt;</span><br><span class="line">		select c.cid,c.cname</span><br><span class="line">		from students s,middles m,courses c</span><br><span class="line">		where s.sid = m.sid </span><br><span class="line">		and m.cid = c.cid</span><br><span class="line">		and s.sname = #&#123;name&#125;</span><br><span class="line">	&lt;/select&gt;</span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>StudentMapper.xml<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><br><span class="line">&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span><br><span class="line">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span><br><span class="line">&lt;mapper namespace=&quot;studentNamespace&quot;&gt;</span><br><span class="line">	&lt;resultMap type=&quot;cn.volc.entity.Student&quot; id=&quot;studentMap&quot;&gt;</span><br><span class="line">		&lt;id property=&quot;id&quot; column=&quot;sid&quot; /&gt;</span><br><span class="line">		&lt;result property=&quot;name&quot; column=&quot;sname&quot;/&gt;</span><br><span class="line">	&lt;/resultMap&gt;</span><br><span class="line">	&lt;select id=&quot;findStudentByName&quot; parameterType=&quot;string&quot; resultMap=&quot;studentMap&quot;&gt;</span><br><span class="line">		select s.sid,s.sname</span><br><span class="line">		from students s,middles m,courses c</span><br><span class="line">		where s.sid = m.sid </span><br><span class="line">		and m.cid = c.cid</span><br><span class="line">		and c.cname = #&#123;name&#125;</span><br><span class="line">	&lt;/select&gt;</span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="请你谈谈SSH整合"><a href="#请你谈谈SSH整合" class="headerlink" title="请你谈谈SSH整合"></a>请你谈谈SSH整合</h3><p>SSH：<br>Struts（表示层）+Spring（业务层）+Hibernate（持久层）<br>Struts：<br>Struts是一个表示层框架，主要作用是界面展示，接收请求，分发请求。<br>在MVC框架中，Struts属于VC层次，负责界面表现，负责MVC关系的分发。（View：沿用JSP，HTTP，Form，Tag，Resourse ；Controller：ActionServlet，struts-config.xml，Action）<br>Hibernate：<br>Hibernate是一个持久层框架，它只负责与关系数据库的操作。<br>Spring：<br>Spring是一个业务层框架，是一个整合的框架，能够很好地黏合表示层与持久层。</p>
<h3 id="webservice"><a href="#webservice" class="headerlink" title="webservice"></a>webservice</h3><h4 id="网络七层协议"><a href="#网络七层协议" class="headerlink" title="网络七层协议"></a>网络七层协议</h4><p>OSI是一个开放性的通信系统互连参考模型，他是一个定义的非常好的协议规范。OSI模型有7层结构，每层都可以有几个子层。 OSI的7层从上到下分别是 7 应用层 6 表示层 5 会话层 4 传输层 3 网络层 2 数据链路层 1 物理层 其中高层，即7、6、5、4层定义了应用程序的功能，下面3层，即3、2、1层主要面向通过网络的端到端的数据流。</p>
<h4 id="为什么要分层"><a href="#为什么要分层" class="headerlink" title="为什么要分层"></a>为什么要分层</h4><p>为了为了简化网络设计的复杂性，通信协议采用分层的结构，各层协议之间既相互独立又相互高效的协调工作。对于复杂的通信协议，其结构应该是采用层次的。分层的协议可以带来很多便利：<br>分层的好处有：<br>一 灵活性好：当任何一层发生变化时，只要层间接口关系保持不变，则在这层以上或以下各层均不受影响。此外，对某一层提供的服务还可进行修改。当某层提供的服务不再需要时，甚至可以将这层取消，更容易管理。</p>
<p>二各层之间是独立的：在各层间标准化接口，允许不同的产品只提供各层功能的一部分，某一层不需要知道它的下一层是如何实现的，而仅仅需要知道该层通过层间的接口所提供的服务。由于每一层只实现一种相对独立的功能，所以比较容易实现！</p>
<p>Socket就是为网络服务提供的一种机制。<br>数据在两个Socket间通过IO传输。</p>
<p>OSI的七层模型  ： 物理层、数据链路层、网络层、传输层、表示层、会话层、应用层</p>
<pre><code>- Socket访问  ： Socket属于传输层，它是对Tcp/ip协议的实现，包含TCP/UDP,它是所有通信协议
                  的基础，Http协议需要Socket支持，以Socket作为基础
</code></pre><p>socket特点：</p>
<pre><code> 1. 开启端口，该通信是 长连接的通信 ，很容易被防火墙拦截，可以通过心跳机制
              来实现 ，开发难度片段
 2. 传输的数据一般是字符串 ，可读性不强
           lj|16|1|60|up  
     3. socket端口不便于推广 
    http:17.23.23.2:2345   www.jd.com   www.360buy.com
 4. 性能相对于其他的通信协议是最优的
- Http协议访问 ：属于应用层的协议，对Socket进行了封装
     1. 跨平台 
 2. 传数据不够友好 ： 
    get请求： http://127.0.0.1:8888?username=lj&amp;pwd=1234
 3. 对第三方应用提供的服务，希望对外暴露服务接口
</code></pre><p>http：属于应用层的协议，对Socket进行了封装</p>
<pre><code>     1. 跨平台 
 2. 传数据不够友好 ： 
    get请求： http://127.0.0.1:8888?username=lj&amp;pwd=1234
 3. 对第三方应用提供的服务，希望对外暴露服务接口


问题：
  1. 数据封装不够友好 ：可以用xml封装数据 
  2. 希望给第三方应用提供web方式的服务  （http + xml） = web  Service
</code></pre><h3 id="WebService概念介绍"><a href="#WebService概念介绍" class="headerlink" title="WebService概念介绍"></a>WebService概念介绍</h3><p>1.Web Service<br>能使得运行在不同机器上的不同应用无须借助附加的、专门的第三方软件或硬件， 就可相互交换数据或集成。依据Web Service规范实施的应用之间， 无论它们所使用的语言、 平台或内部协议是什么， 都可以相互交换数据<br>通俗的讲，Web Service就是一个部署在Web服务器上的一个应用，它向外界暴露出一个能够通过Web进行调用的API。这就是说，你能够用编程的方法通过Web来调用这个应用程序。我们把调用这个Web Service 的应用程序叫做客户端,发布这个web服务的应用程序器称为Web Service服务器<br>2.webservice的规则</p>
<pre><code>- xml 
- soap ：（simple object access 协议） ：简单对象访问协议，比http协议方法速度慢
- wsdl ： webservice描述语言 ，它也是xml实现的
</code></pre><p>通过get或post调用第三方发的webservice服务</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line">import java.io.ByteArrayOutputStream;</span><br><span class="line">import java.io.FileInputStream;</span><br><span class="line">import java.io.InputStream;</span><br><span class="line">import java.net.HttpURLConnection;</span><br><span class="line">import java.net.URL;</span><br><span class="line">import org.apache.commons.httpclient.HttpClient;</span><br><span class="line">import org.apache.commons.httpclient.methods.PostMethod;</span><br><span class="line"></span><br><span class="line">/**调用第三方的webservice服务 ，获取电话号码信息</span><br><span class="line"> * </span><br><span class="line"> * @author 李俊  2015年5月16日</span><br><span class="line"> */</span><br><span class="line">public class MobileCodeService &#123;</span><br><span class="line">	//1. http-get方式访问webservice</span><br><span class="line">	public void get(String mobileCode ,String userID ) throws Exception&#123;</span><br><span class="line">		/*</span><br><span class="line">		 * HTTP请求由三部分组成：请求行，请求头，请求正文</span><br><span class="line">		 * 	请求行：请求方法 url/http版本</span><br><span class="line">		 * 	url：</span><br><span class="line">		 * 		资源路径路径：/WebServices/MobileCodeWS.asmx/getMobileCodeInfo?mobileCode=string&amp;userID=string</span><br><span class="line">		 *  	主机ip: ws.webxml.com.cn(主机的IP地址)</span><br><span class="line">		 */</span><br><span class="line">		URL url=new URL(&quot;http://webservice.webxml.com.cn/WebServices/MobileCodeWS.asmx/getMobileCodeInfo?mobileCode=&quot;+mobileCode+</span><br><span class="line">				&quot;&amp;userID=&quot;+userID);</span><br><span class="line">		//开启连接</span><br><span class="line">		HttpURLConnection conn=(HttpURLConnection) url.openConnection();</span><br><span class="line">		//延迟时间</span><br><span class="line">		conn.setConnectTimeout(5000);</span><br><span class="line">		//请求方法</span><br><span class="line">		conn.setRequestMethod(&quot;GET&quot;);</span><br><span class="line">		//响应码</span><br><span class="line">		if(conn.getResponseCode()==HttpURLConnection.HTTP_OK)&#123; //获取并判断相应结果码是否为200，成功响应了以后才能获取返回的数据</span><br><span class="line">			InputStream is=conn.getInputStream();</span><br><span class="line">			//写出到内存的流 ，将流对象写出到内存中  </span><br><span class="line">			ByteArrayOutputStream boas=new ByteArrayOutputStream();</span><br><span class="line">			byte[] buffer=new byte[1024];</span><br><span class="line">			int len=-1;</span><br><span class="line">			while((len=is.read(buffer))!=-1)&#123;//输入流开始读到buffer中，每一次读取判断并判断是否读到了内容</span><br><span class="line">				boas.write(buffer, 0, len);</span><br><span class="line">			&#125;</span><br><span class="line">		    System.out.println(&quot;GET请求获取的数据:&quot;+boas.toString());	</span><br><span class="line">		    boas.close();</span><br><span class="line">		    is.close();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	//2.Post请求 ：通过Http-Client 框架来模拟实现 Http请求</span><br><span class="line">	public void post(String mobileCode ,String userID) throws Exception&#123;</span><br><span class="line">		/**HttpClient访问网络的实现步骤：</span><br><span class="line">		 *  1. 准备一个请求客户端:浏览器 </span><br><span class="line">		 *  2. 准备请求方式： GET 、POST</span><br><span class="line">		 *  3. 设置要传递的参数</span><br><span class="line">		 *  4.执行请求</span><br><span class="line">		 *  5. 获取结果</span><br><span class="line">		 */</span><br><span class="line">		HttpClient client=new HttpClient();</span><br><span class="line">		PostMethod postMethod=new PostMethod(&quot;http://webservice.webxml.com.cn/WebServices/MobileCodeWS.asmx/getMobileCodeInfo&quot;);</span><br><span class="line">		//3.设置请求参数</span><br><span class="line">		postMethod.setParameter(&quot;mobileCode&quot;, mobileCode);</span><br><span class="line">		postMethod.setParameter(&quot;userID&quot;, userID);</span><br><span class="line">		//4.执行请求 ,结果码</span><br><span class="line">		int code=client.executeMethod(postMethod);</span><br><span class="line">		//5. 获取结果</span><br><span class="line">		String result=postMethod.getResponseBodyAsString();</span><br><span class="line">		System.out.println(&quot;Post请求的结果：&quot;+result);</span><br><span class="line">	&#125;</span><br><span class="line">	//2.Post请求 ：通过Http-Client 框架来模拟实现 Http请求</span><br><span class="line">	public void soap() throws Exception&#123;</span><br><span class="line"></span><br><span class="line">		HttpClient client=new HttpClient();</span><br><span class="line">		PostMethod postMethod=new PostMethod(&quot;http://webservice.webxml.com.cn/WebServices/MobileCodeWS.asmx&quot;);</span><br><span class="line">		//3.设置请求参数</span><br><span class="line">          postMethod.setRequestBody(new FileInputStream(&quot;c:/soap.xml&quot;)); </span><br><span class="line">          //修改请求的头部</span><br><span class="line">          postMethod.setRequestHeader(&quot;Content-Type&quot;, &quot;text/xml; charset=utf-8&quot;);</span><br><span class="line">		//4.执行请求 ,结果码</span><br><span class="line">		int code=client.executeMethod(postMethod);</span><br><span class="line">		System.out.println(&quot;结果码:&quot;+code);</span><br><span class="line">		//5. 获取结果</span><br><span class="line">		String result=postMethod.getResponseBodyAsString();</span><br><span class="line">		System.out.println(&quot;Post请求的结果：&quot;+result);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public static void main(String[] args) throws Exception&#123;</span><br><span class="line">		MobileCodeService ws=new MobileCodeService();</span><br><span class="line">		ws.get(&quot;15626217879&quot;, &quot;&quot;);</span><br><span class="line">		ws.post(&quot;15626217879&quot;, &quot;&quot;);</span><br><span class="line">//	    ws.soap();</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用Wsimpot命令生成webservice的本地代理，通过本地代理访问webservice<br>命令语句：来解析WSDL文件其实就是xml文件<br>    wsimport [opations] &lt;wsdl_uri&gt;</p>
<pre><code>- wsdl_uri:wsdl 的统一资源标识符
- d  ：指定要输出的文件的位置
- s  ：表示要解析java的源码 ，默认解析出的是class字节码 
- p  ： 指定输出的包名
</code></pre><p>wsimport –s ./ -p cn.it.ws.c <a href="http://ws.webxml.com.cn/WebServices/MobileCodeWS.asmx?WSDL" target="_blank" rel="noopener">http://ws.webxml.com.cn/WebServices/MobileCodeWS.asmx?WSDL</a><br>./:代表存放当前路径<br>执行语句会生成java源码和class字节码文件<br>使用java代码中的代理就可以调用web service中的工能。不能自己改变java代码，相当于不能改变代理</p>
<h3 id="使用CXF框架，发布webservice服务，并使用客户端远程访问webservice"><a href="#使用CXF框架，发布webservice服务，并使用客户端远程访问webservice" class="headerlink" title="使用CXF框架，发布webservice服务，并使用客户端远程访问webservice"></a>使用CXF框架，发布webservice服务，并使用客户端远程访问webservice</h3><ol>
<li><p>CXF介绍 ：soa的框架</p>
<ul>
<li>cxf 是 Celtrix （ESB框架）和 XFire（webserivice） 合并而成，并且捐给了apache  </li>
<li>CxF的核心是org.apache.cxf.Bus(总线)，类似于Spring的 ApplicationContext</li>
<li>CXF默认是依赖于Spring的</li>
<li>Apache CXF 发行包中的jar，如果全部放到lib中，需要 JDK1.6 及以上，否则会报JAX-WS版本不一致的问题</li>
<li>CXF 内置了Jetty服务器 ，它是servlet容器，好比tomcat<br>CXF框架概念介绍<br>Apache CXF 是一个开源的 Services 框架，CXF 帮助您来构建和开发 Services 这些 Services 可以支持多种协议，比如：SOAP、POST/HTTP、RESTful HTTP CXF 大大简化了 Service可以天然地和 Spring 进行无缝集成。</li>
</ul>
<p>2.CXF特点</p>
<ol>
<li>与Spring、Servlet做了无缝对接，cxf框架里面集成了Servlet容器Jetty </li>
<li>支持注解的方式来发布webservice</li>
<li>能够显示一个webservice的服务列表</li>
<li>能够添加拦截器：输入拦截器、输出拦截器 ：<br> 输入日志信息拦截器、输出日志拦截器、用户权限认证的拦截器</li>
</ol>
</li>
</ol>
<h3 id="Spring-CXF整合来管理webservice"><a href="#Spring-CXF整合来管理webservice" class="headerlink" title="Spring+CXF整合来管理webservice"></a>Spring+CXF整合来管理webservice</h3><pre><code>实现步骤：
  1. 添加cxf.jar 包（集成了Spring.jar、servlet.jar ）,spring.jar包 ，servlet.jar 包
  2. 编写业务类，通过CXF来发布webservice
     员工管理：
   方法 ：添加员工、查询员工  

  3. 添加一个CXF请求的 Servlet，用来处理webservice的请求 
       过滤的地址/ws/*
  4. 配置Spring的配置文件： applicationContext.xml ,把cxf的bean在spring配置

  5. 在web.xml中配置 CXF的 Servlet ， 添加spring的监听 

  6. 通过wsimport生成本地代理 ，访问webservice
</code></pre><h3 id="weblogic"><a href="#weblogic" class="headerlink" title="weblogic"></a>weblogic</h3><p>集群步骤<br>1.创建多个服务器<br>    AdminServer(默认)<br>    监听地址：127.0.0.1<br>    服务器端口：7001<br>    server-1：<br>    监听地址127.0.0.1(不要写localhost)<br>    服务器端口号7002<br>    server-2:<br>    监听地址127.0.0.1<br>    服务器端口号7003<br>2.部署到项目到这两个服务器<br>    web项目在tomcat发不完之后，才会在部署-》安装(找到web项目所在的路径)下面才会显示web项目<br>    然后部署到这两个服务器上面。<br>3.使用D:\Oracle\Middleware\user_projects\domains\base_domain\bin下的startManagedWeblogic.cmd(启动受管服务器得命令server-1，server-2)<br>    C:\Users\Administrator&gt;D:\Oracle\Middleware\user_projects\domains\base_domain\bin\startManagedWebLogic.cmd Server-1 <a href="http://127.0.0.1:7001(Server-1名称大写敏感)" target="_blank" rel="noopener">http://127.0.0.1:7001(Server-1名称大写敏感)</a><br>   被管理服务器名 管理服务器的ip<br>    验证：部署，部署到两个服务器的项目，测试，看一下是否成功<br>4.新建一个代理服务器<br>    监听地址：127.0.0.1<br>    端口：7000<br>5.1创建集群<br>    名：Cluster-0<br>    多点传送<br>    239.192.0.0<br>    端口：7777<br>5.2添加server到集群(server必须关闭状态[cdm命令行trl+c关闭])<br>    放入两个server，不要放proxy<br>6.使用quick start进行扩展域<br>    get start…找到已创建的base-domain域，下一步，选择第二个jax-rpc(weblogic的访问模式)勾选受管服务器，集群和部署服务两项配置受管得服务器，下一步到向集群分发服务器(可以看默认有两个server在里面)创建http代理勾选http代理，指定用proxy代理两个server下一步到将要部署定位到集群或服务器，在cluster-0下选择那个已经部署到两个server的项目(testweblogic4t),下一步到扩展，结束。<br>    总结：扩展域过程中，除了配置勾选http指定定代理server，其余过程都可以默认不用勾选。<br>    会在D:\Oracle\Middleware\user_projects\domains\base_domain\apps\生成(OracleProxy4_Cluster-0_Proxy)<br>    OracleProxy4_Cluster-0_Proxy这个文件夹中封装了集群信息。(文件夹放到项目所在目录)<br>    修改这个文件夹中的weblogic.xml为：(访问路径)</p>
<p><weblogic-web-app></weblogic-web-app></p>
<p><context-root>/testweblogic4t</context-root><br><br>7.回到console，进行安装部署OracleProxy4_Cluster-0_Proxy<br>    服务器选择Proxy这个代理服务器，下一步，到完成<br>8.删除已经部署过的testweblogic4t项目重新部署到所有的集群，而不是再单个部署到每一个server中。<br>9.启动server-1，server-2.Proxy服务<br>    C:\Users\Administrator&gt;D:\Oracle\Middleware\user_projects\domains\base_domain\bin\startManagedWebLogic.cmd Server-1 <a href="http://127.0.0.1:7001" target="_blank" rel="noopener">http://127.0.0.1:7001</a><br>    C:\Users\Administrator&gt;D:\Oracle\Middleware\user_projects\domains\base_domain\bin\startManagedWebLogic.cmd Server-2 <a href="http://127.0.0.1:7001" target="_blank" rel="noopener">http://127.0.0.1:7001</a><br>    C:\Users\Administrator&gt;D:\Oracle\Middleware\user_projects\domains\base_domain\bin\startManagedWebLogic.cmd Proxy <a href="http://127.0.0.1:7001" target="_blank" rel="noopener">http://127.0.0.1:7001</a><br>10.在console集群中的项目进行测试。</p>
<p>通过console部署指定的文件夹下的项目：<br>   这个项目必须是war包或者从tomcat安装目录下的webapps中已经部署到tomcat中的项目。<br>  例如console要部署weblogictest文件夹下面的项目testweblogic4t，那么这个testweblogic4t一定是tomcat部署过的。要么是war包，要么是从webapps目录下拷贝过来的。这时console中指定安装目录下才会显示这个项目testweblogic4t，可以进行部署。</p>
<p>项目中属性project facets java版本和web module版本与开发工具环境有关。<br>    开发工具环境越高版本项目中属性project facets java版本和web module版本就越高</p>
<p>部署正确到weblogic oracleweblogic server 11gr1(10.3.6)服务器的条件：<br>    项目中project facets的java版本小于等于1.6，web module小于等于2.5，跟有无jdk环境和服务器环境包无关。</p>
<p>index.jsp保存原因是没有导入服务器包weblogic system library或者tomcat system library。</p>
<p>项目是否报错原因：<br>    1.开发工具指定jdk环境版本小于项目中属性project facets的java版本。<br>        出现的原因：例如：原来开发工具环境1.8jdk，项目中属性project facets的java版本1.8，                这是降低开发工具环境版本就会报错。<br>        不管eclipse的开发环境jdk版本是多少，与项目中实际引入的jdk版本是无关的，不会          报错，项目中有无jdk版本和服务器环境(如：tomcat system library)无关，不会报错。<br>    2.代码错误。</p>
<p>当有项目报错时，tomcat无法部署任何项目。而weblogic是可以的。</p>
<p>eclipse中部署到tomcat6服务器的条件：除添加不是tomcat环境包(如：weblogic system library)情况下都可以部署。</p>
<p>集群的负载均衡：(使用不同浏览器测试)<br>    一个session访问一个资源时，代理服务器，使用server-1<br>    另一个session访问同一个资源时，代理服务器，会使用server-2.</p>
<p>集群的故障转移：<br>    如：<br>    server-2进行登录成功，jsp页面显示两个sessionid同时对应一个会话。后server-2停掉<br>    仍然进行其他操作时，代理proxy就会启动server-1进行继续业务操作。这是jsp页面就只剩一个活跃状态的sessionid。</p>
<h3 id="linux"><a href="#linux" class="headerlink" title="linux"></a>linux</h3><h4 id="Linux目录结构"><a href="#Linux目录结构" class="headerlink" title="Linux目录结构"></a>Linux目录结构</h4><p><img src="https://volcfamily.cn/images/interview-question/y.png" alt="y"><br>1.bin ： 存放的可执行的二进制文件<br>   cd  ls  su  passwd</p>
<ol start="2">
<li>boot ：存放系统的引导文件的目录</li>
<li>dev 存放设备文件的目录，linux把设置当做文件来处理</li>
<li>etc ： 存放系统的配置文件的目录</li>
<li>home ：存放所有用户文件的根目录<pre><code>，root用户除外
</code></pre></li>
<li>lib ：共享库<br>7.usr ：好比program files<br>  存放应用的安装的路径<br>8 opt ： 自定义存放应用程序位置</li>
<li>mnt ：临时文件系统的挂靠点</li>
</ol>
<p>ls –l[查看本目录下所有目录的信息权限]</p>
<h4 id="目录结构及权限"><a href="#目录结构及权限" class="headerlink" title="目录结构及权限"></a>目录结构及权限</h4><pre><code>- 文件权限分析
  w ：可写   r： 只读  x：可执行  - ：无权限
  文件权限
   1. 字符表示法
     drwxr-xr-x(目录权限)
  第一个字符表示文件的类型  
        d ：普通文件  
        - ：文件夹  
        c ：串口文件  
        l ：连接文件
   2-4(rwx) 字符  ： 该文件的属主用户的权限(读写执行)
   5-7(r-x)字符 ： 与属主用户同一组的其他用户的权限(‘-‘无权限)
   8-10(r-x)字符 ：  不同组的其他用户的权限(‘-‘无权限)
    2. 数字表示法
   -rw-r--r-- :表示这个文件的默认权限   644
        二进制：
        1111 1111 1111 1111 1111 1111 1111 1111(32位)
        八进制：
        111  111  111  111  111  111  111  111(一位最大值为7)
        rw-代表1106
        r—代表1004
   drwxr-xr-x :表示目录的默认权限  755  
</code></pre><p>   默认有6个命令交互通道和一个图形界面交互通道，默认进入到的是图形界面通道<br>     命令交互模式切换：ctrl+alt+f1—f6<br>     图形交互界面 ctrl+alt+f7<br>   1.图形界面交互模式</p>
<pre><code>- terminal： 图形界面的命令终端，它是图形界面交互通道的延伸，要依赖于图形界面
</code></pre><p>   2.命令交互模式<br>      命令提示符：<br>      itcast@ubuntu:~$ </p>
<pre><code>    - itcast：用户名
- ubuntu ：主机名
- ~  ：路径 ，假如当前的路径正好是 该用户存放数据的根目录 ，则显示~
- $ :用户的类型  $代表普通用户  #  代表 超级用户
</code></pre><p>进入桌面的命令<br>volc@ubuntu:~/Desktop/a/b$ cd ~/Desktop<br>cd ..[表示返回上一目录]<br>cd a[表示进入当前目录下的a文件夹]<br>volc@ubuntu:~$ cd Desktop[表示在volc当前目录下进入 Desktop桌面]</p>
<p>1.注销、关机、重启</p>
<pre><code>- 注销 ：logout ：登出 、exit 
- 关机 ：
   shutdown - h  时间
 - h ：关机
 - 时间 ：
   1. now :马上
   2. 12.30 ：指定具体时间
   3. 3  ：几分钟以后
sudo ： superuser do ：由超级用户来执行该命令
  要配置sudo 命令 ： 授权 哪些用户能执行哪些命令
   由超级用户配置  sudo 
    /etc/sudoers 
  sudo shutdown -h now    当前账号：itcast  
- 重启 ：
   shutdown -r  时间
 -r ：restart 
</code></pre><p>   2.linux基本命令 ：文件操作命令</p>
<pre><code> 1. ls   ： 查看目录内容
    - l ：查看详细信息
- a ：查看所有文件（隐藏）
    man ：manual ： 手工，帮助 ，帮助命令，好比windows help 
 命令： man ls
 2. mkdir ：创建目录 
      Desktop：
    - java
      - JEE ： aa.txt  bb.txt  
      - Android
 3. cd  切换目录
    - cd ..  记得要加空格
- cd ./java  进入当前目录的子目录
- cd ../xxx  进入上一级目录的子目录
   tab ：自动补全
 4. touch  ：创建一个空白的普通文件
    touch aa.txt 
 5. echo  :把内容重定向到指定的文件中 ，有则打开，无则创建
 6. cat、more  ：查看文件内容
    - cat ：查看文件内容
- more ：分页查看文件内容，按空格键换页

 7. cp、mv、rm   
    - cp ：复制
   cp bj.txt ./java/jee
- mv ：剪切、重命名
   1. 剪切 ：mv aa.txt ../android/
   2. 重命名 ：假如剪切的文件 存放在同一个目录中 ，则是重命名
       mv bb.txt cc.txt

- rm ：删除文件或者文件夹
  -f ： 假如要删除的文件不存在，也不提示
  -i ： 删除前提示 ，默认不删除，要删除，输入y
  -d ： 删除空白目录 
  -r ：递归删除
 8. wc ：word count ：统计字符数
     154  233 3418 
 - 154 ：行数
 - 233 ：单词数
 - 3418 ：字符数
   命令： wc bj.txt

 9. ln :创建连接文件
    - 默认创建的是硬连接，好比复制 ，但是两个文件会同步 
   命令：ln ./java/android/aa.txt  aaa
- s ：创建的是软连接

 10. pwd   ：查看当前目录的绝对路径 

 11. 管道命令 |
   命令： ls -la | wc 
 12. 重定向
    - &gt; :覆盖模式
命令：  echo &quot;ww&quot;&gt;aaa
- &gt;&gt;：追加模式
命令： echo &quot;ww&quot;&gt;&gt;aaa
 13. passwd   :设置密码  ，ubuntu默认 root账号是没有开启 ，只要设置root密码即可开启
     sudo passwd root

 14. su  切换目录
     su root 
 root用户切换到其他账号不需要密码
</code></pre><p>   3.linux 系统命令<br>     1.stat   ：查看文件的详细信息<br>       stat bj.txt<br>     2.who与whoami<br>       who : 查看在线的用户<br>       whoami ：查看当前自己的用户<br>     3.hostname ： 显示主机名<br>       hostname<br>     4.uname  ：显示系统信息<br>        -a ：显示完整的系统信息</p>
<pre><code> 5.top ：显示当前耗时的进行的信息 ，每3秒刷新一次 
     cltr+c 中断 
 6.ps ：显示当前进程的快照 
   - axu
 7.du ：显示文件的大小信息 
 8.df ：磁盘使用情况  disk free
 9.ifconfig ：查看或者配置网卡信息 ，好比windows 的ipconfig
    ipv4：32位  2-32次方     ipv6  128位     是 ipv4  2-96次方倍数
设置虚拟机ip地址：
  1. 设置vmware的连接方式
     - 共享宿主机的ip地址，在网上邻居找不到
     - 桥接方式，需要单独设置ip，可以在网上邻居查找
  2. 图形界面设置ip地址 
      edit connection --》ipv4--》manual（手工设置）--》add  （ip地址，子网掩码）
      3.命令方式设置ip地址
     静态设置ip：
     sudo ifconfig eth0 192.168.15.122 netmask 255.255.255.0 
 10.ping  测试与目标主机连接情况
 11.clear  ： 清除屏幕  windows： cls  
 12.man  ：帮助命令
     man 命令
 13.kill  ：杀死进程
    kill  pid 
 14.netstat  ：网络连接详细信息

 15. useradd 
    - 查看用户信息
   sudo cat /etc/passwd
 itcast:x:1000:1000:UbuntuA,,,:/home/itcast:/bin/bash
  - itcast:用户名
  - x ：密码 ：已经加密 ，密码存放在  /etc/shadow 
  - 1000: 账号id ，userId
  - 1000： 组id ，group id
      - UbuntuA,,,  ：账号描述
      - /home/itcast ：该账号存放文件的默认位置  ~
  - /bin/bash：该用户的shell脚本的解析方式  ，sh 、bash、rbash
    - 创建用户 
  sudo useradd lijun -d  /home/lijun   -s /bin/bash 
   -d :指定该用户的home 路径 
   - s ：该用户的shell解析方式
  步骤：
    1. 创建 /home/lijun 目录
    2. 执行 useradd 命令
    3. 用 passwd 设置密码
    4. su 切换用户
</code></pre><h3 id="Tomcat、Weblogic的区别"><a href="#Tomcat、Weblogic的区别" class="headerlink" title="Tomcat、Weblogic的区别"></a>Tomcat、Weblogic的区别</h3><p>什么是weblogic<br>WebLogic是美国Oracle公司出品的一个application server确切的说是一个基于JAVAEE架构的中间件，BEA WebLogic是用于开发、集成、部署和管理大型分布式Web应用、网络应用和数据库应用的Java应用服务器。<br>| Weblogic特点 | Tomcat特点 |</p>
<p>| WLS全面支持J2EE的标准规范和其他标准规范,Web Service, SSL, xml,EJB等 | Tomcat 为WEB容器，只支持部分J2EE标准, 应用局限性强,不支持EJB |<br>| 完善的售后支持 | 没有售后支持, 看社区与论坛服务器出现的问题 |<br>| 集群机制, 支持分布式的应用 | 需要结合第三方插件/应用 |<br>| Web控制台进行组件、JDBC、管理和配置 | 差 |<br>| 较好的支持热部署（开发模式下）实现某个单一类的热部署，让系统无需重启就完成某个类的更新 | 差 |<br>| 需要费用 | 开源免费 |</p>
<h3 id="Lucene"><a href="#Lucene" class="headerlink" title="Lucene"></a>Lucene</h3><p>Lucene是apache软件基金会发布的一个开放源代码的全文检索引擎工具包，Lucene是根据关健字来搜索的文本搜索工具，只能在某个网站内部搜索文本内容，不能跨网站搜索，Lucece不能用在互联网搜索（即像百度那样），只能用在网站内部的文本搜索。<br>lucene索引库的结构<br>词汇表：以单个汉字进行分词建立的索引库<br>        “是”词汇的值有三个引用012分别作为三个数组，每个数组的值分别指向三个document对象<br>原始记录表：封装了document对象，document对象存放具体Article实例对象的属性值</p>
<p><img src="https://volcfamily.cn/images/interview-question/z.png" alt="z"><br>Lucene程序宏观结构：</p>
<p><img src="https://volcfamily.cn/images/interview-question/a1.png" alt="a1"></p>
<p>词汇表单个词汇的含义<br><img src="https://volcfamily.cn/images/interview-question/a2.png" alt="a2"> </p>
<p>创建索引库：<br>1）    创建JavaBean对象<br>2）    创建Docment对象<br>3）    将JavaBean对象所有的属性值，均放到Document对象中去，属性名可以和JavaBean相同或不同<br>4）    创建IndexWriter对象<br>5）    将Document对象通过IndexWriter对象写入索引库中<br>6）    关闭IndexWriter对象</p>
<p>根据关键字查询索引库中的内容：<br>1）    创建IndexSearcher对象<br>2）    创建QueryParser对象<br>3）    创建Query对象来封装关键字<br>4）    用IndexSearcher对象去索引库中查询符合条件的前100条记录，不足100条记录的以实际为准<br>5）    获取符合条件的编号<br>6）    用indexSearcher对象去索引库中查询编号对应的Document对象<br>7）    将Document对象中的所有属性取出，再封装回JavaBean对象中去，并加入到集合中保存，以备将之用<br>导包lucene<br>  lucene-core-3.0.2.jar【Lucene核心】<br>  lucene-analyzers-3.0.2.jar【分词器】<br>  lucene-highlighter-3.0.2.jar【Lucene会将搜索出来的字，高亮显示，提示用户】<br>  lucene-memory-3.0.2.jar【索引库优化策略】<br>代码示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.analysis.Analyzer;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.analysis.standard.StandardAnalyzer;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.document.Document;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.document.Field;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.document.Field.Index;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.document.Field.Store;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.index.IndexWriter;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.index.IndexWriter.MaxFieldLength;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.queryParser.QueryParser;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.search.IndexSearcher;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.search.Query;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.search.ScoreDoc;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.search.TopDocs;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.store.Directory;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.store.FSDirectory;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.util.Version;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> cn.volc.entity.Article;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FirstLucene</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	 * 创建lucene索引库，包括，词汇表和原始数据(Article类型)</span></span><br><span class="line"><span class="comment">	 * 	分为4个步骤</span></span><br><span class="line"><span class="comment">	 * 	1.创建原始记录的数据。</span></span><br><span class="line"><span class="comment">	 *  2.创建索引库是通过document对象创建的，先创建一个document，用来封装原始记录数据。</span></span><br><span class="line"><span class="comment">	 *  3.将document对象写入到lucene索引库中。那么Lucene索引库中包含，词汇表和document对象(document对象封装了原始数据article对象)。</span></span><br><span class="line"><span class="comment">	 *  4.关闭索引字符流对象。</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">createIndexDB</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">		<span class="comment">//1.创建原始记录的数据。</span></span><br><span class="line">		Article article = <span class="keyword">new</span> Article(<span class="number">1</span>,<span class="string">"原始数据头标题title"</span>,<span class="string">"原始数据的内容content"</span>);</span><br><span class="line">		<span class="comment">//2.创建索引库是通过document对象创建的，先创建一个document，用来封装原始记录数据，</span></span><br><span class="line">		Document document = <span class="keyword">new</span> Document();</span><br><span class="line">		<span class="comment">//2.2将article对象绑定到document中。document存放的字段field,field用来封装原始记录的信息</span></span><br><span class="line">		<span class="comment">//每一个field包括三个参数</span></span><br><span class="line">		<span class="comment">/*</span></span><br><span class="line"><span class="comment">		 * 参数一：document的属性名"id"，项目中提倡与article属性名称相同</span></span><br><span class="line"><span class="comment">		 * 参数二：document对象中属性"id"的值为article的属性id，与article对象中相同</span></span><br><span class="line"><span class="comment">		 * 参数三：是否将id属性值存入到有原始记录转存入到词汇表</span></span><br><span class="line"><span class="comment">		 * 			项目中非id值都提倡放入词汇表中</span></span><br><span class="line"><span class="comment">		 * 参数四：是否将id属性值进行分词算法拆分</span></span><br><span class="line"><span class="comment">		 * 			项目中非id属性都提倡进行拆分</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		document.add(<span class="keyword">new</span> Field(<span class="string">"id"</span>,article.getId().toString(),Store.YES,Index.ANALYZED));</span><br><span class="line">		document.add(<span class="keyword">new</span> Field(<span class="string">"title"</span>,article.getTitle(),Store.YES,Index.ANALYZED));</span><br><span class="line">		document.add(<span class="keyword">new</span> Field(<span class="string">"content"</span>,article.getContent(),Store.YES,Index.ANALYZED));</span><br><span class="line">		<span class="comment">//3.将document对象写入到lucene索引库中，那么Lucene索引库中包含，词汇表和document对象(document对象封装了原始数据article对象)</span></span><br><span class="line">		Directory directory = FSDirectory.open(<span class="keyword">new</span> File(<span class="string">"E:/eworkspace/lucene-01/LuceneDBDBDBDBDBDBDBDBDB"</span>));</span><br><span class="line">		Analyzer analyzer = <span class="keyword">new</span> StandardAnalyzer(Version.LUCENE_30);</span><br><span class="line">		MaxFieldLength maxFieldLength = MaxFieldLength.LIMITED;</span><br><span class="line">		<span class="comment">/*</span></span><br><span class="line"><span class="comment">		 * 参数一：lucene索引库最终对应硬盘中的目录,"E:/eworkspace/lucene-01/LuceneDBDBDBDBDBDBDBDBDB",如果没有将自动创建</span></span><br><span class="line"><span class="comment">		 * 参数二：采用什么策略将文本拆分，查看策略就是它的实现类(ctrl+T选中IndexWriter查看它的实现类)</span></span><br><span class="line"><span class="comment">		 * 参数三：最多将文本拆分成多少个词汇，LIMITED表示1w个，也就是field的值取前1万个(拆分策略是一个汉字作为一个词汇)作为词汇。</span></span><br><span class="line"><span class="comment">		 * 			不足1万个以实际为准，例如值有5个汉字，就把这5个汉字作为词汇</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		<span class="comment">//3.1创建一个索引对象，(指定索引存放硬盘的目录，文本拆分策略，最多拆分词汇数目)</span></span><br><span class="line">		IndexWriter indexWriter = <span class="keyword">new</span> IndexWriter(directory,analyzer,maxFieldLength);</span><br><span class="line">		<span class="comment">//3.2真正将document对象写入到lucene索引库中</span></span><br><span class="line">		indexWriter.addDocument(document);</span><br><span class="line">		<span class="comment">//4.关闭索引字符流对象</span></span><br><span class="line">		indexWriter.close();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/* </span></span><br><span class="line"><span class="comment">	 * 根据关键字从索引库中查询符合条件的content</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">findIndexDB</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">		<span class="comment">//1.创建集合用于接收数据对象</span></span><br><span class="line">		List&lt;Article&gt; articleList = <span class="keyword">new</span> ArrayList&lt;Article&gt;();</span><br><span class="line">		<span class="comment">//指定关键字</span></span><br><span class="line">		String keywords = <span class="string">"内"</span>; <span class="comment">//这样两个汉字搜索是可以的，lucene索引关键字不能为空，为空会报错，含有空格也不行		</span></span><br><span class="line">        Directory directory = FSDirectory.open(<span class="keyword">new</span> File(<span class="string">"E:/eworkspace/lucene-01/LuceneDBDBDBDBDBDBDBDBDB"</span>));</span><br><span class="line">		Version version = Version.LUCENE_30;</span><br><span class="line">		<span class="comment">//解析器类型(版本号)</span></span><br><span class="line">		Analyzer analyzer = <span class="keyword">new</span> StandardAnalyzer(version);</span><br><span class="line">		<span class="comment">//创建查询解析器或查询策略对象(指定策略版本，搜索document的哪个字段，解析策略)</span></span><br><span class="line">		<span class="comment">/*</span></span><br><span class="line"><span class="comment">		 * 参数一：分词器版本，提倡使用该jar包中的最高版本</span></span><br><span class="line"><span class="comment">		 * 参数二：针对document哪个字段进行搜索(根据"content"搜索)</span></span><br><span class="line"><span class="comment">		 * 参数三：指定标准解析策略</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		QueryParser queryParser = <span class="keyword">new</span> QueryParser(version,<span class="string">"content"</span>,analyzer);</span><br><span class="line">		<span class="comment">//通过查询解析器解析一个查询对象(查询对象带有关键字)用于查询。</span></span><br><span class="line">		Query query = queryParser.parse(keywords);</span><br><span class="line">		<span class="comment">//2.创建搜索字符流对象IndexSearcher，指定搜索索引库在硬盘的具体目录</span></span><br><span class="line">		IndexSearcher indexSearcher = <span class="keyword">new</span> IndexSearcher(directory);</span><br><span class="line">		<span class="keyword">int</span> MAN_RECORD = <span class="number">10</span>;</span><br><span class="line">		<span class="comment">//3.通过搜索字符流对象indexSearcher进行搜索(根据关键字，去索引库中的词汇表中进行搜索的)</span></span><br><span class="line">		<span class="comment">/*</span></span><br><span class="line"><span class="comment">		 * 参数一：表示封装关键字的查询对象</span></span><br><span class="line"><span class="comment">		 * 参数二：如果关键字搜索出来的内容较多只取前MAN_RECORD个内容</span></span><br><span class="line"><span class="comment">		 * 			不足MAN_RECORD以实际为准</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		<span class="comment">//3.通过搜索字符流对象进行搜索(指定查询对象 ，查询记录数)，返回词汇表记录</span></span><br><span class="line">		TopDocs topDocs = indexSearcher.search(query, MAN_RECORD);</span><br><span class="line">		<span class="comment">//4.获取词汇表的数组，然后遍历词汇表中符合条件的编号，scoreDocs代表三个[0],[1],[2]数组集合，也就是符合条件的document的个数		</span></span><br><span class="line">           <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;topDocs.scoreDocs.length;i++)&#123;</span><br><span class="line">			<span class="comment">//topDocs代表词汇表中左侧的多个数[0],[1],[2]，获取每一个数组</span></span><br><span class="line">			ScoreDoc scoreDoc = topDocs.scoreDocs[i];<span class="comment">//</span></span><br><span class="line">			<span class="comment">//获取每一个数组的内容编号，如0</span></span><br><span class="line">			<span class="keyword">int</span> no = scoreDoc.doc;</span><br><span class="line">			<span class="comment">//5.根据编号去索引库中的原始记录表中查询对应的document对象</span></span><br><span class="line">			Document document = indexSearcher.doc(no);</span><br><span class="line">			<span class="comment">//6.获取document对象的属性值</span></span><br><span class="line">			String id = document.get(<span class="string">"id"</span>);</span><br><span class="line">			String title = document.get(<span class="string">"title"</span>);</span><br><span class="line">			String content = document.get(<span class="string">"content"</span>);</span><br><span class="line">			<span class="comment">//7.封装到article对象中</span></span><br><span class="line">			Article article = <span class="keyword">new</span> Article(Integer.parseInt(id),title,content);</span><br><span class="line">			<span class="comment">//8.将article对象保存到list集合中</span></span><br><span class="line">			articleList.add(article);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//9.遍历结果集</span></span><br><span class="line">		<span class="keyword">for</span>(Article article : articleList)&#123;</span><br><span class="line">	System.out.println(article.getId()+<span class="string">":"</span>+article.getTitle()+<span class="string">":"</span>+article.getContent());</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>优化LuceneUtil.java工具类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.beanutils.BeanUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.analysis.Analyzer;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.analysis.standard.StandardAnalyzer;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.document.Document;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.document.Field;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.document.Field.Index;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.document.Field.Store;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.index.IndexWriter.MaxFieldLength;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.store.Directory;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.store.FSDirectory;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.util.Version;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LuceneUtil</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> Directory directory ;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> Analyzer analyzer ; </span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> Version version;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> MaxFieldLength maxFieldLength;</span><br><span class="line">	<span class="keyword">static</span>&#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			directory = FSDirectory.open(<span class="keyword">new</span> File(<span class="string">"E:/LuceneDBDBDBDBDBDBDBDBDB"</span>));</span><br><span class="line">			version = Version.LUCENE_30;</span><br><span class="line">			analyzer = <span class="keyword">new</span> StandardAnalyzer(version);</span><br><span class="line">			maxFieldLength = MaxFieldLength.LIMITED;</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			<span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Directory <span class="title">getDirectory</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> directory;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Analyzer <span class="title">getAnalyzer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> analyzer;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Version <span class="title">getVersion</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> version;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> MaxFieldLength <span class="title">getMaxFieldLength</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> maxFieldLength;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//将javabean对象转成document对象</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Document <span class="title">javabean2documemt</span><span class="params">(Object obj)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">		Document document = <span class="keyword">new</span> Document();</span><br><span class="line">		<span class="comment">//使用传递过来的javabean对象获取器字节码对象</span></span><br><span class="line">		Class clazz = obj.getClass();</span><br><span class="line">		<span class="comment">//通过字节码对象获取javabean对象的字段属性包括私有的属性，并反返回的是一个数组</span></span><br><span class="line">		java.lang.reflect.Field[] reflectFields = clazz.getDeclaredFields();</span><br><span class="line">		<span class="keyword">for</span>(java.lang.reflect.Field field : reflectFields)&#123;</span><br><span class="line">			<span class="comment">//使用暴力反射javabean私有的属性，为了取出属性名称</span></span><br><span class="line">			field.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">			String fieldName = field.getName();</span><br><span class="line">			<span class="comment">//获取属性的的第一个字母转成大写</span></span><br><span class="line">			String init = fieldName.substring(<span class="number">0</span>,<span class="number">1</span>).toUpperCase();</span><br><span class="line">			<span class="comment">//拼接属性的getXxx()名</span></span><br><span class="line">			String methodName = <span class="string">"get"</span> + init + fieldName.substring(<span class="number">1</span>);</span><br><span class="line">			<span class="comment">//获取方法[getMethod与getDeclareMethod的区别在于后者可以返回私有方法]</span></span><br><span class="line">			Method method = clazz.getDeclaredMethod(methodName,<span class="keyword">null</span>);</span><br><span class="line">			<span class="comment">//执行方法invoke(返回值类型，方法所需的参数)</span></span><br><span class="line">			String returnValue = method.invoke(obj,<span class="keyword">null</span>).toString();</span><br><span class="line">			<span class="comment">//javabean属性与document的属性完全相同</span></span><br><span class="line">			document.add(<span class="keyword">new</span> Field(fieldName,returnValue,Store.YES,Index.ANALYZED));</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> document;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//将document转成javabean</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title">document2javabean</span><span class="params">(Document document,Class clazz)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">		Object obj = clazz.newInstance();</span><br><span class="line">		java.lang.reflect.Field[] reflectFields = clazz.getDeclaredFields();</span><br><span class="line">		<span class="keyword">for</span>(java.lang.reflect.Field field : reflectFields)&#123;</span><br><span class="line">			field.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">			String fieldName = field.getName();</span><br><span class="line">			String fieldValue = document.get(fieldName);</span><br><span class="line">			<span class="comment">//通过BeanUtils封装javabean，需要导入[commons-beanutils-1.7.0.jar(依赖后者日志包)和commons-logging-1.1.1.jar]</span></span><br><span class="line">			BeanUtils.setProperty(obj,fieldName,fieldValue);</span><br><span class="line">		&#125;	</span><br><span class="line">		<span class="keyword">return</span> obj;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//私有构造目的不让其他类创建LuceneUtil对象</span></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="title">LuceneUtil</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="索引库的CREATE-UPDATE-RETRIEVE-取回-DELETE"><a href="#索引库的CREATE-UPDATE-RETRIEVE-取回-DELETE" class="headerlink" title="索引库的CREATE UPDATE RETRIEVE(取回) DELETE"></a>索引库的CREATE UPDATE RETRIEVE(取回) DELETE</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//修改索引库</span><br><span class="line">/*</span><br><span class="line">  参数一：term</span><br><span class="line">*/</span><br><span class="line">indexWriter.updateDocument(term,document);</span><br></pre></td></tr></table></figure>
<p>1.创建ArticleDao.java类<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArticleDao</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">getAllObjectNum</span><span class="params">(String keywords)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">		QueryParser queryParser = <span class="keyword">new</span> QueryParser(LuceneUtil.getVersion(),<span class="string">"content"</span>,LuceneUtil.getAnalyzer());</span><br><span class="line">		Query query = queryParser.parse(keywords);</span><br><span class="line">		IndexSearcher indexSearcher = <span class="keyword">new</span> IndexSearcher(LuceneUtil.getDirectory());</span><br><span class="line">		TopDocs topDocs = indexSearcher.search(query,<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> topDocs.totalHits;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;Article&gt; <span class="title">findAllObjectWithFY</span><span class="params">(String keywords,Integer start,Integer size)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">		List&lt;Article&gt; articleList = <span class="keyword">new</span> ArrayList&lt;Article&gt;();</span><br><span class="line">		QueryParser queryParser = <span class="keyword">new</span> QueryParser(LuceneUtil.getVersion(),<span class="string">"content"</span>,LuceneUtil.getAnalyzer());</span><br><span class="line">		Query query = queryParser.parse(keywords);</span><br><span class="line">		IndexSearcher indexSearcher = <span class="keyword">new</span> IndexSearcher(LuceneUtil.getDirectory());</span><br><span class="line">		TopDocs topDocs = indexSearcher.search(query,<span class="number">100000000</span>);</span><br><span class="line">        		<span class="comment">/*</span></span><br><span class="line"><span class="comment">		 * 判断是否为最后几条，如果最后几条个数小于了一页显示的个数，即topDocs.totalHits&lt;start+size,</span></span><br><span class="line"><span class="comment">		 * 那么仍然使用页大小来进行循环迭代就会出现ArrayIndexsOutOfBoundsException数组角标越界的异常</span></span><br><span class="line"><span class="comment">		 * 解决方法就是进行topDocs.totalHits和start+size大小的比较去最小的那个，真实的记录数</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		<span class="keyword">int</span> middle = Math.min(start+size,topDocs.totalHits);</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=start;i&lt;middle;i++)&#123;</span><br><span class="line">			ScoreDoc scoreDoc = topDocs.scoreDocs[i];</span><br><span class="line">			<span class="keyword">int</span> no = scoreDoc.doc;</span><br><span class="line">			Document document = indexSearcher.doc(no);</span><br><span class="line">			Article article = (Article) LuceneUtil.document2javabean(document,Article.class);</span><br><span class="line">			articleList.add(article);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> articleList;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>步二：创建PageBean.java类<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PageBean</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Integer allObjectNum;</span><br><span class="line">	<span class="keyword">private</span> Integer allPageNum;</span><br><span class="line">	<span class="keyword">private</span> Integer currPageNum;</span><br><span class="line">	<span class="keyword">private</span> Integer perPageNum = <span class="number">2</span>;</span><br><span class="line">	<span class="keyword">private</span> List&lt;Article&gt; articleList = <span class="keyword">new</span> ArrayList&lt;Article&gt;();</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">PageBean</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">getAllObjectNum</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> allObjectNum;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAllObjectNum</span><span class="params">(Integer allObjectNum)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.allObjectNum = allObjectNum;</span><br><span class="line">		<span class="keyword">if</span>(<span class="keyword">this</span>.allObjectNum % <span class="keyword">this</span>.perPageNum == <span class="number">0</span>)&#123;</span><br><span class="line">			<span class="keyword">this</span>.allPageNum = <span class="keyword">this</span>.allObjectNum / <span class="keyword">this</span>.perPageNum;</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="keyword">this</span>.allPageNum = <span class="keyword">this</span>.allObjectNum / <span class="keyword">this</span>.perPageNum + <span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">getAllPageNum</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> allPageNum;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAllPageNum</span><span class="params">(Integer allPageNum)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.allPageNum = allPageNum;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">getCurrPageNum</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> currPageNum;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCurrPageNum</span><span class="params">(Integer currPageNum)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.currPageNum = currPageNum;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">getPerPageNum</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> perPageNum;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPerPageNum</span><span class="params">(Integer perPageNum)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.perPageNum = perPageNum;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;Article&gt; <span class="title">getArticleList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> articleList;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setArticleList</span><span class="params">(List&lt;Article&gt; articleList)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.articleList = articleList;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>步三：创建ArticleService.java类<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArticleService</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> ArticleDao articleDao = <span class="keyword">new</span> ArticleDao();</span><br><span class="line">	<span class="function"><span class="keyword">public</span> PageBean <span class="title">fy</span><span class="params">(String keywords,Integer currPageNum)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">		PageBean pageBean = <span class="keyword">new</span> PageBean();</span><br><span class="line">		pageBean.setCurrPageNum(currPageNum);</span><br><span class="line">		Integer allObjectNum = articleDao.getAllObjectNum(keywords);</span><br><span class="line">		pageBean.setAllObjectNum(allObjectNum);</span><br><span class="line">		Integer size = pageBean.getPerPageNum();</span><br><span class="line">		Integer start = (pageBean.getCurrPageNum()-<span class="number">1</span>) * size;</span><br><span class="line">		List&lt;Article&gt; articleList = articleDao.findAllObjectWithFY(keywords,start,size);</span><br><span class="line">		pageBean.setArticleList(articleList);</span><br><span class="line">		<span class="keyword">return</span> pageBean;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>步四：创建ArticleServlet.java类<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArticleServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span><span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			request.setCharacterEncoding(<span class="string">"UTF-8"</span>);</span><br><span class="line">			Integer currPageNum = Integer.parseInt(request.getParameter(<span class="string">"currPageNum"</span>));</span><br><span class="line">			String keywords = request.getParameter(<span class="string">"keywords"</span>);</span><br><span class="line">			ArticleService articleService = <span class="keyword">new</span> ArticleService();</span><br><span class="line">			PageBean pageBean = articleService.fy(keywords,currPageNum);</span><br><span class="line">			request.setAttribute(<span class="string">"pageBean"</span>,pageBean);</span><br><span class="line">			request.getRequestDispatcher(<span class="string">"/list.jsp"</span>).forward(request,response);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>第五步：导入EasyUI相关的js包的目录</p>
<p><img src="https://volcfamily.cn/images/interview-question/a3.png" alt="a3"></p>
<p>步六：在WebRoot目录下创建list.jsp<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; pageEncoding=&quot;UTF-8&quot;%&gt;</span><br><span class="line">&lt;%@ taglib uri=&quot;http://java.sun.com/jsp/jstl/core&quot; prefix=&quot;c&quot; %&gt;</span><br><span class="line">&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">  	&lt;link rel=&quot;stylesheet&quot; href=&quot;themes/default/easyui.css&quot; type=&quot;text/css&quot;&gt;&lt;/link&gt;</span><br><span class="line">    &lt;link rel=&quot;stylesheet&quot; href=&quot;themes/icon.css&quot; type=&quot;text/css&quot;&gt;&lt;/link&gt;</span><br><span class="line">    &lt;script type=&quot;text/javascript&quot; src=&quot;js/jquery.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script type=&quot;text/javascript&quot; src=&quot;js/jquery.easyui.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script type=&quot;text/javascript&quot; src=&quot;locale/easyui-lang-zh_CN.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  	&lt;!-- 输入区 --&gt;</span><br><span class="line">	&lt;form action=&quot;$&#123;pageContext.request.contextPath&#125;/ArticleServlet?currPageNum=1&quot; method=&quot;POST&quot;&gt;</span><br><span class="line">		输入关健字：&lt;input type=&quot;text&quot; name=&quot;keywords&quot; value=&quot;传智&quot; maxlength=&quot;4&quot;/&gt;</span><br><span class="line">		&lt;input type=&quot;button&quot; value=&quot;提交&quot;/&gt;</span><br><span class="line">	&lt;/form&gt;</span><br><span class="line"> 	</span><br><span class="line"> 	</span><br><span class="line"> 	&lt;!-- 显示区 --&gt;</span><br><span class="line">	&lt;table border=&quot;2&quot; align=&quot;center&quot; width=&quot;70%&quot;&gt;</span><br><span class="line">		&lt;tr&gt;</span><br><span class="line">			&lt;th&gt;编号&lt;/th&gt;</span><br><span class="line">			&lt;th&gt;标题&lt;/th&gt;</span><br><span class="line">			&lt;th&gt;内容&lt;/th&gt;</span><br><span class="line">		&lt;/tr&gt;</span><br><span class="line">		&lt;c:forEach var=&quot;article&quot; items=&quot;$&#123;pageBean.articleList&#125;&quot;&gt;</span><br><span class="line">			&lt;tr&gt;</span><br><span class="line">				&lt;td&gt;$&#123;article.id&#125;&lt;/td&gt;</span><br><span class="line">				&lt;td&gt;$&#123;article.title&#125;&lt;/td&gt;</span><br><span class="line">				&lt;td&gt;$&#123;article.content&#125;&lt;/td&gt;</span><br><span class="line">			&lt;/tr&gt;		</span><br><span class="line">		&lt;/c:forEach&gt;</span><br><span class="line">	&lt;/table&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&lt;!-- 分页组件区 --&gt;</span><br><span class="line">	&lt;center&gt;	</span><br><span class="line">		&lt;div id=&quot;pp&quot; style=&quot;background:#efefef;border:1px solid #ccc;width:600px&quot;&gt;&lt;/div&gt; </span><br><span class="line">	&lt;/center&gt;</span><br><span class="line">	&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">		$(&quot;#pp&quot;).pagination(&#123; </span><br><span class="line">			total:$&#123;pageBean.allObjectNum&#125;, </span><br><span class="line">			pageSize:$&#123;pageBean.perPageNum&#125;,</span><br><span class="line">			showPageList:false,</span><br><span class="line">			showRefresh:false,</span><br><span class="line">			pageNumber:$&#123;pageBean.currPageNum&#125;</span><br><span class="line">		&#125;); </span><br><span class="line">		$(&quot;#pp&quot;).pagination(&#123;</span><br><span class="line">			onSelectPage:function(pageNumber)&#123;</span><br><span class="line">	$(&quot;form&quot;).attr(&quot;action&quot;,&quot;$&#123;pageContext.request.contextPath&#125;/ArticleServlet?currPageNum=&quot;+pageNumber);</span><br><span class="line">			$(&quot;form&quot;).submit();	</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br><span class="line">	&lt;/script&gt;</span><br><span class="line">	&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line"> 			$(&quot;:button&quot;).click(function()&#123;</span><br><span class="line"> 			$(&quot;form&quot;).submit();	</span><br><span class="line"> 		&#125;);</span><br><span class="line"> 	&lt;/script&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<p>步六：在WebRoot目录下创建list2.jsp<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; pageEncoding=&quot;UTF-8&quot;%&gt;</span><br><span class="line">&lt;%@ taglib uri=&quot;http://java.sun.com/jsp/jstl/core&quot; prefix=&quot;c&quot; %&gt;</span><br><span class="line">&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;根据关键字分页查询所有信息&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- 输入区 --&gt;</span><br><span class="line">	&lt;form action=&quot;$&#123;pageContext.request.contextPath&#125;/ArticleServlet&quot; method=&quot;POST&quot;&gt;</span><br><span class="line">		&lt;input id=&quot;currPageNOID&quot; type=&quot;hidden&quot; name=&quot;currPageNO&quot; value=&quot;1&quot;&gt;</span><br><span class="line">		&lt;table border=&quot;2&quot; align=&quot;center&quot;&gt;</span><br><span class="line">			&lt;tr&gt;</span><br><span class="line">				&lt;th&gt;输入关键字：&lt;/th&gt;</span><br><span class="line">				&lt;th&gt;&lt;input type=&quot;text&quot; name=&quot;keywords&quot; maxlength=&quot;4&quot; value=&quot;$&#123;requestScope.keywords&#125;&quot;/&gt;&lt;/th&gt;</span><br><span class="line">				&lt;th&gt;&lt;input type=&quot;submit&quot; value=&quot;站内搜索&quot;/&gt;&lt;/th&gt;</span><br><span class="line">			&lt;/tr&gt;</span><br><span class="line">		&lt;/table&gt;</span><br><span class="line">	&lt;/form&gt;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	&lt;!-- 输出区 --&gt;</span><br><span class="line">	&lt;table border=&quot;2&quot; align=&quot;center&quot; width=&quot;60%&quot;&gt;</span><br><span class="line">		&lt;tr&gt;</span><br><span class="line">			&lt;th&gt;编号&lt;/th&gt;</span><br><span class="line">			&lt;th&gt;标题&lt;/th&gt;</span><br><span class="line">			&lt;th&gt;内容&lt;/th&gt;</span><br><span class="line">		&lt;/tr&gt;</span><br><span class="line">		&lt;c:forEach var=&quot;article&quot; items=&quot;$&#123;requestScope.pageBean.articleList&#125;&quot;&gt;</span><br><span class="line">			&lt;tr&gt;</span><br><span class="line">				&lt;td&gt;$&#123;article.id&#125;&lt;/td&gt;</span><br><span class="line">				&lt;td&gt;$&#123;article.title&#125;&lt;/td&gt;</span><br><span class="line">				&lt;td&gt;$&#123;article.content&#125;&lt;/td&gt;</span><br><span class="line">			&lt;/tr&gt;</span><br><span class="line">		&lt;/c:forEach&gt;</span><br><span class="line">		&lt;!-- 分页条 --&gt;</span><br><span class="line">		&lt;tr&gt;</span><br><span class="line">			&lt;td colspan=&quot;3&quot; align=&quot;center&quot;&gt;</span><br><span class="line">				&lt;a onclick=&quot;fy(1)&quot; style=&quot;text-decoration:none;cursor:hand&quot;&gt;</span><br><span class="line">					【首页】</span><br><span class="line">				&lt;/a&gt;</span><br><span class="line">				&lt;c:choose&gt;</span><br><span class="line">					&lt;c:when test=&quot;$&#123;requestScope.pageBean.currPageNO+1&lt;=requestScope.pageBean.allPageNO&#125;&quot;&gt;</span><br><span class="line">						&lt;a onclick=&quot;fy($&#123;requestScope.pageBean.currPageNO+1&#125;)&quot; style=&quot;text-decoration:none;cursor:hand&quot;&gt;</span><br><span class="line">							【下一页】</span><br><span class="line">						&lt;/a&gt;</span><br><span class="line">					&lt;/c:when&gt;</span><br><span class="line">					&lt;c:otherwise&gt;</span><br><span class="line">							下一页</span><br><span class="line">					&lt;/c:otherwise&gt;</span><br><span class="line">				&lt;/c:choose&gt;</span><br><span class="line">				&lt;c:choose&gt;</span><br><span class="line">					&lt;c:when test=&quot;$&#123;requestScope.pageBean.currPageNO-1&gt;0&#125;&quot;&gt;</span><br><span class="line">						&lt;a onclick=&quot;fy($&#123;requestScope.pageBean.currPageNO-1&#125;)&quot; style=&quot;text-decoration:none;cursor:hand&quot;&gt;</span><br><span class="line">							【上一页】</span><br><span class="line">						&lt;/a&gt;</span><br><span class="line">					&lt;/c:when&gt;</span><br><span class="line">					&lt;c:otherwise&gt;</span><br><span class="line">							上一页</span><br><span class="line">					&lt;/c:otherwise&gt;</span><br><span class="line">				&lt;/c:choose&gt;</span><br><span class="line">				&lt;a onclick=&quot;fy($&#123;requestScope.pageBean.allPageNO&#125;)&quot; style=&quot;text-decoration:none;cursor:hand&quot;&gt;</span><br><span class="line">					【未页】</span><br><span class="line">				&lt;/a&gt;</span><br><span class="line">			&lt;/td&gt;</span><br><span class="line">		&lt;/tr&gt;</span><br><span class="line">	&lt;/table&gt;</span><br><span class="line"></span><br><span class="line">	&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">		function fy(currPageNO)&#123;</span><br><span class="line">			document.getElementById(&quot;currPageNOID&quot;).value = currPageNO;</span><br><span class="line">			document.forms[0].submit();</span><br><span class="line">		&#125;</span><br><span class="line">	&lt;/script&gt;</span><br><span class="line">	</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="activiti"><a href="#activiti" class="headerlink" title="activiti"></a>activiti</h3><p>Activiti5是由Alfresco软件在2010年5月17日发布的业务流程管理（BPM）框架，它是覆盖了业务流程管理、工作流、服务协作等领域的一个开源的、灵活的、易扩展的可执行流程语言框架。Activiti基于Apache许可的开源BPM平台，创始人Tom Baeyens是JBoss jBPM的项目架构师，它特色是提供了eclipse插件，开发人员可以通过插件直接绘画出业务<br>流程图。<br>工作流概念<br>   oa系统、电子政务   经常采用工作流</p>
<p>activiti工作流包括</p>
<pre><code>1. 工作流引擎 ：ProcessEngine ，它是Activiti的核心类，由该类可以获取其他的服务实例
             （历史服务、仓库服务、任务服务、用户参与者服务）
2. BPMN  ：UML ：用例图、类图、时序图 
   业务流程建模与标注（Business Process Model and Notation，BPMN) ，
   描述流程的基本符号，包括这些图元如何组合成一个业务流程图（Business Process Diagram）
3. 数据库 
   Activiti的后台是有数据库的支持，所有的表都以ACT_开头。
   第二部分是表示表的用途的两个字母标识。 用途也和服务的API对应
   Activiti的工作流数据库有23张表    
     要保存流程定义 
    - act_ge_*  ：通用表
    - act_hi_*  ：历史流程相关表 
    - act_re_*  ：仓库表：保存流程定义
    - act_ru_*  ：保存流程运行相关的表  
    - act_id_*  ：用户参与相关的表  
4. activiti.cfg.xml  
    Activiti核心配置文件，配置流程引擎创建工具的基本参数和数据库连接参数
5. logging.properties    ：log4j
</code></pre><p><img src="https://volcfamily.cn/images/interview-question/a4.png" alt="a4"><br>模拟activiti执行流程框架<br>1.创建activiti project工程，不关联项目，添加所有的activiti框架的jar包<br>1.2.配置ProcessEngineConfiguration工作流引擎。activiti.cfg.xml配置文件和log4j.properties</p>
<p>2.设置流程定义图bpmn(业务流程建模标注)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">	xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;</span><br><span class="line">	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">	xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span><br><span class="line">http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd</span><br><span class="line">http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd&quot;&gt;</span><br><span class="line"></span><br><span class="line"> &lt;!-- 配置 ProcessEngineConfiguration  --&gt;</span><br><span class="line"> &lt;bean id=&quot;processEngineConfiguration&quot; class=&quot;org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration&quot;&gt;</span><br><span class="line">   &lt;!-- 配置数据库连接 --&gt;</span><br><span class="line"> &lt;property name=&quot;jdbcDriver&quot; value=&quot;com.mysql.jdbc.Driver&quot;&gt;&lt;/property&gt;</span><br><span class="line"> &lt;property name=&quot;jdbcUrl&quot; value=&quot;jdbc:mysql://localhost:3306/activitiDB?createDatabaseIfNotExist=true&amp;amp;useUnicode=true&amp;amp;characterEncoding=utf8&quot;&gt;&lt;/property&gt;</span><br><span class="line"> &lt;property name=&quot;jdbcUsername&quot; value=&quot;root&quot;&gt;&lt;/property&gt;</span><br><span class="line"> &lt;property name=&quot;jdbcPassword&quot; value=&quot;root&quot;&gt;&lt;/property&gt;</span><br><span class="line">  &lt;!-- 配置创建表策略 :没有表时，自动创建 --&gt;</span><br><span class="line">  &lt;property name=&quot;databaseSchemaUpdate&quot; value=&quot;true&quot;&gt;&lt;/property&gt;</span><br><span class="line"> &lt;/bean&gt;</span><br><span class="line">&lt;/beans&gt;</span><br><span class="line">&lt;!-- </span><br><span class="line">	&lt;c3p0-config&gt;</span><br><span class="line">	&lt;default-config&gt;</span><br><span class="line">		&lt;property name=&quot;driverClass&quot;&gt;oracle.jdbc.driver.OracleDriver&lt;/property&gt;</span><br><span class="line">		&lt;property name=&quot;jdbcUrl&quot;&gt;jdbc:oracle:thin:@127.0.0.1:1521:orcl&lt;/property&gt;</span><br><span class="line">		&lt;property name=&quot;user&quot;&gt;scott&lt;/property&gt;</span><br><span class="line">		&lt;property name=&quot;password&quot;&gt;tiger&lt;/property&gt;</span><br><span class="line">		&lt;property name=&quot;acquireIncrement&quot;&gt;2&lt;/property&gt;</span><br><span class="line">		&lt;property name=&quot;initialPoolSize&quot;&gt;5&lt;/property&gt;</span><br><span class="line">		&lt;property name=&quot;minPoolSize&quot;&gt;1&lt;/property&gt;</span><br><span class="line">		&lt;property name=&quot;maxPoolSize&quot;&gt;5&lt;/property&gt;</span><br><span class="line">	&lt;/default-config&gt;</span><br><span class="line">&lt;/c3p0-config&gt;</span><br><span class="line"> --&gt;</span><br></pre></td></tr></table></figure></p>
<p>   右击diagram目录新建一个activiti diagram流程图，创建流程图，编写每一个流程的信息<br>   General和main config配置信息</p>
<p><img src="https://volcfamily.cn/images/interview-question/a5.png" alt="a5"><br><img src="https://volcfamily.cn/images/interview-question/a6.png" alt="a6"><br>指定当前流程有哪个人来审批，指定人名</p>
<p><img src="https://volcfamily.cn/images/interview-question/a7.png" alt="a7"> </p>
<p>流程引擎类结构：<br><img src="https://volcfamily.cn/images/interview-question/a8.png" alt="a8">   </p>
<p>3.通过代码的形式在ActivitiTest.java类中创建流程引擎对象。代替activiti.cfg.xml中的配置(选其一)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> org.activiti.engine.ProcessEngine;</span><br><span class="line"><span class="keyword">import</span> org.activiti.engine.ProcessEngineConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.activiti.engine.ProcessEngines;</span><br><span class="line"><span class="keyword">import</span> org.activiti.engine.RepositoryService;</span><br><span class="line"><span class="keyword">import</span> org.activiti.engine.RuntimeService;</span><br><span class="line"><span class="keyword">import</span> org.activiti.engine.TaskService;</span><br><span class="line"><span class="keyword">import</span> org.activiti.engine.repository.Deployment;</span><br><span class="line"><span class="keyword">import</span> org.activiti.engine.repository.DeploymentBuilder;</span><br><span class="line"><span class="keyword">import</span> org.activiti.engine.runtime.ProcessInstance;</span><br><span class="line"><span class="keyword">import</span> org.activiti.engine.task.Task;</span><br><span class="line"><span class="keyword">import</span> org.activiti.engine.task.TaskQuery;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 模拟activiti工作流的框架</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Administrator</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ActivitiTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> ProcessEngine defaultProcessEngine = ProcessEngines.getDefaultProcessEngine();</span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="comment">//创建activiti涉及的数据库和表</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">createProcessEnginer</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="comment">/**</span></span><br><span class="line"><span class="comment">		 * 1.通过代码形式创建</span></span><br><span class="line"><span class="comment">		 * 	1.1获取ProcessEngineConfiguration对象</span></span><br><span class="line"><span class="comment">		 * 	1.2设置数据路连接属性</span></span><br><span class="line"><span class="comment">		 *  1.3当没有表时设置创建表的策略</span></span><br><span class="line"><span class="comment">		 *  1.4通过ProcessEngineConfiguration创建ProcessEnginer对象</span></span><br><span class="line"><span class="comment">		 */</span> </span><br><span class="line">		<span class="comment">/*</span></span><br><span class="line"><span class="comment">		//1.1获取ProcessEngineConfiguration对象</span></span><br><span class="line"><span class="comment">		ProcessEngineConfiguration configuration = ProcessEngineConfiguration.</span></span><br><span class="line"><span class="comment">				createStandaloneProcessEngineConfiguration();</span></span><br><span class="line"><span class="comment">		configuration.setJdbcDriver("com.mysql.jdbc.Driver");</span></span><br><span class="line"><span class="comment">		//1.2设置数据路连接属性</span></span><br><span class="line"><span class="comment">	//带参数url不存在则创建，设置字符集编码格式(自动创建activitidb数据库和23张表)	configuration.setJdbcUrl("jdbc:mysql://localhost:3306/activitiDB?createDatabaseIfNotExist=true"+</span></span><br><span class="line"><span class="comment">				"&amp;useUnicode=true&amp;characterEncoding=utf8");</span></span><br><span class="line"><span class="comment">		configuration.setJdbcUsername("root");</span></span><br><span class="line"><span class="comment">		configuration.setJdbcPassword("root");</span></span><br><span class="line"><span class="comment">		//1.3当没有表时设置创建表的策略</span></span><br><span class="line"><span class="comment">//		  public static final java.lang.String DB_SCHEMA_UPDATE_FALSE = "false";</span></span><br><span class="line"><span class="comment">//		  public static final java.lang.String DB_SCHEMA_UPDATE_CREATE_DROP = "create-drop";</span></span><br><span class="line"><span class="comment">//		  public static final java.lang.String DB_SCHEMA_UPDATE_TRUE = "true";//假如没有表会自动创建表</span></span><br><span class="line"><span class="comment">		configuration.setDatabaseSchemaUpdate("true");</span></span><br><span class="line"><span class="comment">		//1.4通过ProcessEngineConfiguration创建ProcessEnginer对象</span></span><br><span class="line"><span class="comment">		ProcessEngine buildProcessEngine = configuration.buildProcessEngine();</span></span><br><span class="line"><span class="comment">		System.out.println("流程引擎创建成功" + buildProcessEngine);</span></span><br><span class="line"><span class="comment">		*/</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">/*</span></span><br><span class="line"><span class="comment">		 * 2.通过加载activit.cfg.xml获取流程引擎和自动创建数据库及表</span></span><br><span class="line"><span class="comment">               从类的加载路径中加载资源activiti.cfg.xml配置文件</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		<span class="comment">/*ProcessEngineConfiguration configuration = ProcessEngineConfiguration.</span></span><br><span class="line"><span class="comment">				createProcessEngineConfigurationFromResource("activiti.cfg.xml");//从类的加载路径</span></span><br><span class="line"><span class="comment">		ProcessEngine buildProcessEngine = configuration.buildProcessEngine();</span></span><br><span class="line"><span class="comment">		System.out.println("通过activiti.cfg.xml文件创建流程引擎对象" + buildProcessEngine);*/</span></span><br><span class="line">		<span class="comment">/*</span></span><br><span class="line"><span class="comment">		 * 3.通过默认加载类路径下activiti.cfg.xml</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		System.out.println(<span class="string">"通过加载默认的类路径下的配置文件方法获取流引擎对象"</span> + defaultProcessEngine);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>部署流程定义<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	 * 部署流程定义 </span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deploy</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="comment">//获取流程引擎对象</span></span><br><span class="line">		RepositoryService repositoryService = defaultProcessEngine.getRepositoryService();</span><br><span class="line">		Deployment deploy = repositoryService.createDeployment()</span><br><span class="line">				.addClasspathResource(<span class="string">"diagrams/LeaveBill.bpmn"</span>)</span><br><span class="line">				.addClasspathResource(<span class="string">"diagrams/LeaveBill.png"</span>)</span><br><span class="line">				.name(<span class="string">"请假单流程图"</span>)<span class="comment">//设置部署的名称</span></span><br><span class="line">				.category(<span class="string">"办公类别"</span>)<span class="comment">//设置部署类别</span></span><br><span class="line">				.deploy();<span class="comment">//真正部署</span></span><br><span class="line">		System.out.println(<span class="string">"部署流程图的对象的id"</span> + deploy.getId());</span><br><span class="line">		System.out.println(<span class="string">"部署流程图的对象的名称"</span> + deploy.getName());</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>5.执行流程<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//执行流程</span></span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">startProcess</span><span class="params">()</span></span>&#123;</span><br><span class="line">		String processValue = <span class="string">"leavebill"</span>;</span><br><span class="line">		RuntimeService runtimeService = defaultProcessEngine.getRuntimeService();</span><br><span class="line">		<span class="comment">//取得流程实例</span></span><br><span class="line">		ProcessInstance processInstanceByKey = runtimeService.startProcessInstanceByKey(processValue);</span><br><span class="line">		System.out.println(<span class="string">"流程实例的id"</span> + processInstanceByKey.getId());</span><br><span class="line">		System.out.println(<span class="string">"流程定义的id"</span> + processInstanceByKey.getProcessDefinitionId());</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure></p>
<ol start="6">
<li>查询任务</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//查询任务</span></span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">queryTask</span><span class="params">()</span></span>&#123;</span><br><span class="line">		String name = <span class="string">"张三"</span>;</span><br><span class="line">		TaskService taskService = defaultProcessEngine.getTaskService();</span><br><span class="line">		<span class="comment">//创建一个任务查询对象</span></span><br><span class="line">		TaskQuery createTaskQuery = taskService.createTaskQuery();</span><br><span class="line">		<span class="comment">//查询办理人的任务列表</span></span><br><span class="line">		List&lt;Task&gt; list = createTaskQuery.taskAssignee(name)</span><br><span class="line">			.list();</span><br><span class="line">		<span class="comment">//查询到任务列表，遍历</span></span><br><span class="line">		<span class="keyword">if</span>(list != <span class="keyword">null</span> &amp;&amp; list.size() &gt; <span class="number">0</span>)&#123;</span><br><span class="line">			<span class="keyword">for</span>(Task task : list)&#123;</span><br><span class="line">				System.out.println(<span class="string">"任务办理人"</span> + task.getAssignee());</span><br><span class="line">				System.out.println(<span class="string">"任务id"</span> + task.getId());</span><br><span class="line">				System.out.println(<span class="string">"任务名称"</span> + task.getName());</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<p>7.完成任务<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//完成任务</span></span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">compileTask</span><span class="params">()</span></span>&#123;</span><br><span class="line">		String taskId = <span class="string">"104"</span>;</span><br><span class="line">		TaskService taskService = defaultProcessEngine.getTaskService();</span><br><span class="line">		taskService.complete(taskId);</span><br><span class="line">		System.out.println(<span class="string">"执行任务完成"</span>);</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="Maven"><a href="#Maven" class="headerlink" title="Maven"></a>Maven</h3><p>Maven是一个采用纯Java编写的开源项目管理工具, Maven采用了一种被称之为Project Object Model (POM)概念来管理项目，所有的项目配置信息都被定义在一个叫做POM.xml的文件中, 通过该文件Maven可以管理项目的整个生命周期，包括清除、编译，测试，报告、打包、部署等等</p>
<p>Maven能够做什么<br>    Jar的声明式依赖性管理<br>    项目自动构建<br>使用需求</p>
<pre><code>- 企业岗位需求
- 软件开发中遇到的问题
  1. jar包的依赖与管理  
    项目中有很多jar包： 
  问题：不能确定jar包的完全正确性、不同技术框架版本的管理、jar包的依赖
  2. 自动构建项目
     - 软件开发： 可行性分析、需求分析、软件设计、软件开发、发布、运维
 - 软件构建： 软件已经开发完毕，需要构建成一个产品进行发布
   构建步骤：
   清除--&gt; 编译--&gt;测试--&gt;报告--&gt;打包（jar\war）--&gt;安装--&gt;部署到远程
 maven可以通过一个命令实现自动构建软件项目
</code></pre><p>pom.xml<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 当前pom的版本号 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- groupId: 当前jar所属的命名空间 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.itcast.maven<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 当前项目模块名称 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 当前项目的版本, SNAPSHOT镜像版 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 当前模块需要依赖的相关jar包,也称为依赖管理, 所有被依赖的包都是通过"坐标"定位的 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">	    <span class="comment">&lt;!-- 需要依赖junit 通过 groupId+artifactId+version来查找,如果本地没有则到中央仓库下载 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- 当前jar所属的命名空间 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- 依赖的项目模块的名称 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- 依赖的版本号 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>4.9<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- 依赖的范围, 有 test compile privlege --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span>		</span><br><span class="line">	<span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>使用Maven用例</p>
<ol>
<li>1.4.1.    HelloFriend目录结构<br>HelloFriend<br>–src<br>—–main<br>———-java<br>———-resources<br>—–test<br>———java<br>———resources<br>–pom.xml<br>建立pom.xml<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">project</span> </span></span><br><span class="line"><span class="tag"><span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.itcast.maven<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>HelloFriend<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>4.9<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.itcast.maven<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>在src/main/java/cn/itcast/maven目录下新建文件HelloFriend.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloFriend</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">sayHello</span><span class="params">(String name)</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"Hello "</span>+name+<span class="string">"!"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在/src/test/java/cn/itcast/maven目录下新建测试文件HelloFriendTest.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> cn.itcast.maven.Hello;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloFriendTest</span> </span>&#123;</span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">tesHelloFriend</span><span class="params">()</span></span>&#123;</span><br><span class="line">		HelloFriend helloFriend = <span class="keyword">new</span> HelloFriend();</span><br><span class="line">		String results = helloFriend.sayHelloToFriend(<span class="string">"litingwei"</span>);</span><br><span class="line">		System.out.println(results);		</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>命令测试<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">在HelloFriend目录下执行 mvn clean mvn compile mvn test 都正常</span><br><span class="line">在HelloFriend目录下执行命令mvn package 系统报错说没有找到依赖, 因为HelloFriend依赖Hello模块,但是此模块在个人仓库和中央仓库中并不存在</span><br><span class="line">需要重新构建Hello第一个项目并安装到数据仓库, 在Hello根目录下执行mvn clean install, 就会部署的中央仓库中</span><br></pre></td></tr></table></figure></p>
<p>生命周期<br><img src="https://volcfamily.cn/images/interview-question/a9.png" alt="a9"> </p>
<h3 id="Quartz-制定任务详细执行时间"><a href="#Quartz-制定任务详细执行时间" class="headerlink" title="Quartz(制定任务详细执行时间)"></a>Quartz(制定任务详细执行时间)</h3><p>QuartzTask.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QuartzTask</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doSimpleTriggerTask</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		SimpleDateFormat sdf = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd HH:mm:ss"</span>);</span><br><span class="line">		System.out.println(<span class="string">"doing simpleTrigger task..."</span> + sdf.format(<span class="keyword">new</span> Date()));</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doCronTriggerTask</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		SimpleDateFormat sdf = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd HH:mm:ss"</span>);</span><br><span class="line">		System.out.println(<span class="string">"doing cronTrigger task..."</span> + sdf.format(<span class="keyword">new</span> Date()));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>complain-spring.xml配置//在每月的月底下午的3点每分钟的第10秒执行，自动处理过期投诉数据<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span><span class="meta">?&gt;</span></span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="attr">xmlns:p</span>=<span class="string">"http://www.springframework.org/schema/p"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span> <span class="attr">xmlns:tx</span>=<span class="string">"http://www.springframework.org/schema/tx"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xsi:schemaLocation</span>=<span class="string">" http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd </span></span></span><br><span class="line"><span class="tag"><span class="string">	http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd </span></span></span><br><span class="line"><span class="tag"><span class="string">	http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">	http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd"</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"complainDao"</span> <span class="attr">class</span>=<span class="string">"cn.itcast.nsfw.complain.dao.impl.ComplainDaoImpl"</span> <span class="attr">parent</span>=<span class="string">"baseDao"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 扫描service --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"cn.itcast.nsfw.complain.service.impl"</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">     <span class="comment">&lt;!-- 1、制定任务信息信息 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"complainJobDetail"</span> <span class="attr">class</span>=<span class="string">"org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean"</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 设置执行对象 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"targetObject"</span> <span class="attr">ref</span>=<span class="string">"complainService"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 设置执行对象中对应的执行方法 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"targetMethod"</span> <span class="attr">value</span>=<span class="string">"autoDeal"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 是否可以同步执行；不可同步执行 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"concurrent"</span> <span class="attr">value</span>=<span class="string">"false"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">     <span class="comment">&lt;!-- 2、制定任务执行时机（任务执行触发器） --&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"complainCronTrigger"</span> <span class="attr">class</span>=<span class="string">"org.springframework.scheduling.quartz.CronTriggerBean"</span>&gt;</span></span><br><span class="line">     	<span class="comment">&lt;!-- 设置任务详细信息 --&gt;</span></span><br><span class="line">     	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jobDetail"</span> <span class="attr">ref</span>=<span class="string">"complainJobDetail"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">     	<span class="comment">&lt;!-- 设置任务执行时间点，cronExpression: 在每月的月底下午的3点每分钟的第10秒执行任务 --&gt;</span></span><br><span class="line">     	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"cronExpression"</span> <span class="attr">value</span>=<span class="string">"10 * 15 L * ?"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">     <span class="comment">&lt;!-- 3、设置调度工厂 --&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"complainScheduler"</span> <span class="attr">class</span>=<span class="string">"org.springframework.scheduling.quartz.SchedulerFactoryBean"</span>&gt;</span></span><br><span class="line">     	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"triggers"</span>&gt;</span></span><br><span class="line">     		<span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">     			<span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">"complainCronTrigger"</span>/&gt;</span></span><br><span class="line">     		<span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">     	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>quartz-spring.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span><span class="meta">?&gt;</span></span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="attr">xmlns:p</span>=<span class="string">"http://www.springframework.org/schema/p"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span> <span class="attr">xmlns:tx</span>=<span class="string">"http://www.springframework.org/schema/tx"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xsi:schemaLocation</span>=<span class="string">" http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd </span></span></span><br><span class="line"><span class="tag"><span class="string">	http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd </span></span></span><br><span class="line"><span class="tag"><span class="string">	http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">	http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd"</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">   <span class="comment">&lt;!-- 注册一个普通bean --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"quartzTask"</span> <span class="attr">class</span>=<span class="string">"cn.itcast.nsfw.complain.QuartzTask"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">   </span><br><span class="line">   <span class="comment">&lt;!-- 1、制定任务信息信息 --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"jobDetail1"</span> <span class="attr">class</span>=<span class="string">"org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean"</span>&gt;</span></span><br><span class="line">   		   <span class="comment">&lt;!-- 设置执行对象 --&gt;</span></span><br><span class="line">   		   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"targetObject"</span> <span class="attr">ref</span>=<span class="string">"quartzTask"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   		   <span class="comment">&lt;!-- 设置执行对象中对应的执行方法 --&gt;</span></span><br><span class="line">   		   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"targetMethod"</span> <span class="attr">value</span>=<span class="string">"doSimpleTriggerTask"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   		   <span class="comment">&lt;!-- 是否可以同步执行；不可同步执行 --&gt;</span></span><br><span class="line">   		   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"concurrent"</span> <span class="attr">value</span>=<span class="string">"false"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"jobDetail2"</span> <span class="attr">class</span>=<span class="string">"org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean"</span>&gt;</span></span><br><span class="line">   		   <span class="comment">&lt;!-- 设置执行对象 --&gt;</span></span><br><span class="line">   		   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"targetObject"</span> <span class="attr">ref</span>=<span class="string">"quartzTask"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   		   <span class="comment">&lt;!-- 设置执行对象中对应的执行方法 --&gt;</span></span><br><span class="line">   		   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"targetMethod"</span> <span class="attr">value</span>=<span class="string">"doCronTriggerTask"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   		   <span class="comment">&lt;!-- 是否可以同步执行；不可同步执行 --&gt;</span></span><br><span class="line">   		   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"concurrent"</span> <span class="attr">value</span>=<span class="string">"false"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">   </span><br><span class="line">   <span class="comment">&lt;!-- 2、制定任务执行时机（任务执行触发器） --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"simplerTrigger"</span> <span class="attr">class</span>=<span class="string">"org.springframework.scheduling.quartz.SimpleTriggerBean"</span>&gt;</span></span><br><span class="line">   		<span class="comment">&lt;!-- 设置任务详细 --&gt;</span></span><br><span class="line">   		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jobDetail"</span> <span class="attr">ref</span>=<span class="string">"jobDetail1"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   		<span class="comment">&lt;!-- 设置任务延迟执行时间 ；延迟2秒执行--&gt;</span></span><br><span class="line">   		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"startDelay"</span> <span class="attr">value</span>=<span class="string">"2000"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   		<span class="comment">&lt;!-- 设置任务执行频率；执行频率为每4秒执行一下 --&gt;</span></span><br><span class="line">   		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"repeatInterval"</span> <span class="attr">value</span>=<span class="string">"2000"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"cronTrigger"</span> <span class="attr">class</span>=<span class="string">"org.springframework.scheduling.quartz.CronTriggerBean"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 设置任务详细 --&gt;</span></span><br><span class="line">   		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jobDetail"</span> <span class="attr">ref</span>=<span class="string">"jobDetail2"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   		<span class="comment">&lt;!-- 设置任务执行时机，cron表达式 --&gt;</span></span><br><span class="line">   		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"cronExpression"</span> <span class="attr">value</span>=<span class="string">"* * * 18c * ?"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- 3、设置调度工厂 --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.scheduling.quartz.SchedulerFactoryBean"</span>&gt;</span></span><br><span class="line">   		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"triggers"</span>&gt;</span></span><br><span class="line">   			<span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">   				<span class="comment">&lt;!-- &lt;ref bean="simplerTrigger"/&gt; --&gt;</span></span><br><span class="line">   				<span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">"cronTrigger"</span>/&gt;</span></span><br><span class="line">   			<span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">   		<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="2345公司面试题"><a href="#2345公司面试题" class="headerlink" title="2345公司面试题"></a>2345公司面试题</h3><h4 id="、–是否是线程安全的，为什么"><a href="#、–是否是线程安全的，为什么" class="headerlink" title="++、–是否是线程安全的，为什么"></a>++、–是否是线程安全的，为什么</h4><p>i++和++i的线程安全分为两种情况：<br>1、如果i是局部变量（在方法里定义的），那么是线程安全的。因为局部变量是线程私有的，别的线程访问不到，其实也可以说没有线程安不安全之说，因为别的线程对他造不成影响。<br>2、如果i是全局变量（类的成员变量），那么是线程不安全的。因为如果是全局变量的话，同一进程中的不同线程都有可能访问到。<br>如果有大量线程同时执行i++操作，i变量的副本拷贝到每个线程的线程栈，当同时有两个线程栈以上的线程读取线程变量，假如此时是1的话，那么同时执行i++操作，再写入到全局变量，最后两个线程执行完，i会等于3而不会是2，所以，出现不安全性。</p>
<h4 id="Spring-IOC的理解和原理"><a href="#Spring-IOC的理解和原理" class="headerlink" title="Spring IOC的理解和原理"></a>Spring IOC的理解和原理</h4><h5 id="理解"><a href="#理解" class="headerlink" title="理解"></a>理解</h5><p>Ioc—Inversion of Control，即“控制反转”，不是什么技术，而是一种设计思想。在Java开发中，Ioc意味着将你设计好的对象交给容器控制，而不是传统的在你的对象内部直接控制。<br>●谁控制谁，控制什么：传统Java SE程序设计，我们直接在对象内部通过new进行创建对象，是程序主动去创建依赖对象；而IoC是有专门一个容器来创建这些对象，即由Ioc容器来控制对 象的创建；谁控制谁？当然是IoC 容器控制了对象；控制什么？那就是主要控制了外部资源获取（不只是对象包括比如文件等）<br>●为何是反转，哪些方面反转了：有反转就有正转，传统应用程序是由我们自己在对象中主动控制去直接获取依赖对象，也就是正转；而反转则是由容器来帮忙创建及注入依赖对象；为何是反转？因为由容器帮我们查找及注入依赖对象，对象只是被动的接受依赖对象，所以是反转；哪些方面反转了？依赖对象的获取被反转了。</p>
<h5 id="IOC原理"><a href="#IOC原理" class="headerlink" title="IOC原理"></a>IOC原理</h5><p>Spring容器高层视图<br><img src="https://volcfamily.cn/images/interview-question/b1.png" alt="b1"><br>Bean缓存池：HashMap实现</p>
<p>Spring 通过一个配置文件描述 Bean 及 Bean 之间的依赖关系，利用 Java 语言的反射功能实例化 Bean 并建立 Bean 之间的依赖关系</p>
<ol>
<li>BeanFactory 是 Spring 框架的基础设施，面向 Spring 本身，使用的是工厂设计模式</li>
<li>ApplicationContext 面向使用 Spring 框架的开发者，几乎所有的应用场合我们都直接使用 ApplicationContext 而非底层的 BeanFactory。<h6 id="BeanFactory"><a href="#BeanFactory" class="headerlink" title="BeanFactory"></a>BeanFactory</h6>BeanFactory 是 Spring 框架的基础设施，面向 Spring 本身；<h6 id="ApplicationContext"><a href="#ApplicationContext" class="headerlink" title="ApplicationContext"></a>ApplicationContext</h6>ApplicationContext 由 BeanFactory 派生而来，提供了更多面向实际应用的功能。<br>在BeanFactory 中，很多功能需要以编程的方式实现，而在 ApplicationContext 中则可以通过配置的方式实现。</li>
</ol>
<h5 id="DI-Dependency-Injection，依赖注入-原理"><a href="#DI-Dependency-Injection，依赖注入-原理" class="headerlink" title="DI(Dependency Injection，依赖注入)原理"></a>DI(Dependency Injection，依赖注入)原理</h5><p>IoC的一个重点是在系统运行中，动态的向某个对象提供它所需要的其他对象。这一点是通过DI（Dependency Injection，<br>依赖注入）来实现的。比如对象A需要操作数据库，以前我们总是要在A中自己编写代码来获得一个Connection对象，有了<br>spring我们就只需要告诉spring，A中需要一个Connection，至于这个Connection怎么构造，何时构造，A不需要知道。<br>在系统运行时，spring会在适当的时候制造一个Connection</p>
<p>总结：</p>
<ol>
<li>SpringIOC容器主要有继承体系底层的BeanFactory、高层的ApplicationContext和WebApplicationContext</li>
<li>Bean有自己的生命周期</li>
<li>容器启动原理：Spring应用的IOC容器通过tomcat的Servlet或Listener监听启动加载；Spring MVC的容器由DispatchServlet作为入口加载；Spring容器是Spring MVC容器的父容器</li>
<li>容器加载Bean原理：<br>BeanDefinitionReader读取Resource所指向的配置文件资源，然后解析配置文件。配置文件中每一个<bean>解析成一个BeanDefinition对象，并保存到BeanDefinitionRegistry中；<br>容器扫描BeanDefinitionRegistry中的BeanDefinition；调用InstantiationStrategy进行Bean实例化的工作；使用BeanWrapper完成Bean属性的设置工作；<br>单例Bean缓存池：Spring 在 DefaultSingletonBeanRegistry 类中提供了一个用于缓存单实例 Bean 的缓存器，它是一个用 HashMap 实现的缓存器，单实例的 Bean 以 beanName 为键保存在这个HashMap 中。<br>参考：<a href="https://zhuanlan.zhihu.com/p/29344811" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/29344811</a>    </bean></li>
</ol>
<h4 id="AOP面向切面原理"><a href="#AOP面向切面原理" class="headerlink" title="AOP面向切面原理"></a>AOP面向切面原理</h4><p>AOP是OOP的延续，是（Aspect Oriented Programming）的缩写，意思是面向切面编程。要理解AOP首先得弄明白代理的概念。对于代理看下点击打开链接这篇文章。</p>
<p>  AOP（Aspect Orient Programming），作为面向对象编程的一种补充，广泛应用于处理一些具有横切性质的系统级服务，如事务管理、安全检查、缓存、对象池管理等。 AOP 实现的关键就在于 AOP 框架自动创建的 AOP 代理，AOP 代理则可分为静态代理和动态代理两大类，其中静态代理是指使用 AOP 框架提供的命令进行编译，从而在编译阶段就可生成 AOP 代理类，因此也称为编译时增强；而动态代理则在运行时借助于 JDK 动态代理、CGLIB 等在内存中”临时”生成 AOP 动态代理类，因此也被称为运行时增强。</p>
<p>知道这些其他的就是些配置了。</p>
<h4 id="堆和栈的区别-1"><a href="#堆和栈的区别-1" class="headerlink" title="堆和栈的区别"></a>堆和栈的区别</h4><p>1.栈内存存储的是局部变量，基础数据，而堆内存存储的是实体(new的对象)；<br>2.栈内存的更新速度要快于堆内存，因为局部变量的生命周期很短；<br>3.栈内存存放的变量生命周期一旦结束就会被释放，而堆内存存放的实体会被垃圾回收机制不定时的回收。Java的堆是一个运行时数据区，堆是由垃圾回收来负责的，堆的优势是可以动态地分配内存大小。<br>4.如果栈内存没有可用的空间存储方法调用和局部变量，JVM会抛出java.lang.StackOverFlowError。<br>而如果是堆内存没有可用的空间存储生成的对象，JVM会抛出java.lang.OutOfMemoryError<br>5.栈中的数据共享的区别，和两个对象引用同时执行同一个堆中对象是不同的。通过一个对象的引用改变对象的数据，那么另一个对象的引用所指向的堆中的对象数据也会改变。而在栈中int a = 1;int b = 1; a改变不会影响b的值。</p>
<h4 id="对象的值相同-y-equals-x-true-hash-code相同吗，为什么"><a href="#对象的值相同-y-equals-x-true-hash-code相同吗，为什么" class="headerlink" title="对象的值相同(y.equals(x) == true),hash code相同吗，为什么"></a>对象的值相同(y.equals(x) == true),hash code相同吗，为什么</h4><p>不一定相同。正常情况下，因为equals()方法比较的就是对象在内存中的值，如果值相同，那么Hashcode值也应该相同。但是如果不重写hashcode方法，就会出现不相等的情况。<br>通常有必要重写 hashCode 方法，以维护 hashCode 方法的常规协定，该协定声明相等对象必须具有相等的哈希码。</p>
<p>1.equals() 用于判断两个对象的数据、内容是否一致。<br>2.hashCode()用于生成一个哈希码(相应对象整型的 hash 值)，便于HashMap使用，系统默认实现是计算对象的内存地址，转换成一个整数。 它们之间没什么联系，两个相等的对象生成的HASH码应该是相等的，但是HASH码相等并不能保证两个对象相等。关键在于你对相等的定义（也就是重写equals函数），与此同时，也应该重写hashCode函数保证上述关系。</p>
<p>== 是比较地址是否相等，JAVA中声明变量都是引用嘛，不同的引用，可能指向同一个地址。<br>equals 是比较值是否相等。</p>
<p>如果是基本变量，没有hashcode和equals方法，基本变量的比较方式就只有==；<br>如果是变量要比较实际内存中的内容，那就要用equals方法</p>
<h4 id="线程池的作用"><a href="#线程池的作用" class="headerlink" title="线程池的作用"></a>线程池的作用</h4><p>第一：降低资源消耗。通过重复利用已创建的线程降低线程创建和销毁造成的消耗。<br>第二：提高响应速度。当任务到达时，任务可以不需要等到线程创建就能立即执行。<br>第三：可以根据系统的承受能力，调整线程池中工作线线程的数目，防止因为因为消耗过多的内存，而把服务器累趴下(每个线程需要大约1MB内存，线程开的越多，消耗的内存也就越大，最后死机)。</p>
<h4 id="Java实现线程同步的方式"><a href="#Java实现线程同步的方式" class="headerlink" title="Java实现线程同步的方式"></a>Java实现线程同步的方式</h4><p>1.同步方法<br>即有synchronized关键字修饰的方法。 由于java的每个对象都有一个内置锁，当用此关键字修饰方法时， 内置锁会保护整个方法。在调用该方法前，需要获得内置锁，否则就处于阻塞状态。<br>注： synchronized关键字也可以修饰静态方法，此时如果调用该静态方法，将会锁住整个类。</p>
<ol start="2">
<li><p>同步代码块<br>即有synchronized关键字修饰的语句块。 被该关键字修饰的语句块会自动被加上内置锁，从而实现同步<br> 代码如：<br>synchronized(object){<br>}</p>
</li>
<li><p>wait与notify<br>wait():使一个线程处于等待状态，并且释放所持有的对象的lock。<br>sleep():使一个正在运行的线程处于睡眠状态，是一个静态方法，调用此方法要捕捉InterruptedException异常。<br>notify():唤醒一个处于等待状态的线程，注意的是在调用此方法的时候，并不能确切的唤醒某一个等待状态的线程，而是由JVM确定唤醒哪个线程，而且不是按优先级。<br>Allnotity():唤醒所有处入等待状态的线程，注意并不是给所有唤醒线程一个对象的锁，而是让它们竞争。</p>
</li>
<li><p>使用特殊域变量(volatile)实现线程同步</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//只给出要修改的代码，其余代码与上同</span></span><br><span class="line">        <span class="class"><span class="keyword">class</span> <span class="title">Bank</span> </span>&#123;</span><br><span class="line">            <span class="comment">//需要同步的变量加上volatile</span></span><br><span class="line">            <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">int</span> account = <span class="number">100</span>;</span><br><span class="line"> </span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAccount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> account;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//这里不再需要synchronized </span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">(<span class="keyword">int</span> money)</span> </span>&#123;</span><br><span class="line">                account += money;</span><br><span class="line">            &#125;</span><br><span class="line">        ｝</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用重入锁实现线程同步</p>
</li>
<li><p>使用阻塞队列实现线程同步<br>前面几种同步方式都是在底层实现的线程同步，但是我们在实际开发当中，应当尽量远离底层结构。 使用javaSE5.0版本中新增的java.util.concurrent包将有助于简化开发。 本小节主要是使用LinkedBlockingQueue<e>来实现线程的同步 LinkedBlockingQueue<e>是一个基于已连接节点的，范围任意的blocking queue。 队列是先进先出的顺序（FIFO），关于队列以后会详细讲解~LinkedBlockingQueue 类常用方法 LinkedBlockingQueue() : 创建一个容量为Integer.MAX_VALUE的LinkedBlockingQueue put(E e) : 在队尾添加一个元素，如果队列满则阻塞 size() : 返回队列中的元素个数 take() : 移除并返回队头元素，如果队列空则阻塞代码实例： 实现商家生产商品和买卖商品的同步</e></e></p>
</li>
</ol>
<p>注：BlockingQueue<e>定义了阻塞队列的常用方法，尤其是三种添加元素的方法，我们要多加注意，当队列满时：<br>　　add()方法会抛出异常<br>　　offer()方法返回false<br>　　put()方法会阻塞</e></p>
<h4 id="修饰符范围由大到小排序"><a href="#修饰符范围由大到小排序" class="headerlink" title="修饰符范围由大到小排序"></a>修饰符范围由大到小排序</h4><p>（1）public：可以被所有其他类所访问。</p>
<p>（2）private：只能被自己访问和修改。</p>
<p>（3）protected：自身，子类及同一个包中类可以访问。</p>
<p>（4）default（默认）：同一包中的类可以访问，声明时没有加修饰符，认为是friendly。</p>
<p>| 修饰符 | 类内部 | 本包 | 子类    | 外部包 |<br>| public | √ | √ | √ | √ |<br>| protected | √ | √ | √ | × |<br>| default | √ |    √ | × | × |<br>| private |    √ |    × |    × | × |</p>
<h4 id="ArrayList和LinkedList的在存储方式上区别"><a href="#ArrayList和LinkedList的在存储方式上区别" class="headerlink" title="ArrayList和LinkedList的在存储方式上区别"></a>ArrayList和LinkedList的在存储方式上区别</h4><p>ArrayList和Vector都是使用数组方式存储数据<br>LinkedList使用双向链表实现存储</p>
<h4 id="查看linux服务器的内存使用情况的命令"><a href="#查看linux服务器的内存使用情况的命令" class="headerlink" title="查看linux服务器的内存使用情况的命令"></a>查看linux服务器的内存使用情况的命令</h4><p>top命令可以实时动态地查看系统的整体运行情况，是一个综合了多方信息监测系统性能和运行信息的实用工具。通过top命令所提供的互动式界面，用热键可以管理。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@VM_0_11_redhat ~]# top</span><br><span class="line">top - 18:23:21 up 83 days, 17:49,  2 users,  load average: 0.00, 0.01, 0.05</span><br><span class="line">Tasks:  75 total,   1 running,  74 sleeping,   0 stopped,   0 zombie</span><br><span class="line">%Cpu(s):  0.7 us,  1.0 sy,  0.0 ni, 98.3 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st</span><br><span class="line">KiB Mem :  1016516 total,    67664 free,   565684 used,   383168 buff/cache</span><br><span class="line">KiB Swap:        0 total,        0 free,        0 used.   278832 avail Mem </span><br><span class="line"></span><br><span class="line">  PID USER      PR  NI    VIRT    RES    SHR S %CPU %MEM     TIME+ COMMAND                                                                                           </span><br><span class="line">28924 root      20   0  740980  11396   1096 S  0.3  1.1 175:36.09 barad_agent                                                                                       </span><br><span class="line">    1 root      20   0   43188   2352   1204 S  0.0  0.2   6:09.23 systemd</span><br></pre></td></tr></table></figure></p>
<p>查看RAM使用情况最简单的方法是通过/proc/meminfo<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@VM_0_11_redhat ~]# cat /proc/meminfo</span><br><span class="line">MemTotal:        1016516 kB</span><br><span class="line">MemFree:           76552 kB</span><br><span class="line">MemAvailable:     460296 kB</span><br><span class="line">Buffers:           99964 kB</span><br><span class="line">Cached:           368936 kB</span><br><span class="line">SwapCached:            0 kB</span><br><span class="line">Active:           585040 kB</span><br><span class="line">Inactive:         232760 kB</span><br><span class="line">Active(anon):     349044 kB</span><br><span class="line">Inactive(anon):      144 kB</span><br><span class="line">Active(file):     235996 kB</span><br></pre></td></tr></table></figure></p>
<h4 id="添加优化查询速度索引的sql语句"><a href="#添加优化查询速度索引的sql语句" class="headerlink" title="添加优化查询速度索引的sql语句"></a>添加优化查询速度索引的sql语句</h4><p>需要添加普通类型的索引<br>普通索引（由关键字KEY或INDEX定义的索引）的唯一任务是加快对数据的访问速度。因此，应该只为那些最经常出现在查询条件（WHEREcolumn=）或排序条件（ORDERBYcolumn）中的数据列创建索引。只要有可能，就应该选择一个数据最整齐、最紧凑的数据列（如一个整数类型的数据列）来创建索引。<br>添加普通索引Sql：<br>INDEX(普通索引)<br>        mysql&gt;ALTER  TABLE  <code>table_name</code>  ADD  INDEX index_name (  <code>column</code>  )</p>
<h4 id="List-set-map都同时继承了Conllection接口吗"><a href="#List-set-map都同时继承了Conllection接口吗" class="headerlink" title="List,set,map都同时继承了Conllection接口吗"></a>List,set,map都同时继承了Conllection接口吗</h4><p>不是<br>java.util.Collection [I]<br>+–java.util.List [I]<br>   +–java.util.ArrayList [C]<br>   +–java.util.LinkedList [C]<br>   +–java.util.Vector [C]<br>      +–java.util.Stack [C]<br>+–java.util.Set [I]<br>   +–java.util.HashSet [C]<br>   +–java.util.SortedSet [I]<br>      +–java.util.TreeSet [C]</p>
<p>java.util.Map [I]<br>+–java.util.SortedMap [I]<br>   +–java.util.TreeMap [C]<br>+–java.util.Hashtable [C]<br>+–java.util.HashMap [C]<br>+–java.util.LinkedHashMap [C]<br>+–java.util.WeakHashMap [C]<br>参考：<a href="http://android.blog.51cto.com/268543/400557" target="_blank" rel="noopener">http://android.blog.51cto.com/268543/400557</a></p>
<h4 id="String-a-new-String-“abc”-创建了几个字符串对象"><a href="#String-a-new-String-“abc”-创建了几个字符串对象" class="headerlink" title="String a = new String(“abc”);创建了几个字符串对象"></a>String a = new String(“abc”);创建了几个字符串对象</h4><p>2个</p>
<h4 id="一个类的构造方法可以被其他对象调用吗"><a href="#一个类的构造方法可以被其他对象调用吗" class="headerlink" title="一个类的构造方法可以被其他对象调用吗"></a>一个类的构造方法可以被其他对象调用吗</h4><p>可以，但是不能像调用普通方法一样调用<br>在子类中的缺省构造器可以调用父类的缺省/非缺省构造器，在调用父类的缺省构造器时，<br>不用写super关键字直接可以调（因为super是隐式的）；在调用父类的非缺省构造器时，<br>必须用super（参数）显示调用。如下面的案例所示：<br>同一类中，在构造方法中可以调用本类的其他构造</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Zi</span> <span class="keyword">extends</span> <span class="title">Fu</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String name = <span class="string">"123"</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Zi</span><span class="params">()</span> </span>&#123; <span class="comment">// 子类无惨构造不能直接调用父类有参构造,需要将name参数提前加载，static先加载再加载构造</span></span><br><span class="line">        <span class="keyword">super</span>(name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> Zi();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 1). 父类static（顺序按照代码书写顺序进行）</span></span><br><span class="line"><span class="comment">     2). 子类static（顺序按照代码书写顺序进行）</span></span><br><span class="line"><span class="comment">     3). 父类非static域、构造器（顺序按照代码书写顺序进行）</span></span><br><span class="line"><span class="comment">     4). 子类非static域、构造器（顺序按照代码书写顺序进行）</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h3><p>闭包是javascript一个非常重要的特性，意味着当前作用域总能够访问外部作用域的变量，因为函数是javascript唯一拥有自身作用域的结构，因此闭包的创建依赖于函数。</p>
<h4 id="什么是闭包"><a href="#什么是闭包" class="headerlink" title="什么是闭包"></a>什么是闭包</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>$rc.contextPath Hello World2!<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> foo = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> name = <span class="string">"1123"</span>;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">            get_name: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">return</span> name;</span></span><br><span class="line"><span class="undefined">            &#125;,</span></span><br><span class="line"><span class="javascript">            set_name: <span class="function"><span class="keyword">function</span> (<span class="params">new_name</span>) </span>&#123;</span></span><br><span class="line"><span class="undefined">                name = new_name;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    &#125;)();</span></span><br><span class="line"><span class="undefined">    alert(foo.get_name());</span></span><br><span class="line"><span class="undefined">    /**</span></span><br><span class="line"><span class="undefined"> * 1. 外部不能直接访问foo函数中的属性name，但是可以通过foo函数中的get_name函数访问到foo中的属性值name</span></span><br><span class="line"><span class="undefined"> * 2. 并且通过foo中的get_name直接返回foo中属性name，让外部获取到foo中的属性值。</span></span><br><span class="line"><span class="undefined"> * 3. 那么get_name这个函数就是将函数内部和函数外部连接起来的桥梁，这种特性称之为闭包</span></span><br><span class="line"><span class="undefined"> *</span></span><br><span class="line"><span class="undefined"> * 上述也是闭包的一个重要特性那就是读取函数内部变量</span></span><br><span class="line"><span class="undefined"> */</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>含义:<br>近似正确的短答案：闭包就是一个函数把外部的那些不属于自己的对象也包含（闭合）进来了。<br>短答案：JavaScript中的闭包，无非就是变量解析的过程。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>$rc.contextPath Hello World2!<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> hello = <span class="string">"hello,world"</span>;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="function"><span class="keyword">function</span> <span class="title">welcome</span>(<span class="params">hi</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            alert(hi);        <span class="comment">//解析到作用域链的第一个对象的属性</span></span></span><br><span class="line"><span class="javascript">            alert(hello);    <span class="comment">//解析到作用域链的第二个对象的属性</span></span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">        welcome(<span class="string">"It's easy"</span>);</span></span><br><span class="line"><span class="undefined">    &#125;)();</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>运行结果很简单，一个弹窗It’s easy.一个弹窗hello,world。<br>分析过程如下：<br>对于函数welcome()，定义welcome的时候会产生一个作用域链对象，为了表示方便，记作scopechain。scopechain是个有顺序的集合对象。<br>•    scopechain的第一个对象：为了方便表示记作sc1， sc1有若干属性，引用本函数的参数和局部变量，如sc1.hi ；<br>•    scopechain的第二个对象：为了方便表示记作sc2，sc2有若干属性，引用外层函数的参数和局部变量，如sc2.hello；<br>•    …<br>•    scopechain的最后一个对象：为了方便表示记作scn，scn引用的全局的执行环境对象，也就是window对象！，如scn.eval()；</p>
<p>这里之所以可以弹出hello,world，原因就是变量解析时在welcome函数作用域链的第一个对象上找不到hello属性，然后就去第二个对象上找去了（结果还真找到了）。<br>所以，JavaScript中的所谓的高大上的闭包其实很简单，根本上还是变量解析。而之所以可以实现，还是因为变量解析会在作用域链中依次寻找对应属性的导致的。</p>
<h4 id="闭包的作用"><a href="#闭包的作用" class="headerlink" title="闭包的作用"></a>闭包的作用</h4><h5 id="读取函数内部变量"><a href="#读取函数内部变量" class="headerlink" title="读取函数内部变量"></a>读取函数内部变量</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> foo = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> name = <span class="string">"1123"</span>;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        get_name: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> name;</span><br><span class="line">        &#125;,</span><br><span class="line">        set_name: <span class="function"><span class="keyword">function</span> (<span class="params">new_name</span>) </span>&#123;</span><br><span class="line">            name = new_name;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)();</span><br><span class="line">alert(foo.get_name());</span><br></pre></td></tr></table></figure>
<h5 id="让变量始终保持在内存中"><a href="#让变量始终保持在内存中" class="headerlink" title="让变量始终保持在内存中"></a>让变量始终保持在内存中</h5><p>普通函数<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> foo = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> num = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">return</span> ++num;</span><br><span class="line">&#125;</span><br><span class="line">alert(foo()); <span class="comment">// 每次alert都是3</span></span><br></pre></td></tr></table></figure></p>
<p>闭包函数<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> foo = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> num = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        addNum: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            num += <span class="number">1</span>;</span><br><span class="line">        &#125;,</span><br><span class="line">        getNum: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> num;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)();</span><br><span class="line">alert(foo.getNum()); <span class="comment">// 2</span></span><br><span class="line">foo.addNum();</span><br><span class="line">alert(foo.getNum()); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure></p>
<h4 id="使用闭包注意"><a href="#使用闭包注意" class="headerlink" title="使用闭包注意"></a>使用闭包注意</h4><p>（1）由于闭包会使得函数中的变量都被保存在内存中，内存消耗很大，所以不能滥用闭包，否则会造成网页的性能问题，在IE中可能导致内存泄露。解决方法是，在退出函数之前，将不使用的局部变量全部删除。<br>（2）闭包会在父函数外部，改变父函数内部变量的值。所以，如果你把父函数当作对象（object）使用，把闭包当作它的公用方法（Public Method），把内部变量当作它的私有属性（private value），这时一定要小心，不要随便改变父函数内部变量的值。</p>
<h3 id="redis和memecache的不同"><a href="#redis和memecache的不同" class="headerlink" title="redis和memecache的不同"></a>redis和memecache的不同</h3><p>1、存储方式：<br>memecache 把数据全部存在内存之中，断电后会挂掉，数据不能超过内存大小<br>redis有部份存在硬盘上，这样能保证数据的持久性，支持数据的持久化（笔者注：有快照和AOF日志两种持久化方式，在实际应用的时候，要特别注意配置文件快照参数，要不就很有可能服务器频繁满载做dump）。<br>2、数据支持类型：<br>redis在数据支持上要比memecache多的多。<br>3、使用底层模型不同：<br>新版本的redis直接自己构建了VM 机制 ，因为一般的系统调用系统函数的话，会浪费一定的时间去移动和请求。<br>4、运行环境不同：<br>redis目前官方只支持LINUX 上去行，从而省去了对于其它系统的支持，这样的话可以更好的把精力用于本系统 环境上的优化，虽然后来微软有一个小组为其写了补丁。但是没有放到主干上<br>个人总结一下，有持久化需求或者对数据结构和处理有高级要求的应用，选择redis，其他简单的key/value存储，选择memcache</p>
<p>Redis支持数据类型：</p>
<h3 id="Mysql索引的种类和创建"><a href="#Mysql索引的种类和创建" class="headerlink" title="Mysql索引的种类和创建"></a>Mysql索引的种类和创建</h3><p>1.添加PRIMARY KEY（主键索引）<br>mysql&gt;ALTER TABLE <code>table_name</code> ADD PRIMARY KEY ( <code>column</code> )<br>2.添加UNIQUE(唯一索引)<br>mysql&gt;ALTER TABLE <code>table_name</code> ADD UNIQUE (<br><code>column</code><br>)<br>3.添加INDEX(普通索引)<br>mysql&gt;ALTER TABLE <code>table_name</code> ADD INDEX index_name ( <code>column</code> )<br>4.添加FULLTEXT(全文索引)<br>mysql&gt;ALTER TABLE <code>table_name</code> ADD FULLTEXT ( <code>column</code>)<br>5.添加多列索引<br>mysql&gt;ALTER TABLE <code>table_name</code> ADD INDEX index_name ( <code>column1</code>, <code>column2</code>, <code>column3</code> )</p>
<h3 id="Mysql各种存储引擎"><a href="#Mysql各种存储引擎" class="headerlink" title="Mysql各种存储引擎"></a>Mysql各种存储引擎</h3><p>数据库中的存储引擎其实是对使用了该引擎的表进行某种设置，数据库中的表设定了什么存储引擎，那么该表在数据存储方式、数据更新方式、数据查询性能以及是否支持索引等方面就会有不同的“效果”。在MySQL数据库中存在着多种引擎（不同版本的MySQL数据库支持的引擎不同），熟悉各种引擎才能在软件开发中应用引擎，从而开发出高性能的软件，MySQL数据库中的引擎有哪些呢？一般来说，MySQL有以下几种引擎：ISAM、MyISAM、HEAP（也称为MEMORY）、CSV、BLACKHOLE、ARCHIVE、PERFORMANCE_SCHEMA、InnoDB、 Berkeley、Merge、Federated和Cluster/NDB等，除此以外我们也可以参照MySQL++ API创建自己的数据库引擎。下面逐次介绍一下各种引擎：<br>        ISAM<br>        该引擎在读取数据方面速度很快，而且不占用大量的内存和存储资源；但是ISAM不支持事务处理、不支持外来键、不能够容错、也不支持索引。该引擎在包括MySQL 5.1及其以上版本的数据库中不再支持。<br>        MyISAM<br>        该引擎基于ISAM数据库引擎，除了提供ISAM里所没有的索引和字段管理等大量功能，MyISAM还使用一种表格锁定的机制来优化多个并发的读写操作，但是需要经常运行OPTIMIZE TABLE命令，来恢复被更新机制所浪费的空间，否则碎片也会随之增加，最终影响数据访问性能。MyISAM还有一些有用的扩展，例如用来修复数据库文件的MyISAMChk工具和用来恢复浪费空间的 MyISAMPack工具。MyISAM强调了快速读取操作，主要用于高负载的select，这可能也是MySQL深受Web开发的主要原因：在Web开发中进行的大量数据操作都是读取操作，所以大多数虚拟主机提供商和Internet平台提供商（Internet Presence Provider，IPP）只允许使用MyISAM格式。<br>MyISAM类型的表支持三种不同的存储结构：静态型、动态型、压缩型。<br>        静态型：指定义的表列的大小是固定（即不含有：xblob、xtext、varchar等长度可变的数据类型），这样MySQL就会自动使用静态MyISAM格式。使用静态格式的表的性能比较高，因为在维护和访问以预定格式存储数据时需要的开销很低；但这种高性能是以空间为代价换来的，因为在定义的时候是固定的，所以不管列中的值有多大，都会以最大值为准，占据了整个空间。<br>        动态型：如果列（即使只有一列）定义为动态的（xblob, xtext, varchar等数据类型），这时MyISAM就自动使用动态型，虽然动态型的表占用了比静态型表较少的空间，但带来了性能的降低，因为如果某个字段的内容发生改变则其位置很可能需要移动，这样就会导致碎片的产生，随着数据变化的增多，碎片也随之增加，数据访问性能会随之降低。<br>        对于因碎片增加而降低数据访问性这个问题，有两种解决办法：<br>        a、尽可能使用静态数据类型；<br>        b、经常使用optimize table table_name语句整理表的碎片，恢复由于表数据的更新和删除导致的空间丢失。如果存储引擎不支持 optimize table table_name则可以转储并        重新加载数据，这样也可以减少碎片；<br>        压缩型：如果在数据库中创建在整个生命周期内只读的表，则应该使用MyISAM的压缩型表来减少空间的占用。<br>        HEAP（也称为MEMORY）<br>        该存储引擎通过在内存中创建临时表来存储数据。每个基于该存储引擎的表实际对应一个磁盘文件，该文件的文件名和表名是相同的，类型为.frm。该磁盘文件只存储表的结构，而其数据存储在内存中，所以使用该种引擎的表拥有极高的插入、更新和查询效率。这种存储引擎默认使用哈希（HASH）索引，其速度比使用B-+Tree型要快，但也可以使用B树型索引。由于这种存储引擎所存储的数据保存在内存中，所以其保存的数据具有不稳定性，比如如果mysqld进程发生异常、重启或计算机关机等等都会造成这些数据的消失，所以这种存储引擎中的表的生命周期很短，一般只使用一次。<br>        CSV（Comma-Separated Values逗号分隔值）<br>        使用该引擎的MySQL数据库表会在MySQL安装目录data文件夹中的和该表所在数据库名相同的目录中生成一个.CSV文件（所以，它可以将CSV类型的文件当做表进行处理），这种文件是一种普通文本文件，每个数据行占用一个文本行。该种类型的存储引擎不支持索引，即使用该种类型的表没有主键列；另外也不允许表中的字段为null。<br>        BLACKHOLE（黑洞引擎）<br>        该存储引擎支持事务，而且支持mvcc的行级锁，写入这种引擎表中的任何数据都会消失，主要用于做日志记录或同步归档的中继存储，这个存储引擎除非有特别目的，否则不适合使用。详见博客《BlackHole 存储引擎》<br>        ARCHIVE<br>        该存储引擎非常适合存储大量独立的、作为历史记录的数据。区别于InnoDB和MyISAM这两种引擎，ARCHIVE提供了压缩功能，拥有高效的插入速度，但是这种引擎不支持索引，所以查询性能较差一些。<br>        PERFORMANCE_SCHEMA<br>        该引擎主要用于收集数据库服务器性能参数。这种引擎提供以下功能：提供进程等待的详细信息，包括锁、互斥变量、文件信息；保存历史的事件汇总信息，为提供MySQL服务器性能做出详细的判断；对于新增和删除监控事件点都非常容易，并可以随意改变mysql服务器的监控周期，例如（CYCLE、MICROSECOND）。<br>        InnoDB<br>        该存储引擎为MySQL表提供了ACID事务支持、系统崩溃修复能力和多版本并发控制（即MVCC Multi-Version Concurrency Control）的行级锁;该引擎支持自增长列（auto_increment）,自增长列的值不能为空，如果在使用的时候为空则自动从现有值开始增值，如果有但是比现在的还大，则直接保存这个值; 该引擎存储引擎支持外键（foreign key） ,外键所在的表称为子表而所依赖的表称为父表。该引擎在5.5后的MySQL数据库中为默认存储引擎。<br>        Berkeley（BDB）<br>        该存储引擎支持COMMIT和ROLLBACK等其他事务特性。该引擎在包括MySQL 5.1及其以上版本的数据库中不再支持。<br>        Merge<br>        该引擎将一定数量的MyISAM表联合而成一个整体。参见博客《MySQL Merge存储引擎》<br>        Federated<br>        该存储引擎可以不同的Mysql服务器联合起来，逻辑上组成一个完整的数据库。这种存储引擎非常适合数据库分布式应用。<br>        Cluster/NDB<br>        该存储引擎用于多台数据机器联合提供服务以提高整体性能和安全性。适合数据量大、安全和性能要求高的场景。</p>
<h3 id="String-StringBuffer-StringBuild的区别"><a href="#String-StringBuffer-StringBuild的区别" class="headerlink" title="String,StringBuffer,StringBuild的区别"></a>String,StringBuffer,StringBuild的区别</h3><p>String字符串常量<br>StringBuffer字符串变量(线程安全)<br>StringBuild字符串变量(非线程安全)</p>
<ol>
<li>首先说运行速度，或者说是执行速度，在这方面运行速度快慢为：StringBuilder &gt; StringBuffer &gt; String</li>
<li>再来说线程安全<br>　　在线程安全上，StringBuilder是线程不安全的，而StringBuffer是线程安全的<br>如果一个StringBuffer对象在字符串缓冲区被多个线程使用时，StringBuffer中很多方法可以带有synchronized关键字，所以可以保证线程是安全的，但StringBuilder的方法则没有该关键字，所以不能保证线程安全，有可能会出现一些错误的操作。所以如果要进行的操作是多线程的，那么就要使用StringBuffer，但是在单线程的情况下，还是建议使用速度比较快的StringBuilder。</li>
</ol>
<p>总结：<br>String：适用于少量的字符串操作的情况<br>　　StringBuilder：适用于单线程下在字符缓冲区进行大量操作的情况<br>　　StringBuffer：适用多线程下在字符缓冲区进行大量操作的情况</p>
<h3 id="开发中建造者模式有哪些"><a href="#开发中建造者模式有哪些" class="headerlink" title="开发中建造者模式有哪些"></a>开发中建造者模式有哪些</h3><p>建造者模式：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Sender</span> </span>&#123;  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Send</span><span class="params">()</span></span>;  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Builder</span> </span>&#123;  </span><br><span class="line">      </span><br><span class="line">    <span class="keyword">private</span> List&lt;Sender&gt; list = <span class="keyword">new</span> ArrayList&lt;Sender&gt;();  </span><br><span class="line">      </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">produceMailSender</span><span class="params">(<span class="keyword">int</span> count)</span></span>&#123;  </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;count; i++)&#123;  </span><br><span class="line">            list.add(<span class="keyword">new</span> MailSender());  </span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;  </span><br><span class="line">      </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">produceSmsSender</span><span class="params">(<span class="keyword">int</span> count)</span></span>&#123;  </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;count; i++)&#123;  </span><br><span class="line">            list.add(<span class="keyword">new</span> SmsSender());  </span><br><span class="line">        &#125;  </span><br><span class="line">	&#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>测试类<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;  </span><br><span class="line">        Builder builder = <span class="keyword">new</span> Builder();  </span><br><span class="line">        builder.produceMailSender(<span class="number">10</span>);  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>StringBuild就是建造者模式</p>
<h3 id="Mybatis中-和-的区别"><a href="#Mybatis中-和-的区别" class="headerlink" title="Mybatis中#和$的区别"></a>Mybatis中#和$的区别</h3><ol>
<li>＃{}将传入的数据都当成一个字符串，会对自动传入的数据加一个双引号。如：order by #{id}，如果传入的值是111,那么解析成sql时的值为order by “111”, 如果传入的值是id，则解析成的sql为order by “id”。</li>
<li>${}将传入的数据直接显示生成在sql中。如：order by<br>${id}，如果传入的值是111,那么解析成sql时的值为order by 111, 如果传入的值是id，则解析成的sql为order<br>by id。</li>
<li>#方式能够很大程度防止sql注入。</li>
<li>$方式无法防止Sql注入。</li>
<li>$方式一般用于传入数据库对象，例如传入表名.</li>
</ol>
<h3 id="HashMap底层实现原理"><a href="#HashMap底层实现原理" class="headerlink" title="HashMap底层实现原理"></a>HashMap底层实现原理</h3><p>HashMap实际上是一个“链表散列”的数据结构，即数组和链表的结合体。</p>
<p><img src="https://volcfamily.cn/images/interview-question/b2.png" alt="b2"><br>由上图可以看出</p>
<p>HashMap是基于hashing的原理，我们使用put(key, value)存储对象到HashMap中，使用get(key)从HashMap中获取对象。当我们给put()方法传递键和值时，我们先对键调用hashCode()方法，返回的hashCode用于找到bucket位置来储存Entry对象。</p>
<p>简单地说，HashMap 在底层将 key-value 当成一个整体进行处理，这个整体就是一个 Entry 对象。HashMap 底层采用一个 Entry[] 数组来保存所有的 key-value 对，当需要存储一个 Entry 对象时，会根据hash算法来决定其在数组中的存储位置，在根据equals方法决定其在该数组位置上的链表中的存储位置；当需要取出一个Entry时，<br>也会根据hash算法找到其在数组中的存储位置，再根据equals方法从该位置上的链表中取出该Entry。</p>
<h3 id="解决不同手机录制视频时编码不同导致web端无法播放的问题"><a href="#解决不同手机录制视频时编码不同导致web端无法播放的问题" class="headerlink" title="解决不同手机录制视频时编码不同导致web端无法播放的问题"></a>解决不同手机录制视频时编码不同导致web端无法播放的问题</h3><p>使用ffmpeg工具将上传的视频都以h264来重新编码</p>
<h3 id="List-set-map区别"><a href="#List-set-map区别" class="headerlink" title="List,set,map区别"></a>List,set,map区别</h3><p>java.util.Collection [I]<br>+–java.util.List [I]<br>   +–java.util.ArrayList [C]<br>   +–java.util.LinkedList [C]<br>   +–java.util.Vector [C]<br>      +–java.util.Stack [C]<br>+–java.util.Set [I]<br>   +–java.util.HashSet [C]<br>   +–java.util.SortedSet [I]<br>      +–java.util.TreeSet [C]</p>
<p>java.util.Map [I]<br>+–java.util.SortedMap [I]<br>   +–java.util.TreeMap [C]<br>+–java.util.Hashtable [C]<br>+–java.util.HashMap [C]<br>+–java.util.LinkedHashMap [C]<br>+–java.util.WeakHashMap [C]</p>
<h3 id="JVM调优"><a href="#JVM调优" class="headerlink" title="JVM调优"></a>JVM调优</h3><p><a href="https://blog.csdn.net/ldx891113/article/details/51735171" target="_blank" rel="noopener">https://blog.csdn.net/ldx891113/article/details/51735171</a></p>
<h3 id="websocket-socket和http"><a href="#websocket-socket和http" class="headerlink" title="websocket,socket和http"></a>websocket,socket和http</h3><p>1.http协议是用在应用层的协议，他是基于tcp协议的，http协议建立链接也必须要有三次握手才能发送信息。<br>　　http链接分为短链接，长链接，短链接是每次请求都要三次握手才能发送自己的信息。即每一个request对应一个response。长链接是在一定的期限内保持链接。保持TCP连接不断开。客户端与服务器通信，必须要有客户端发起然后服务器返回结果。客户端是主动的，服务器是被动的。</p>
<p>2.WebSocket同HTTP一样也是应用层的协议，但是它是一种双向通信协议，是建立在TCP之上的。</p>
<p>连接过程握手过程</p>
<ol>
<li>浏览器、服务器建立TCP连接，三次握手。这是通信的基础，传输控制层，若失败后续都不执行。</li>
<li>TCP连接成功后，浏览器通过HTTP协议向服务器传送WebSocket支持的版本号等信息。（开始前的HTTP握手）</li>
<li>服务器收到客户端的握手请求后，同样采用HTTP协议回馈数据。</li>
<li><p>当收到了连接成功的消息后，通过TCP通道进行传输通信。</p>
</li>
<li><p>Socket其实并不是一个协议，而是为了方便使用TCP或UDP而抽象出来的一层，是位于应用层和传输控制层之间的一组接口。</p>
</li>
</ol>
<p>http和websocket区别<br>WebSocket在建立握手连接时，数据是通过http协议传输的，但在建立连接之后，真正的数据传输阶段是不需要http协议参与的。<br>websocket传输的数据是二进制流，是以帧为单位的，http传输的是明文传输，是字符串传输，WebSocket的数据帧有序。<br>websocket的请求的头部和http请求头部不同，见上文</p>
<h3 id="处理创建订单号并发"><a href="#处理创建订单号并发" class="headerlink" title="处理创建订单号并发"></a>处理创建订单号并发</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.UUID;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 高并发生成订单号</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GenerateOrderId</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getOrderIdByUUId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> machineId = <span class="number">1</span>;<span class="comment">//最大支持1-9个集群机器部署</span></span><br><span class="line">        <span class="keyword">int</span> hashCodeV = UUID.randomUUID().toString().hashCode();</span><br><span class="line">        <span class="keyword">if</span> (hashCodeV &lt; <span class="number">0</span>) &#123;<span class="comment">//有可能是负数</span></span><br><span class="line">            hashCodeV = -hashCodeV;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 0 代表前面补充0</span></span><br><span class="line">        <span class="comment">// 15 hashCodeV 不足15位时在前面补上0</span></span><br><span class="line">        <span class="comment">// d 代表参数为正数型</span></span><br><span class="line">        System.out.println(hashCodeV);</span><br><span class="line">        <span class="keyword">return</span> machineId + String.format(<span class="string">"%015d"</span>, hashCodeV);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(getOrderIdByUUId());</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">// hashCodeV = 2042282884</span></span><br><span class="line">	<span class="comment">// orderId = 1000002042282884</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="session是什么时候创建的"><a href="#session是什么时候创建的" class="headerlink" title="session是什么时候创建的"></a>session是什么时候创建的</h3><p>请求一个servlet时不创建session，请求jsp时session对象会创建</p>
<p>Jsp本质就是servlet<br>Jsp源码如下：</p>
<p><img src="https://volcfamily.cn/images/interview-question/b3.png" alt="b3"><br>只有在servlet中调用request.getSession();或者request.getSession(true);服务器才会产生session。</p>
<h3 id="存储过程优点"><a href="#存储过程优点" class="headerlink" title="存储过程优点"></a>存储过程优点</h3><p>存储过程的优点：<br>1.存储过程只在创造时进行编译，以后每次执行存储过程都不需再重新编译，而一般SQL语句每执行一次就编译一次,所以使用存储过程可提高数据库执行速度。<br>2.当对数据库进行复杂操作时(如对多个表进行Update,Insert,Query,Delete时），可将此复杂操作用存储过程封装起来与数据库提供的事务处理结合一起使用。<br>3.存储过程可以重复使用,可减少数据库开发人员的工作量 。<br>4.安全性高,可设定只有某此用户才具有对指定存储过程的使用权。<br>函数，存储过程，触发器的区别</p>
<h3 id="函数和存储过程"><a href="#函数和存储过程" class="headerlink" title="函数和存储过程"></a>函数和存储过程</h3><p>函数只返回一个变量，存储过程可以返回多个值</p>
<p>存储过程和触发器<br>触发器主要是通过事件执行触发而被执行的，而存储过程可以通过存储过程名称名字而直接调用。</p>
<h3 id="视图的作用"><a href="#视图的作用" class="headerlink" title="视图的作用"></a>视图的作用</h3><ol>
<li>简单性 可以过滤掉大量不需要的数据，产生一张虚拟表，方便对数据操作</li>
<li>安全性 通过视图用户只能查看和修改所能看到的数据</li>
<li>逻辑数据独立性 代码可以直接操作视图</li>
<li>视图并不能提高查询速度</li>
</ol>
<h3 id="Jquery动态添加一行方法"><a href="#Jquery动态添加一行方法" class="headerlink" title="Jquery动态添加一行方法"></a>Jquery动态添加一行方法</h3><p>var trHTML = “<tr><td>…</td></tr>“<br>$(“#tab”).append(trHTML);//在table最后面添加一行<br>$(“#tab tr:eq(2)”).after(trHTML); // 在table的第3行后面添加一行<br>$(“#tab tr:not(:first)”).empty(); //清空table（除了第一行以外）</p>
<h3 id="Js赋值顺序"><a href="#Js赋值顺序" class="headerlink" title="Js赋值顺序"></a>Js赋值顺序</h3><p>var a = 0<br>var c = 3;<br>b[a] =  a  = c</p>
<p>结果：<br>b[3] = 3;</p>
<h3 id="log4j日志级别"><a href="#log4j日志级别" class="headerlink" title="log4j日志级别"></a>log4j日志级别</h3><p>log4j定义了8个级别的log（除去OFF和ALL，可以说分为6个级别），优先级从高到低依次为：OFF、FATAL、ERROR、WARN、INFO、DEBUG、TRACE、 ALL。</p>
<p>ALL 最低等级的，用于打开所有日志记录。</p>
<p>TRACE designates finer-grained informational events than the DEBUG.Since:1.2.12，很低的日志级别，一般不会使用。</p>
<p>DEBUG 指出细粒度信息事件对调试应用程序是非常有帮助的，主要用于开发过程中打印一些运行信息。</p>
<p>INFO 消息在粗粒度级别上突出强调应用程序的运行过程。打印一些你感兴趣的或者重要的信息，这个可以用于生产环境中输出程序运行的一些重要信息，但是不能滥用，避免打印过多的日志。</p>
<p>WARN 表明会出现潜在错误的情形，有些信息不是错误信息，但是也要给程序员的一些提示。</p>
<p>ERROR 指出虽然发生错误事件，但仍然不影响系统的继续运行。打印错误和异常信息，如果不想输出太多的日志，可以使用这个级别。</p>
<p>FATAL 指出每个严重的错误事件将会导致应用程序的退出。这个级别比较高了。重大错误，这种级别你可以直接停止程序了。</p>
<p>OFF 最高等级的，用于关闭所有日志记录。</p>
<p>如果将log level设置在某一个级别上，那么比此级别优先级高的log都能打印出来。例如，如果设置优先级为WARN，那么OFF、FATAL、ERROR、WARN 4个级别的log能正常输出，而INFO、DEBUG、TRACE、 ALL级别的log则会被忽略。Log4j建议只使用四个级别，优先级从高到低分别是ERROR、WARN、INFO、DEBUG。</p>
<p>从我们实验的结果可以看出，log4j默认的优先级为ERROR或者WARN（实际上是ERROR）</p>
<h3 id="五个运行时异常"><a href="#五个运行时异常" class="headerlink" title="五个运行时异常"></a>五个运行时异常</h3><p>AnnotationTypeMismatchException,<br>ArithmeticException,<br>ArrayStoreException,<br>BufferOverflowException,<br>BufferUnderflowException,<br>CannotRedoException,<br>CannotUndoException,<br><strong>ClassCastException</strong>,<br>CMMException,<br>ConcurrentModificationException,<br>DOMException,<br>EmptyStackException,<br>EnumConstantNotPresentException,<br><strong>EventException</strong>,<br>IllegalArgumentException,<br>IllegalMonitorStateException,<br>IllegalPathStateException,<br>IllegalStateException,<br>ImagingOpException,<br>IncompleteAnnotationException,<br><strong>IndexOutOfBoundsException</strong>,<br><strong>JMRuntimeException</strong>,<br>LSException,<br>MalformedParameterizedTypeException,<br>MirroredTypeException,<br>MirroredTypesException,<br><strong>MissingResourceException</strong>,<br>NegativeArraySizeException,<br><strong>NoSuchElementException</strong>,<br>NoSuchMechanismException,<br><strong>NullPointerException</strong>,<br>ProfileDataException,<br>ProviderException,<br>RasterFormatException,<br>RejectedExecutionException,<br>SecurityException,<br><strong>SystemException</strong>,<br>TypeConstraintException,<br>TypeNotPresentException,<br>UndeclaredThrowableException,<br>UnknownAnnotationValueException,<br>UnknownElementException,<br><strong>UnknownTypeException</strong>,<br>UnmodifiableSetException,<br>UnsupportedOperationException,<br><strong>WebServiceException</strong></p>
<h3 id="字符流和字节流父类"><a href="#字符流和字节流父类" class="headerlink" title="字符流和字节流父类"></a>字符流和字节流父类</h3><p>Object</p>
<h3 id="Object常用方法"><a href="#Object常用方法" class="headerlink" title="Object常用方法"></a>Object常用方法</h3><p>| 方法 | 返回值 |<br>| getClass() | Class<t> |<br>| hashCode() | int |<br>| toString() | String |<br>| clone() | Object |<br>| equals(Object) | boolean |<br>| wait() | void |<br>| notify() | void |<br>| notifyAll() | void |</t></p>
<h3 id="mysql锁表机制"><a href="#mysql锁表机制" class="headerlink" title="mysql锁表机制"></a>mysql锁表机制</h3><h3 id="如何解决mysql读写冲突"><a href="#如何解决mysql读写冲突" class="headerlink" title="如何解决mysql读写冲突"></a>如何解决mysql读写冲突</h3><h3 id="Transactional"><a href="#Transactional" class="headerlink" title="Transactional"></a>Transactional</h3><h3 id="springmvc常用注解"><a href="#springmvc常用注解" class="headerlink" title="springmvc常用注解"></a>springmvc常用注解</h3><h3 id="spring中bean是单利还是多例"><a href="#spring中bean是单利还是多例" class="headerlink" title="spring中bean是单利还是多例"></a>spring中bean是单利还是多例</h3><h3 id="单利和多例的区别"><a href="#单利和多例的区别" class="headerlink" title="单利和多例的区别"></a>单利和多例的区别</h3>
      
    </div>

	<div>
		
			<div>
    
        <div style="text-align:center;color: #807272;font-size:14px;">END 谢 谢 捧 场 <i class="fa fa-paw"></i> 分 享 一 下 吧</div>
    
</div>
		
	</div>
    <div>
      
        

      
    </div>

    <div>
      
        
  <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
    <div>如果文章对您有用请随意打赏，谢谢支持！</div>
    <button style="width: 52px;height:30px" id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
      <span style="width: 52px;height:30px">赏</span>
    </button>
    <div id="QR" style="display: none;">
      
        <div id="wechat" style="display: inline-block">
          <img id="wechat_qr" src="/images/w.png" alt="volc WeChat Pay"/>
          <p>微信打赏</p>
        </div>
      
      
        <div id="alipay" style="display: inline-block">
          <img id="alipay_qr" src="/images/z.jpg" alt="volc Alipay"/>
          <p>支付宝打赏</p>
        </div>
      
    </div>
  </div>


      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/interview/" rel="tag"><i class="fa fa-tag"></i>interview</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/05/07/线程池/" rel="next" title="线程池">
                <i class="fa fa-chevron-left"></i> 线程池
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </article>


    <div class="post-spread">
      
        
  <div class="bdsharebuttonbox">
    <a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
    <a href="#" class="bds_douban" data-cmd="douban" title="分享到豆瓣网"></a>
    <a href="#" class="bds_sqq" data-cmd="sqq" title="分享到QQ好友"></a>
    <a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间"></a>
    <a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信"></a>
    <a href="#" class="bds_tieba" data-cmd="tieba" title="分享到百度贴吧"></a>
    <a href="#" class="bds_twi" data-cmd="twi" title="分享到Twitter"></a>
    <a href="#" class="bds_fbook" data-cmd="fbook" title="分享到Facebook"></a>
    <a href="#" class="bds_more" data-cmd="more"></a>
    <a class="bds_count" data-cmd="count"></a>
  </div>
  <script>
    window._bd_share_config = {
      "common": {
        "bdText": "",
        "bdMini": "2",
        "bdMiniList": false,
        "bdPic": ""
      },
      "share": {
        "bdSize": "16",
        "bdStyle": "0"
      },
      "image": {
        "viewList": ["tsina", "douban", "sqq", "qzone", "weixin", "twi", "fbook"],
        "viewText": "分享到：",
        "viewSize": "16"
      }
    }
  </script>

<script>
  with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='/static/api/js/share.js?v=89860593.js?'];
</script>

      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div id="lv-container" data-id="city" data-uid="MTAyMC8zNzk1NC8xNDQ4NA=="></div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/0.jpg"
               alt="volc" />
          <p class="site-author-name" itemprop="name">volc</p>
          <p class="site-description motion-element" itemprop="description">学海&无涯</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">72</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">41</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">74</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/volc1605" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://twitter.com/volcliu" target="_blank" title="Twitter">
                  
                    <i class="fa fa-fw fa-twitter"></i>
                  
                  Twitter
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/2297464654/profile?topnav=1&wvr=6&is_all=1" target="_blank" title="微博">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  微博
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.zhihu.com/people/volc" target="_blank" title="知乎">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  知乎
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-link"></i>
              友情链接
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://yisu.ren/index.php/" title="一俗人_PHP" target="_blank">一俗人_PHP</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.fackyou.org/" title="Delay.Hsiao_PHP" target="_blank">Delay.Hsiao_PHP</a>
                </li>
              
            </ul>
          </div>
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#接口和抽象类的区别"><span class="nav-number">1.</span> <span class="nav-text">接口和抽象类的区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JVM加载class文件的原理机制"><span class="nav-number">2.</span> <span class="nav-text">JVM加载class文件的原理机制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#jvm内存结构"><span class="nav-number">3.</span> <span class="nav-text">jvm内存结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#UseCompressedOops有什么作用为什么要使用"><span class="nav-number">4.</span> <span class="nav-text">UseCompressedOops有什么作用为什么要使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#怎样通过Java程序来判断JVM是32位还是64位"><span class="nav-number">5.</span> <span class="nav-text">怎样通过Java程序来判断JVM是32位还是64位</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#instanceofjava关键字"><span class="nav-number">6.</span> <span class="nav-text">instanceofjava关键字</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#堆和栈的区别"><span class="nav-number">7.</span> <span class="nav-text">堆和栈的区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Class-forName的作用"><span class="nav-number">8.</span> <span class="nav-text">Class.forName的作用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JSP4种域对象的查找方式"><span class="nav-number">9.</span> <span class="nav-text">JSP4种域对象的查找方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JSP的九大内置对象"><span class="nav-number">10.</span> <span class="nav-text">JSP的九大内置对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#什么是js"><span class="nav-number">11.</span> <span class="nav-text">什么是js</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#js的4种对象"><span class="nav-number">12.</span> <span class="nav-text">js的4种对象</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#内置对象"><span class="nav-number">12.1.</span> <span class="nav-text">内置对象</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#自定义对象"><span class="nav-number">12.2.</span> <span class="nav-text">自定义对象</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#浏览器对象"><span class="nav-number">12.3.</span> <span class="nav-text">浏览器对象</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ActiveX对象"><span class="nav-number">12.4.</span> <span class="nav-text">ActiveX对象</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#初始化js函数方式"><span class="nav-number">13.</span> <span class="nav-text">初始化js函数方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#javascript中获取标签元素的方式有哪些"><span class="nav-number">14.</span> <span class="nav-text">javascript中获取标签元素的方式有哪些</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#getElementById"><span class="nav-number">14.1.</span> <span class="nav-text">getElementById</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#getElementsByTagName"><span class="nav-number">14.2.</span> <span class="nav-text">getElementsByTagName</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#getElementsByClassName"><span class="nav-number">14.3.</span> <span class="nav-text">getElementsByClassName</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#js中操作标签的class属性的关键字是什么"><span class="nav-number">15.</span> <span class="nav-text">js中操作标签的class属性的关键字是什么</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#写出JavaScript后退到前一个页面的操作，与在浏览器上点击后退按钮相同"><span class="nav-number">16.</span> <span class="nav-text">写出JavaScript后退到前一个页面的操作，与在浏览器上点击后退按钮相同</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ajax"><span class="nav-number">17.</span> <span class="nav-text">ajax</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#servlet返回字符串到页面获取字符串"><span class="nav-number">18.</span> <span class="nav-text">servlet返回字符串到页面获取字符串</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ajax发送post请求"><span class="nav-number">19.</span> <span class="nav-text">ajax发送post请求</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#XML与json"><span class="nav-number">20.</span> <span class="nav-text">XML与json</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#引入css方式"><span class="nav-number">21.</span> <span class="nav-text">引入css方式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#行内式"><span class="nav-number">21.1.</span> <span class="nav-text">行内式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#嵌入式"><span class="nav-number">21.2.</span> <span class="nav-text">嵌入式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#导入式与链接式"><span class="nav-number">21.3.</span> <span class="nav-text">导入式与链接式</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#写出左浮动的css代码"><span class="nav-number">22.</span> <span class="nav-text">写出左浮动的css代码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#在多线程环境下，SimpleDateFormat-是线程安全的吗"><span class="nav-number">23.</span> <span class="nav-text">在多线程环境下，SimpleDateFormat 是线程安全的吗</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#判断JVM是大端还是小端"><span class="nav-number">24.</span> <span class="nav-text">判断JVM是大端还是小端</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#final、finalize-和-finally-的不同之处"><span class="nav-number">25.</span> <span class="nav-text">final、finalize 和 finally 的不同之处</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#反射相关-Reflection"><span class="nav-number">26.</span> <span class="nav-text">反射相关(Reflection)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#描述一下JVM加载class文件的原理机制"><span class="nav-number">26.1.</span> <span class="nav-text">描述一下JVM加载class文件的原理机制?</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Jquery知识"><span class="nav-number">27.</span> <span class="nav-text">Jquery知识</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#获取select下option的值"><span class="nav-number">27.1.</span> <span class="nav-text">获取select下option的值</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#this-和-this-关键字在-jQuery-中有何不同"><span class="nav-number">27.2.</span> <span class="nav-text">$(this) 和 this 关键字在 jQuery 中有何不同</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#中的-lt-DOCTYPE-gt-是什么"><span class="nav-number">28.</span> <span class="nav-text">中的&lt;!DOCTYPE&gt;是什么</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Java-中的构造器链是什么"><span class="nav-number">29.</span> <span class="nav-text">Java 中的构造器链是什么</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IO"><span class="nav-number">30.</span> <span class="nav-text">IO</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#泛型"><span class="nav-number">31.</span> <span class="nav-text">泛型</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#泛型的好处"><span class="nav-number">31.1.</span> <span class="nav-text">泛型的好处</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#泛型中的？通配符的扩展"><span class="nav-number">31.2.</span> <span class="nav-text">泛型中的？通配符的扩展</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#GC"><span class="nav-number">32.</span> <span class="nav-text">GC</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#一些具体常用的垃圾收集算法"><span class="nav-number">32.1.</span> <span class="nav-text">一些具体常用的垃圾收集算法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#使用垃圾收集器要注意的地方"><span class="nav-number">32.2.</span> <span class="nav-text">使用垃圾收集器要注意的地方</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#详解Java-GC的工作原理"><span class="nav-number">32.3.</span> <span class="nav-text">详解Java GC的工作原理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Java中WeakReference与SoftReference的区别"><span class="nav-number">32.4.</span> <span class="nav-text">Java中WeakReference与SoftReference的区别</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数组的排序"><span class="nav-number">33.</span> <span class="nav-text">数组的排序</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#集合的排序"><span class="nav-number">34.</span> <span class="nav-text">集合的排序</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#URI、URL、URN"><span class="nav-number">35.</span> <span class="nav-text">URI、URL、URN</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#相对路径写-与不写"><span class="nav-number">36.</span> <span class="nav-text">相对路径写/与不写/</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#java常用的设计模式"><span class="nav-number">37.</span> <span class="nav-text">java常用的设计模式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#工厂方法模式"><span class="nav-number">37.1.</span> <span class="nav-text">工厂方法模式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#抽象工厂模式（Abstract-Factory）"><span class="nav-number">37.2.</span> <span class="nav-text">抽象工厂模式（Abstract Factory）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#单例模式（Singleton）"><span class="nav-number">37.3.</span> <span class="nav-text">单例模式（Singleton）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建造者模式（Builder）"><span class="nav-number">37.4.</span> <span class="nav-text">建造者模式（Builder）</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#String与StringBuffer"><span class="nav-number">38.</span> <span class="nav-text">String与StringBuffer</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Java基本数据类型？int所占的字节数"><span class="nav-number">39.</span> <span class="nav-text">Java基本数据类型？int所占的字节数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#抽象"><span class="nav-number">40.</span> <span class="nav-text">抽象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#接口"><span class="nav-number">41.</span> <span class="nav-text">接口</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Java语言中的修饰符"><span class="nav-number">42.</span> <span class="nav-text">Java语言中的修饰符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#什么是值传递，什么是引用传递"><span class="nav-number">43.</span> <span class="nav-text">什么是值传递，什么是引用传递</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#hashCode-和equals-的区别"><span class="nav-number">44.</span> <span class="nav-text">hashCode()和equals()的区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#collection"><span class="nav-number">45.</span> <span class="nav-text">collection</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Map集合取值方式"><span class="nav-number">45.1.</span> <span class="nav-text">Map集合取值方式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Java-中的-HashSet，内部是如何工作的"><span class="nav-number">45.2.</span> <span class="nav-text">Java 中的 HashSet，内部是如何工作的</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Hashtable-和-HashMap之间的区别"><span class="nav-number">45.3.</span> <span class="nav-text">Hashtable 和 HashMap之间的区别</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#说出ArrayList-Vector-LinkedList的存储性能和特性"><span class="nav-number">45.4.</span> <span class="nav-text">说出ArrayList,Vector, LinkedList的存储性能和特性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ArrayList-和-HashMap-的默认大小是多数"><span class="nav-number">45.5.</span> <span class="nav-text">ArrayList 和 HashMap 的默认大小是多数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Java-中，Comparator-与-Comparable-有什么不同"><span class="nav-number">45.6.</span> <span class="nav-text">Java 中，Comparator 与 Comparable 有什么不同</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#为什么在重写equals方法的时候需要重写hashCode方法"><span class="nav-number">46.</span> <span class="nav-text">为什么在重写equals方法的时候需要重写hashCode方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#session的特点"><span class="nav-number">47.</span> <span class="nav-text">session的特点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#简述cookie与session作用、区别、应用范围、session的工作原理"><span class="nav-number">48.</span> <span class="nav-text">简述cookie与session作用、区别、应用范围、session的工作原理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Cookie原理"><span class="nav-number">48.1.</span> <span class="nav-text">Cookie原理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#session工作原理"><span class="nav-number">48.2.</span> <span class="nav-text">session工作原理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#cookie-和session-的区别"><span class="nav-number">48.3.</span> <span class="nav-text">cookie 和session 的区别</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#进程概念"><span class="nav-number">49.</span> <span class="nav-text">进程概念</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#线程概念"><span class="nav-number">50.</span> <span class="nav-text">线程概念</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#线程调度方式"><span class="nav-number">50.1.</span> <span class="nav-text">线程调度方式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#java多线程中的伪共享"><span class="nav-number">50.2.</span> <span class="nav-text">java多线程中的伪共享</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#继承thread类与实现runnable接口的区别"><span class="nav-number">51.</span> <span class="nav-text">继承thread类与实现runnable接口的区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实现多线程方法"><span class="nav-number">52.</span> <span class="nav-text">实现多线程方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#线程工作流程"><span class="nav-number">53.</span> <span class="nav-text">线程工作流程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#volatile"><span class="nav-number">54.</span> <span class="nav-text">volatile</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#什么是线程局部变量"><span class="nav-number">55.</span> <span class="nav-text">什么是线程局部变量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HTTP协议"><span class="nav-number">56.</span> <span class="nav-text">HTTP协议</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#浏览器Request-Header和Response-Header的内容"><span class="nav-number">56.1.</span> <span class="nav-text">浏览器Request Header和Response Header的内容</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#状态码"><span class="nav-number">56.2.</span> <span class="nav-text">状态码</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#http协议缓存机制"><span class="nav-number">56.3.</span> <span class="nav-text">http协议缓存机制</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#缓存规则"><span class="nav-number">56.3.1.</span> <span class="nav-text">缓存规则</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#强制缓存"><span class="nav-number">56.3.2.</span> <span class="nav-text">强制缓存</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#Expires"><span class="nav-number">56.3.2.1.</span> <span class="nav-text">Expires</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#Cache-Control"><span class="nav-number">56.3.2.2.</span> <span class="nav-text">Cache-Control</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#对比缓存"><span class="nav-number">56.3.3.</span> <span class="nav-text">对比缓存</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#Last-Modified-If-Modified-Since"><span class="nav-number">56.3.3.1.</span> <span class="nav-text">Last-Modified/If-Modified-Since</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#Etag-If-None-Match"><span class="nav-number">56.3.3.2.</span> <span class="nav-text">Etag/If-None-Match</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#GET和POST的区别"><span class="nav-number">57.</span> <span class="nav-text">GET和POST的区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TCP和UDP的异同"><span class="nav-number">58.</span> <span class="nav-text">TCP和UDP的异同</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#单例模式-饿汉与懒汉"><span class="nav-number">59.</span> <span class="nav-text">单例模式(饿汉与懒汉)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#简述Socket"><span class="nav-number">60.</span> <span class="nav-text">简述Socket</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TCP-服务器的工作流程"><span class="nav-number">61.</span> <span class="nav-text">TCP 服务器的工作流程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#jdbc工作流程"><span class="nav-number">62.</span> <span class="nav-text">jdbc工作流程</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#工作原理"><span class="nav-number">62.1.</span> <span class="nav-text">工作原理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Statement、PreperStateent、CallableStatement之间的区别"><span class="nav-number">62.2.</span> <span class="nav-text">Statement、PreperStateent、CallableStatement之间的区别</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#注册驱动"><span class="nav-number">62.3.</span> <span class="nav-text">注册驱动</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#接口Statement中定义的execute方法的返回类型是-代表的含义-executeQuery方法返回的类型是-executeUpdate返回的类型是-代表的含义是"><span class="nav-number">63.</span> <span class="nav-text">接口Statement中定义的execute方法的返回类型是? 代表的含义? executeQuery方法返回的类型是?  executeUpdate返回的类型是? 代表的含义是?</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#servlet工作流程"><span class="nav-number">64.</span> <span class="nav-text">servlet工作流程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#重定向和转发"><span class="nav-number">65.</span> <span class="nav-text">重定向和转发</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Struts2的工作流程"><span class="nav-number">66.</span> <span class="nav-text">Struts2的工作流程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Struts常用标签"><span class="nav-number">67.</span> <span class="nav-text">Struts常用标签</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#struts-xml样式"><span class="nav-number">68.</span> <span class="nav-text">struts.xml样式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#web-xml配置过滤器"><span class="nav-number">69.</span> <span class="nav-text">web.xml配置过滤器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#El表达式语言"><span class="nav-number">70.</span> <span class="nav-text">El表达式语言</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Ognl表达式语言"><span class="nav-number">71.</span> <span class="nav-text">Ognl表达式语言</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#拦截器功能与过滤器功能类似"><span class="nav-number">72.</span> <span class="nav-text">拦截器功能与过滤器功能类似</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#struct2的Interceptor有什么用？基于什么技术"><span class="nav-number">73.</span> <span class="nav-text">struct2的Interceptor有什么用？基于什么技术</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#interceptor执行流程"><span class="nav-number">74.</span> <span class="nav-text">interceptor执行流程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数据库"><span class="nav-number">75.</span> <span class="nav-text">数据库</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#unicode"><span class="nav-number">75.1.</span> <span class="nav-text">unicode</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#sql语句"><span class="nav-number">75.2.</span> <span class="nav-text">sql语句</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#mysql分页"><span class="nav-number">75.3.</span> <span class="nav-text">mysql分页</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#函数与存储过程使用场景"><span class="nav-number">76.</span> <span class="nav-text">函数与存储过程使用场景</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#关于Oracle事务的总结"><span class="nav-number">77.</span> <span class="nav-text">关于Oracle事务的总结</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#什么是事务，事务的特性是什么"><span class="nav-number">77.1.</span> <span class="nav-text">什么是事务，事务的特性是什么</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#PLSQL"><span class="nav-number">77.2.</span> <span class="nav-text">PLSQL</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#触发器作用"><span class="nav-number">78.</span> <span class="nav-text">触发器作用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#oracle-sql数据库的优化"><span class="nav-number">79.</span> <span class="nav-text">oracle sql数据库的优化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#oracle面试题"><span class="nav-number">80.</span> <span class="nav-text">oracle面试题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#为什么需要锁（并发控制）"><span class="nav-number">81.</span> <span class="nav-text">为什么需要锁（并发控制）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#丢失更新"><span class="nav-number">81.1.</span> <span class="nav-text">丢失更新</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#脏读"><span class="nav-number">81.2.</span> <span class="nav-text">脏读</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#悲观锁"><span class="nav-number">82.</span> <span class="nav-text">悲观锁</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#游标-cursor"><span class="nav-number">83.</span> <span class="nav-text">游标/cursor</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#oracle更新date类型数据"><span class="nav-number">84.</span> <span class="nav-text">oracle更新date类型数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#事务"><span class="nav-number">85.</span> <span class="nav-text">事务</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#hibernate的工作流程"><span class="nav-number">86.</span> <span class="nav-text">hibernate的工作流程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#hibernate映射文件的作用"><span class="nav-number">87.</span> <span class="nav-text">hibernate映射文件的作用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#hibernate的反射"><span class="nav-number">88.</span> <span class="nav-text">hibernate的反射</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Hibernate是如何延迟加载"><span class="nav-number">89.</span> <span class="nav-text">Hibernate是如何延迟加载</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#hibernate缓存机制"><span class="nav-number">90.</span> <span class="nav-text">hibernate缓存机制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Hibernate自带的分页机制是什么？如果不使用Hibernate自带的分页，则采用什么方式分页？"><span class="nav-number">91.</span> <span class="nav-text">Hibernate自带的分页机制是什么？如果不使用Hibernate自带的分页，则采用什么方式分页？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#spring配置数据库"><span class="nav-number">92.</span> <span class="nav-text">spring配置数据库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#springmvc的工作流程"><span class="nav-number">93.</span> <span class="nav-text">springmvc的工作流程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#介绍一下Spring的事务管理"><span class="nav-number">94.</span> <span class="nav-text">介绍一下Spring的事务管理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#springmvc与struts2的区别"><span class="nav-number">95.</span> <span class="nav-text">springmvc与struts2的区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Spring的安全（线程安全？）问题？"><span class="nav-number">96.</span> <span class="nav-text">Spring的安全（线程安全？）问题？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#xml配置与注解的优缺点"><span class="nav-number">97.</span> <span class="nav-text">xml配置与注解的优缺点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#mybatis工作流程"><span class="nav-number">98.</span> <span class="nav-text">mybatis工作流程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#请你谈谈SSH整合"><span class="nav-number">99.</span> <span class="nav-text">请你谈谈SSH整合</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#webservice"><span class="nav-number">100.</span> <span class="nav-text">webservice</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#网络七层协议"><span class="nav-number">100.1.</span> <span class="nav-text">网络七层协议</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#为什么要分层"><span class="nav-number">100.2.</span> <span class="nav-text">为什么要分层</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#WebService概念介绍"><span class="nav-number">101.</span> <span class="nav-text">WebService概念介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用CXF框架，发布webservice服务，并使用客户端远程访问webservice"><span class="nav-number">102.</span> <span class="nav-text">使用CXF框架，发布webservice服务，并使用客户端远程访问webservice</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Spring-CXF整合来管理webservice"><span class="nav-number">103.</span> <span class="nav-text">Spring+CXF整合来管理webservice</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#weblogic"><span class="nav-number">104.</span> <span class="nav-text">weblogic</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#linux"><span class="nav-number">105.</span> <span class="nav-text">linux</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Linux目录结构"><span class="nav-number">105.1.</span> <span class="nav-text">Linux目录结构</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#目录结构及权限"><span class="nav-number">105.2.</span> <span class="nav-text">目录结构及权限</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Tomcat、Weblogic的区别"><span class="nav-number">106.</span> <span class="nav-text">Tomcat、Weblogic的区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Lucene"><span class="nav-number">107.</span> <span class="nav-text">Lucene</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#索引库的CREATE-UPDATE-RETRIEVE-取回-DELETE"><span class="nav-number">108.</span> <span class="nav-text">索引库的CREATE UPDATE RETRIEVE(取回) DELETE</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#activiti"><span class="nav-number">109.</span> <span class="nav-text">activiti</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Maven"><span class="nav-number">110.</span> <span class="nav-text">Maven</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Quartz-制定任务详细执行时间"><span class="nav-number">111.</span> <span class="nav-text">Quartz(制定任务详细执行时间)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2345公司面试题"><span class="nav-number">112.</span> <span class="nav-text">2345公司面试题</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#、–是否是线程安全的，为什么"><span class="nav-number">112.1.</span> <span class="nav-text">++、–是否是线程安全的，为什么</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Spring-IOC的理解和原理"><span class="nav-number">112.2.</span> <span class="nav-text">Spring IOC的理解和原理</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#理解"><span class="nav-number">112.2.1.</span> <span class="nav-text">理解</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#IOC原理"><span class="nav-number">112.2.2.</span> <span class="nav-text">IOC原理</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#BeanFactory"><span class="nav-number">112.2.2.1.</span> <span class="nav-text">BeanFactory</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#ApplicationContext"><span class="nav-number">112.2.2.2.</span> <span class="nav-text">ApplicationContext</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#DI-Dependency-Injection，依赖注入-原理"><span class="nav-number">112.2.3.</span> <span class="nav-text">DI(Dependency Injection，依赖注入)原理</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#AOP面向切面原理"><span class="nav-number">112.3.</span> <span class="nav-text">AOP面向切面原理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#堆和栈的区别-1"><span class="nav-number">112.4.</span> <span class="nav-text">堆和栈的区别</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#对象的值相同-y-equals-x-true-hash-code相同吗，为什么"><span class="nav-number">112.5.</span> <span class="nav-text">对象的值相同(y.equals(x) == true),hash code相同吗，为什么</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#线程池的作用"><span class="nav-number">112.6.</span> <span class="nav-text">线程池的作用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Java实现线程同步的方式"><span class="nav-number">112.7.</span> <span class="nav-text">Java实现线程同步的方式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#修饰符范围由大到小排序"><span class="nav-number">112.8.</span> <span class="nav-text">修饰符范围由大到小排序</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ArrayList和LinkedList的在存储方式上区别"><span class="nav-number">112.9.</span> <span class="nav-text">ArrayList和LinkedList的在存储方式上区别</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#查看linux服务器的内存使用情况的命令"><span class="nav-number">112.10.</span> <span class="nav-text">查看linux服务器的内存使用情况的命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#添加优化查询速度索引的sql语句"><span class="nav-number">112.11.</span> <span class="nav-text">添加优化查询速度索引的sql语句</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#List-set-map都同时继承了Conllection接口吗"><span class="nav-number">112.12.</span> <span class="nav-text">List,set,map都同时继承了Conllection接口吗</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#String-a-new-String-“abc”-创建了几个字符串对象"><span class="nav-number">112.13.</span> <span class="nav-text">String a = new String(“abc”);创建了几个字符串对象</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#一个类的构造方法可以被其他对象调用吗"><span class="nav-number">112.14.</span> <span class="nav-text">一个类的构造方法可以被其他对象调用吗</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#闭包"><span class="nav-number">113.</span> <span class="nav-text">闭包</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#什么是闭包"><span class="nav-number">113.1.</span> <span class="nav-text">什么是闭包</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#闭包的作用"><span class="nav-number">113.2.</span> <span class="nav-text">闭包的作用</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#读取函数内部变量"><span class="nav-number">113.2.1.</span> <span class="nav-text">读取函数内部变量</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#让变量始终保持在内存中"><span class="nav-number">113.2.2.</span> <span class="nav-text">让变量始终保持在内存中</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#使用闭包注意"><span class="nav-number">113.3.</span> <span class="nav-text">使用闭包注意</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#redis和memecache的不同"><span class="nav-number">114.</span> <span class="nav-text">redis和memecache的不同</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Mysql索引的种类和创建"><span class="nav-number">115.</span> <span class="nav-text">Mysql索引的种类和创建</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Mysql各种存储引擎"><span class="nav-number">116.</span> <span class="nav-text">Mysql各种存储引擎</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#String-StringBuffer-StringBuild的区别"><span class="nav-number">117.</span> <span class="nav-text">String,StringBuffer,StringBuild的区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#开发中建造者模式有哪些"><span class="nav-number">118.</span> <span class="nav-text">开发中建造者模式有哪些</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Mybatis中-和-的区别"><span class="nav-number">119.</span> <span class="nav-text">Mybatis中#和$的区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HashMap底层实现原理"><span class="nav-number">120.</span> <span class="nav-text">HashMap底层实现原理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#解决不同手机录制视频时编码不同导致web端无法播放的问题"><span class="nav-number">121.</span> <span class="nav-text">解决不同手机录制视频时编码不同导致web端无法播放的问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#List-set-map区别"><span class="nav-number">122.</span> <span class="nav-text">List,set,map区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JVM调优"><span class="nav-number">123.</span> <span class="nav-text">JVM调优</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#websocket-socket和http"><span class="nav-number">124.</span> <span class="nav-text">websocket,socket和http</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#处理创建订单号并发"><span class="nav-number">125.</span> <span class="nav-text">处理创建订单号并发</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#session是什么时候创建的"><span class="nav-number">126.</span> <span class="nav-text">session是什么时候创建的</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#存储过程优点"><span class="nav-number">127.</span> <span class="nav-text">存储过程优点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#函数和存储过程"><span class="nav-number">128.</span> <span class="nav-text">函数和存储过程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#视图的作用"><span class="nav-number">129.</span> <span class="nav-text">视图的作用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Jquery动态添加一行方法"><span class="nav-number">130.</span> <span class="nav-text">Jquery动态添加一行方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Js赋值顺序"><span class="nav-number">131.</span> <span class="nav-text">Js赋值顺序</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#log4j日志级别"><span class="nav-number">132.</span> <span class="nav-text">log4j日志级别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#五个运行时异常"><span class="nav-number">133.</span> <span class="nav-text">五个运行时异常</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#字符流和字节流父类"><span class="nav-number">134.</span> <span class="nav-text">字符流和字节流父类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Object常用方法"><span class="nav-number">135.</span> <span class="nav-text">Object常用方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#mysql锁表机制"><span class="nav-number">136.</span> <span class="nav-text">mysql锁表机制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#如何解决mysql读写冲突"><span class="nav-number">137.</span> <span class="nav-text">如何解决mysql读写冲突</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Transactional"><span class="nav-number">138.</span> <span class="nav-text">Transactional</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#springmvc常用注解"><span class="nav-number">139.</span> <span class="nav-text">springmvc常用注解</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#spring中bean是单利还是多例"><span class="nav-number">140.</span> <span class="nav-text">spring中bean是单利还是多例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#单利和多例的区别"><span class="nav-number">141.</span> <span class="nav-text">单利和多例的区别</span></a></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<div class="copyright" style="margin-right: 14px">
    
    &copy; 
    <span itemprop="copyrightYear">2018</span>
    <span class="with-love" id="heart">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">volc</span>
	&nbsp;&nbsp;&nbsp;
	<a href="http://www.miitbeian.gov.cn/">苏ICP备17018811号</a>
  </div>

  <div class="powered-by">
    由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
  </div>

  <div class="theme-info">
    主题 -
    <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
      NexT.Mist
    </a>
    <span>&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;</span>
    <span>本站总访问量<span><span id="busuanzi_value_site_pv"></span>
    <span>&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;</span>
    <span>您是第</span>
    <span id="busuanzi_value_site_uv"></span>
    <span>个小伙伴</span>
	<span>&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;</span>
	<span id="showDays"></span>
  </div>
 	
<script>
	var birthDay = new Date('09/1/2016');
	var now = new Date();
	var duration = now.getTime() - birthDay.getTime();
	var total= Math.floor(duration / (1000 * 60 * 60 * 24));
	document.getElementById('showDays').innerHTML='本站已运行' + total + '天';
</script>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  ﻿
  
    <script type="text/javascript">
      (function(d, s) {
        var j, e = d.getElementsByTagName(s)[0];
        if (typeof LivereTower === 'function') { return; }
        j = d.createElement(s);
        j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
        j.async = true;
        e.parentNode.insertBefore(j, e);
      })(document, 'script');
    </script>
  

  
  
  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
       search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body").append('<div class="popoverlay">').css('overflow', 'hidden');
      $('.popup').toggle();

    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
    'use strict';
    $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
            // get the contents from search data
            isfetched = true;
            $('.popup').detach().appendTo('.header-inner');
            var datas = $( "entry", xmlResponse ).map(function() {
                return {
                    title: $( "title", this ).text(),
                    content: $("content",this).text(),
                    url: $( "url" , this).text()
                };
            }).get();
            var $input = document.getElementById(search_id);
            var $resultContent = document.getElementById(content_id);
            $input.addEventListener('input', function(){
                var matchcounts = 0;
                var str='<ul class=\"search-result-list\">';
                var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                $resultContent.innerHTML = "";
                if (this.value.trim().length > 1) {
                // perform local searching
                datas.forEach(function(data) {
                    var isMatch = true;
                    var content_index = [];
                    var data_title = data.title.trim().toLowerCase();
                    var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                    var data_url = data.url;
                    var index_title = -1;
                    var index_content = -1;
                    var first_occur = -1;
                    // only match artiles with not empty titles and contents
                    if(data_title != '' && data_content != '') {
                        keywords.forEach(function(keyword, i) {
                            index_title = data_title.indexOf(keyword);
                            index_content = data_content.indexOf(keyword);
                            if( index_title < 0 && index_content < 0 ){
                                isMatch = false;
                            } else {
                                if (index_content < 0) {
                                    index_content = 0;
                                }
                                if (i == 0) {
                                    first_occur = index_content;
                                }
                            }
                        });
                    }
                    // show search results
                    if (isMatch) {
                        matchcounts += 1;
                        str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                        var content = data.content.trim().replace(/<[^>]+>/g,"");
                        if (first_occur >= 0) {
                            // cut out 100 characters
                            var start = first_occur - 20;
                            var end = first_occur + 80;
                            if(start < 0){
                                start = 0;
                            }
                            if(start == 0){
                                end = 50;
                            }
                            if(end > content.length){
                                end = content.length;
                            }
                            var match_content = content.substring(start, end);
                            // highlight all keywords
                            keywords.forEach(function(keyword){
                                var regS = new RegExp(keyword, "gi");
                                match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                            });

                            str += "<p class=\"search-result\">" + match_content +"...</p>"
                        }
                        str += "</li>";
                    }
                })};
                str += "</ul>";
                if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
                if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
                $resultContent.innerHTML = str;
            });
            proceedsearch();
        }
    });}

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };

    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".popoverlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>


  

  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("uSB1w939Pcabp8qlmznF7Spw-gzGzoHsz", "98j3mTSX2edWrjz0KNvtWaI5");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");
      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';
          var UPDATED_AT = '.leancloud-updated-at'; // 新增代码 定义最近变更时间的class
          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }
          // console.log(results);
          for(var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');   // 获取阅读量
            var updatedT = item.updatedAt; // 新增代码 获取最近浏览时间 需要注意的是updateT是对象并不是字符串
            var element = document.getElementById(url);
            $(element).find(COUNT_CONTAINER_REF).text(time);
            // 新增代码 转换日期格式
            if(updatedT != null && updatedT != '') {
              var a = [updatedT.getFullYear(), updatedT.getMonth() + 1, updatedT.getDate(), updatedT.getHours(), updatedT.getMinutes(), updatedT.getSeconds()];
              for(var j = 0,len = a.length; j < len; j++) {
                  if(a[j] < 10) {
                      a[j] = '0' + a[j];
                  }
              }
              var updateTime = a[0] + '-' + a[1] + '-' + a[2] + ' ' + a[3] + ':' + a[4] + ':' + a[5];
              $(element).find(UPDATED_AT).text(updateTime);
            }
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            var updatedAtContent = $(element).find(UPDATED_AT);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
            // 新增代码 如果首页的文章没有更新侧默认为暂无更新
            if(updatedAtContent.text() == '') {
              updatedAtContent.text('无人浏览');
            }
            // 结束
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);
      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-backstretch/2.0.4/jquery.backstretch.min.js"></script>;
<script>
$("body").backstretch("/images/context-bk-universe.jpg");
</script>
<!--
<a href="https://github.com/volc1605"><img style="position: absolute; top: 0; right: 0; border: 0;" src="images/forkme_right_green_007200.png" alt="Fork me on GitHub"></a>
-->
</body>
</html>
